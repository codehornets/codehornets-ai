const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ClaudeCodeSession-DW2s5krf.js","assets/ui-vendor-DaEk3EBW.js","assets/react-vendor-CWc6w16D.js","assets/tauri-KcdjxZBy.js","assets/rotate-ccw-cfI096PE.js","assets/utils-C7WoKIg-.js","assets/syntax-vendor-B5APtO4k.js","assets/editor-vendor-CFSDMwtX.js","assets/editor-vendor-BJBUeiC3.css","assets/AgentRunOutputViewer-YvEsupIb.js","assets/Agents-HbHJAPo1.js"])))=>i.map(i=>d[i]);
var hg=Object.defineProperty;var mg=(t,e,s)=>e in t?hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Qe=(t,e,s)=>mg(t,typeof e!="symbol"?e+"":e,s);import{r as f,j as n,C as za,P as eh,a as th,T as sh,R as He,b as pg,c as nh,I as fg,S as rh,d as ah,e as gg,f as ih,V as xg,L as oh,g as lh,h as vg,i as yg,k as ch,l as bg,m as jg,O as dh,n as _g,o as uh,p as wg,q as hh,D as mh,s as Ng,t as ph,u as fh,v as kg,w as gh,x as xh,y as vh,z as yh,A as bh,B as jh,E as _h,F as Sg,G as Cg,H as wh}from"./ui-vendor-DaEk3EBW.js";import{a as Eg,g as Tg}from"./react-vendor-CWc6w16D.js";import{_ as zt,h as us}from"./syntax-vendor-B5APtO4k.js";import{i as jr,g as ui,o as il,l as Br,a as Mg,s as Ag}from"./tauri-KcdjxZBy.js";import{t as Pg,c as Nh}from"./utils-C7WoKIg-.js";import{E as ol,u as Rg,r as Ig,b as Fg,V as Dg,c as Og,v as Lg,t as $g,d as hi,e as hc}from"./editor-vendor-CFSDMwtX.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Hr={},mc;function Vg(){if(mc)return Hr;mc=1;var t=Eg();return Hr.createRoot=t.createRoot,Hr.hydrateRoot=t.hydrateRoot,Hr}var zg=Vg();const Ug=Tg(zg),ll=f.createContext({});function mn(t){const e=f.useRef(null);return e.current===null&&(e.current=t()),e.current}const cl=typeof window<"u",dl=cl?f.useLayoutEffect:f.useEffect,Ua=f.createContext(null);function ul(t,e){t.indexOf(e)===-1&&t.push(e)}function hl(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}function Bg([...t],e,s){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const a=s<0?t.length+s:s,[i]=t.splice(e,1);t.splice(a,0,i)}return t}const hs=(t,e,s)=>s>e?e:s<t?t:s;let ml=()=>{};const ms={},kh=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Sh(t){return typeof t=="object"&&t!==null}const Ch=t=>/^0[^.\s]+$/u.test(t);function pl(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rt=t=>t,Hg=(t,e)=>s=>e(t(s)),Or=(...t)=>t.reduce(Hg),_r=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class fl{constructor(){this.subscriptions=[]}add(e){return ul(this.subscriptions,e),()=>hl(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Jt=t=>t*1e3,Xt=t=>t/1e3;function Eh(t,e){return e?t*(1e3/e):0}const Th=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,qg=1e-7,Wg=12;function Gg(t,e,s,r,a){let i,o,l=0;do o=e+(s-e)/2,i=Th(o,r,a)-t,i>0?s=o:e=o;while(Math.abs(i)>qg&&++l<Wg);return o}function Lr(t,e,s,r){if(t===e&&s===r)return Rt;const a=i=>Gg(i,0,1,t,s);return i=>i===0||i===1?i:Th(a(i),e,r)}const Mh=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ah=t=>e=>1-t(1-e),Ph=Lr(.33,1.53,.69,.99),gl=Ah(Ph),Rh=Mh(gl),Ih=t=>(t*=2)<1?.5*gl(t):.5*(2-Math.pow(2,-10*(t-1))),xl=t=>1-Math.sin(Math.acos(t)),Fh=Ah(xl),Dh=Mh(xl),Kg=Lr(.42,0,1,1),Yg=Lr(0,0,.58,1),Oh=Lr(.42,0,.58,1),Jg=t=>Array.isArray(t)&&typeof t[0]!="number",Lh=t=>Array.isArray(t)&&typeof t[0]=="number",Xg={linear:Rt,easeIn:Kg,easeInOut:Oh,easeOut:Yg,circIn:xl,circInOut:Dh,circOut:Fh,backIn:gl,backInOut:Rh,backOut:Ph,anticipate:Ih},Zg=t=>typeof t=="string",pc=t=>{if(Lh(t)){ml(t.length===4);const[e,s,r,a]=t;return Lr(e,s,r,a)}else if(Zg(t))return Xg[t];return t},qr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Qg(t,e){let s=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),t()),u(l)}const d={schedule:(u,h=!1,m=!1)=>{const g=m&&a?s:r;return h&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[s,r]=[r,s],s.forEach(c),s.clear(),a=!1,i&&(i=!1,d.process(u))}};return d}const ex=40;function $h(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=qr.reduce((j,S)=>(j[S]=Qg(i),j),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:p,postRender:g}=o,x=()=>{const j=ms.useManualTiming?a.timestamp:performance.now();s=!1,ms.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(j-a.timestamp,ex),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),m.process(a),p.process(a),g.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(x))},b=()=>{s=!0,r=!0,a.isProcessing||t(x)};return{schedule:qr.reduce((j,S)=>{const w=o[S];return j[S]=(_,N=!1,C=!1)=>(s||b(),w.schedule(_,N,C)),j},{}),cancel:j=>{for(let S=0;S<qr.length;S++)o[qr[S]].cancel(j)},state:a,steps:o}}const{schedule:Ie,cancel:ps,state:et,steps:mi}=$h(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rt,!0);let ca;function tx(){ca=void 0}const jt={now:()=>(ca===void 0&&jt.set(et.isProcessing||ms.useManualTiming?et.timestamp:performance.now()),ca),set:t=>{ca=t,queueMicrotask(tx)}},Vh=t=>e=>typeof e=="string"&&e.startsWith(t),vl=Vh("--"),sx=Vh("var(--"),yl=t=>sx(t)?nx.test(t.split("/*")[0].trim()):!1,nx=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Un={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wr={...Un,transform:t=>hs(0,1,t)},Wr={...Un,default:1},ur=t=>Math.round(t*1e5)/1e5,bl=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rx(t){return t==null}const ax=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jl=(t,e)=>s=>!!(typeof s=="string"&&ax.test(s)&&s.startsWith(t)||e&&!rx(s)&&Object.prototype.hasOwnProperty.call(s,e)),zh=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(bl);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ix=t=>hs(0,255,t),pi={...Un,transform:t=>Math.round(ix(t))},Qs={test:jl("rgb","red"),parse:zh("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+pi.transform(t)+", "+pi.transform(e)+", "+pi.transform(s)+", "+ur(wr.transform(r))+")"};function ox(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Gi={test:jl("#"),parse:ox,transform:Qs.transform},$r=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ns=$r("deg"),Zt=$r("%"),pe=$r("px"),lx=$r("vh"),cx=$r("vw"),fc={...Zt,parse:t=>Zt.parse(t)/100,transform:t=>Zt.transform(t*100)},wn={test:jl("hsl","hue"),parse:zh("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zt.transform(ur(e))+", "+Zt.transform(ur(s))+", "+ur(wr.transform(r))+")"},Be={test:t=>Qs.test(t)||Gi.test(t)||wn.test(t),parse:t=>Qs.test(t)?Qs.parse(t):wn.test(t)?wn.parse(t):Gi.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qs.transform(t):wn.transform(t),getAnimatableNone:t=>{const e=Be.parse(t);return e.alpha=0,Be.transform(e)}},dx=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ux(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bl))==null?void 0:e.length)||0)+(((s=t.match(dx))==null?void 0:s.length)||0)>0}const Uh="number",Bh="color",hx="var",mx="var(",gc="${}",px=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nr(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=e.replace(px,c=>(Be.test(c)?(r.color.push(i),a.push(Bh),s.push(Be.parse(c))):c.startsWith(mx)?(r.var.push(i),a.push(hx),s.push(c)):(r.number.push(i),a.push(Uh),s.push(parseFloat(c))),++i,gc)).split(gc);return{values:s,split:l,indexes:r,types:a}}function Hh(t){return Nr(t).values}function qh(t){const{split:e,types:s}=Nr(t),r=e.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],a[o]!==void 0){const l=s[o];l===Uh?i+=ur(a[o]):l===Bh?i+=Be.transform(a[o]):i+=a[o]}return i}}const fx=t=>typeof t=="number"?0:Be.test(t)?Be.getAnimatableNone(t):t;function gx(t){const e=Hh(t);return qh(t)(e.map(fx))}const Ms={test:ux,parse:Hh,createTransformer:qh,getAnimatableNone:gx};function fi(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function xx({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,i=0,o=0;if(!e)a=i=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;a=fi(c,l,t+1/3),i=fi(c,l,t),o=fi(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function va(t,e){return s=>s>0?e:t}const Re=(t,e,s)=>t+(e-t)*s,gi=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},vx=[Gi,Qs,wn],yx=t=>vx.find(e=>e.test(t));function xc(t){const e=yx(t);if(!e)return!1;let s=e.parse(t);return e===wn&&(s=xx(s)),s}const vc=(t,e)=>{const s=xc(t),r=xc(e);if(!s||!r)return va(t,e);const a={...s};return i=>(a.red=gi(s.red,r.red,i),a.green=gi(s.green,r.green,i),a.blue=gi(s.blue,r.blue,i),a.alpha=Re(s.alpha,r.alpha,i),Qs.transform(a))},Ki=new Set(["none","hidden"]);function bx(t,e){return Ki.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function jx(t,e){return s=>Re(t,e,s)}function _l(t){return typeof t=="number"?jx:typeof t=="string"?yl(t)?va:Be.test(t)?vc:Nx:Array.isArray(t)?Wh:typeof t=="object"?Be.test(t)?vc:_x:va}function Wh(t,e){const s=[...t],r=s.length,a=t.map((i,o)=>_l(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)s[o]=a[o](i);return s}}function _x(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=_l(t[a])(t[a],e[a]));return a=>{for(const i in r)s[i]=r[i](a);return s}}function wx(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][r[i]],l=t.values[o]??0;s[a]=l,r[i]++}return s}const Nx=(t,e)=>{const s=Ms.createTransformer(e),r=Nr(t),a=Nr(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Ki.has(t)&&!a.values.length||Ki.has(e)&&!r.values.length?bx(t,e):Or(Wh(wx(r,a),a.values),s):va(t,e)};function Gh(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Re(t,e,s):_l(t)(t,e)}const kx=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Ie.update(e,s),stop:()=>ps(e),now:()=>et.isProcessing?et.timestamp:jt.now()}},Kh=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)r+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ya=2e4;function wl(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<ya;)e+=s,r=t.next(e);return e>=ya?1/0:e}function Sx(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(wl(r),ya);return{type:"keyframes",ease:i=>r.next(a*i).value/e,duration:Xt(a)}}const Cx=5;function Yh(t,e,s){const r=Math.max(e-Cx,0);return Eh(s-t(r),e-r)}const Oe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xi=.001;function Ex({duration:t=Oe.duration,bounce:e=Oe.bounce,velocity:s=Oe.velocity,mass:r=Oe.mass}){let a,i,o=1-e;o=hs(Oe.minDamping,Oe.maxDamping,o),t=hs(Oe.minDuration,Oe.maxDuration,Xt(t)),o<1?(a=d=>{const u=d*o,h=u*t,m=u-s,p=Yi(d,o),g=Math.exp(-h);return xi-m/p*g},i=d=>{const h=d*o*t,m=h*s+s,p=Math.pow(o,2)*Math.pow(d,2)*t,g=Math.exp(-h),x=Yi(Math.pow(d,2),o);return(-a(d)+xi>0?-1:1)*((m-p)*g)/x}):(a=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-xi+u*h},i=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const l=5/t,c=Mx(a,i,l);if(t=Jt(t),isNaN(c))return{stiffness:Oe.stiffness,damping:Oe.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const Tx=12;function Mx(t,e,s){let r=s;for(let a=1;a<Tx;a++)r=r-t(r)/e(r);return r}function Yi(t,e){return t*Math.sqrt(1-e*e)}const Ax=["duration","bounce"],Px=["stiffness","damping","mass"];function yc(t,e){return e.some(s=>t[s]!==void 0)}function Rx(t){let e={velocity:Oe.velocity,stiffness:Oe.stiffness,damping:Oe.damping,mass:Oe.mass,isResolvedFromDuration:!1,...t};if(!yc(t,Px)&&yc(t,Ax))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,i=2*hs(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Oe.mass,stiffness:a,damping:i}}else{const s=Ex(t);e={...e,...s,mass:Oe.mass},e.isResolvedFromDuration=!0}return e}function ba(t=Oe.visualDuration,e=Oe.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=Rx({...s,velocity:-Xt(s.velocity||0)}),g=m||0,x=d/(2*Math.sqrt(c*u)),b=o-i,y=Xt(Math.sqrt(c/u)),v=Math.abs(b)<5;r||(r=v?Oe.restSpeed.granular:Oe.restSpeed.default),a||(a=v?Oe.restDelta.granular:Oe.restDelta.default);let j;if(x<1){const w=Yi(y,x);j=_=>{const N=Math.exp(-x*y*_);return o-N*((g+x*y*b)/w*Math.sin(w*_)+b*Math.cos(w*_))}}else if(x===1)j=w=>o-Math.exp(-y*w)*(b+(g+y*b)*w);else{const w=y*Math.sqrt(x*x-1);j=_=>{const N=Math.exp(-x*y*_),C=Math.min(w*_,300);return o-N*((g+x*y*b)*Math.sinh(C)+w*b*Math.cosh(C))/w}}const S={calculatedDuration:p&&h||null,next:w=>{const _=j(w);if(p)l.done=w>=h;else{let N=w===0?g:0;x<1&&(N=w===0?Jt(g):Yh(j,w,_));const C=Math.abs(N)<=r,P=Math.abs(o-_)<=a;l.done=C&&P}return l.value=l.done?o:_,l},toString:()=>{const w=Math.min(wl(S),ya),_=Kh(N=>S.next(w*N).value,w,30);return w+"ms "+_},toTransition:()=>{}};return S}ba.applyToOptions=t=>{const e=Sx(t,100,ba);return t.ease=e.ease,t.duration=Jt(e.duration),t.type="keyframes",t};function Ji({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},p=C=>l!==void 0&&C<l||c!==void 0&&C>c,g=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let x=s*e;const b=h+x,y=o===void 0?b:o(b);y!==b&&(x=y-h);const v=C=>-x*Math.exp(-C/r),j=C=>y+v(C),S=C=>{const P=v(C),O=j(C);m.done=Math.abs(P)<=d,m.value=m.done?y:O};let w,_;const N=C=>{p(m.value)&&(w=C,_=ba({keyframes:[m.value,g(m.value)],velocity:Yh(j,C,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:C=>{let P=!1;return!_&&w===void 0&&(P=!0,S(C),N(C)),w!==void 0&&C>=w?_.next(C-w):(!P&&S(C),m)}}}function Ix(t,e,s){const r=[],a=s||ms.mix||Gh,i=t.length-1;for(let o=0;o<i;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Rt:e;l=Or(c,l)}r.push(l)}return r}function Jh(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const i=t.length;if(ml(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Ix(e,r,a),c=l.length,d=u=>{if(o&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=_r(t[h],t[h+1],u);return l[h](m)};return s?u=>d(hs(t[0],t[i-1],u)):d}function Fx(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=_r(0,e,r);t.push(Re(s,1,a))}}function Dx(t){const e=[0];return Fx(e,t.length-1),e}function Ox(t,e){return t.map(s=>s*e)}function Lx(t,e){return t.map(()=>e||Oh).splice(0,t.length-1)}function hr({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=Jg(r)?r.map(pc):pc(r),i={done:!1,value:e[0]},o=Ox(s&&s.length===e.length?s:Dx(e),t),l=Jh(o,e,{ease:Array.isArray(a)?a:Lx(e,a)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const $x=t=>t!==null;function Nl(t,{repeat:e,repeatType:s="loop"},r,a=1){const i=t.filter($x),l=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const Vx={decay:Ji,inertia:Ji,tween:hr,keyframes:hr,spring:ba};function Xh(t){typeof t.type=="string"&&(t.type=Vx[t.type])}class kl{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const zx=t=>t/100;class Sl extends kl{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:s}=this.options;s&&s.updatedAt!==jt.now()&&this.tick(jt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Xh(e);const{type:s=hr,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=s||hr;c!==hr&&typeof l[0]!="number"&&(this.mixKeyframes=Or(zx,Gh(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=wl(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:p,type:g,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,S=r;if(h){const C=Math.min(this.currentTime,a)/l;let P=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(O=1-O,p&&(O-=p/l)):m==="mirror"&&(S=o)),j=hs(0,1,O)*l}const w=v?{done:!1,value:u[0]}:S.next(j);i&&(w.value=i(w.value));let{done:_}=w;!v&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return N&&g!==Ji&&(w.value=Nl(u,this.options,b,this.speed)),x&&x(w.value),N&&this.finish(),w}then(e,s){return this.finished.then(e,s)}get duration(){return Xt(this.calculatedDuration)}get time(){return Xt(this.currentTime)}set time(e){var s;e=Jt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(jt.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Xt(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:e=kx,startTime:s}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function Ux(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const en=t=>t*180/Math.PI,Xi=t=>{const e=en(Math.atan2(t[1],t[0]));return Zi(e)},Bx={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Xi,rotateZ:Xi,skewX:t=>en(Math.atan(t[1])),skewY:t=>en(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Zi=t=>(t=t%360,t<0&&(t+=360),t),bc=Xi,jc=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),_c=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Hx={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jc,scaleY:_c,scale:t=>(jc(t)+_c(t))/2,rotateX:t=>Zi(en(Math.atan2(t[6],t[5]))),rotateY:t=>Zi(en(Math.atan2(-t[2],t[0]))),rotateZ:bc,rotate:bc,skewX:t=>en(Math.atan(t[4])),skewY:t=>en(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Qi(t){return t.includes("scale")?1:0}function eo(t,e){if(!t||t==="none")return Qi(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=Hx,a=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Bx,a=l}if(!a)return Qi(e);const i=r[e],o=a[1].split(",").map(Wx);return typeof i=="function"?i(o):o[i]}const qx=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return eo(s,e)};function Wx(t){return parseFloat(t.trim())}const Bn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hn=new Set(Bn),wc=t=>t===Un||t===pe,Gx=new Set(["x","y","z"]),Kx=Bn.filter(t=>!Gx.has(t));function Yx(t){const e=[];return Kx.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const sn={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>eo(e,"x"),y:(t,{transform:e})=>eo(e,"y")};sn.translateX=sn.x;sn.translateY=sn.y;const nn=new Set;let to=!1,so=!1,no=!1;function Zh(){if(so){const t=Array.from(nn).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=Yx(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}so=!1,to=!1,nn.forEach(t=>t.complete(no)),nn.clear()}function Qh(){nn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(so=!0)})}function Jx(){no=!0,Qh(),Zh(),no=!1}class Cl{constructor(e,s,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(nn.add(this),to||(to=!0,Ie.read(Qh),Ie.resolveKeyframes(Zh))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const i=a==null?void 0:a.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&s){const l=r.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}Ux(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),nn.delete(this)}cancel(){this.state==="scheduled"&&(nn.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Xx=t=>t.startsWith("--");function Zx(t,e,s){Xx(e)?t.style.setProperty(e,s):t.style[e]=s}const Qx=pl(()=>window.ScrollTimeline!==void 0),ev={};function tv(t,e){const s=pl(t);return()=>ev[e]??s()}const em=tv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tr=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,Nc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tr([0,.65,.55,1]),circOut:tr([.55,0,1,.45]),backIn:tr([.31,.01,.66,-.59]),backOut:tr([.33,1.53,.69,.99])};function tm(t,e){if(t)return typeof t=="function"?em()?Kh(t,e):"ease-out":Lh(t)?tr(t):Array.isArray(t)?t.map(s=>tm(s,e)||Nc.easeOut):Nc[t]}function sv(t,e,s,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[e]:s};c&&(u.offset=c);const h=tm(l,a);Array.isArray(h)&&(u.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(u,m)}function sm(t){return typeof t=="function"&&"applyToOptions"in t}function nv({type:t,...e}){return sm(t)&&em()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class rv extends kl{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,ml(typeof e.type!="string");const d=nv(e);this.animation=sv(s,r,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Nl(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):Zx(s,r,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,r;const e=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Xt(Number(e))}get time(){return Xt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Jt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Qx()?(this.animation.timeline=e,Rt):s(this)}}const nm={anticipate:Ih,backInOut:Rh,circInOut:Dh};function av(t){return t in nm}function iv(t){typeof t.ease=="string"&&av(t.ease)&&(t.ease=nm[t.ease])}const kc=10;class ov extends rv{constructor(e){iv(e),Xh(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const l=new Sl({...o,autoplay:!1}),c=Jt(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-kc).value,l.sample(c).value,kc),l.stop()}}const Sc=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ms.test(t)||t==="0")&&!t.startsWith("url("));function lv(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function cv(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Sc(a,e),l=Sc(i,e);return!o||!l?!1:lv(t)||(s==="spring"||sm(s))&&r}function El(t){return Sh(t)&&"offsetHeight"in t}const dv=new Set(["opacity","clipPath","filter","transform"]),uv=pl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hv(t){var d;const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:i,type:o}=t;if(!El((d=e==null?void 0:e.owner)==null?void 0:d.current))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return uv()&&s&&dv.has(s)&&(s!=="transform"||!c)&&!l&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const mv=40;class pv extends kl{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){var g;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=jt.now();const m={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},p=(u==null?void 0:u.KeyframeResolver)||Cl;this.keyframeResolver=new p(l,(x,b,y)=>this.onKeyframesResolved(x,b,m,!y),c,d,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=jt.now(),cv(e,i,o,l)||((ms.instantAnimations||!c)&&(u==null||u(Nl(e,r,s))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>mv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},p=!d&&hv(m)?new ov({...m,element:m.motionValue.owner.current}):new Sl(m);p.finished.then(()=>this.notifyFinished()).catch(Rt),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Jx()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const fv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gv(t){const e=fv.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function rm(t,e,s=1){const[r,a]=gv(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return kh(o)?parseFloat(o):o}return yl(a)?rm(a,e,s+1):a}function Tl(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const am=new Set(["width","height","top","left","right","bottom",...Bn]),xv={test:t=>t==="auto",parse:t=>t},im=t=>e=>e.test(t),om=[Un,pe,Zt,Ns,cx,lx,xv],Cc=t=>om.find(im(t));function vv(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ch(t):!0}const yv=new Set(["brightness","contrast","saturate","opacity"]);function bv(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(bl)||[];if(!r)return t;const a=s.replace(r,"");let i=yv.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+a+")"}const jv=/\b([a-z-]*)\(.*?\)/gu,ro={...Ms,getAnimatableNone:t=>{const e=t.match(jv);return e?e.map(bv).join(" "):t}},Ec={...Un,transform:Math.round},_v={rotate:Ns,rotateX:Ns,rotateY:Ns,rotateZ:Ns,scale:Wr,scaleX:Wr,scaleY:Wr,scaleZ:Wr,skew:Ns,skewX:Ns,skewY:Ns,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:wr,originX:fc,originY:fc,originZ:pe},Ml={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,..._v,zIndex:Ec,fillOpacity:wr,strokeOpacity:wr,numOctaves:Ec},wv={...Ml,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:ro,WebkitFilter:ro},lm=t=>wv[t];function cm(t,e){let s=lm(t);return s!==ro&&(s=Ms),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Nv=new Set(["auto","none","0"]);function kv(t,e,s){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!Nv.has(i)&&Nr(i).values.length&&(a=t[r]),r++}if(a&&s)for(const i of e)t[i]=cm(s,a)}class Sv extends Cl{constructor(e,s,r,a,i){super(e,s,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),yl(d))){const u=rm(d,s.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!am.has(r)||e.length!==2)return;const[a,i]=e,o=Cc(a),l=Cc(i);if(o!==l)if(wc(o)&&wc(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else sn[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||vv(e[a]))&&r.push(a);r.length&&kv(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sn[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=sn[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function Cv(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=(s==null?void 0:s[t])??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const dm=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Tc=30,Ev=t=>!isNaN(parseFloat(t)),mr={current:void 0};class Tv{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var o,l;const i=jt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();a&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=jt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ev(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new fl);const r=this.events[e].add(s);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return mr.current&&mr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=jt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Tc)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Tc);return Eh(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rn(t,e){return new Tv(t,e)}const{schedule:Al}=$h(queueMicrotask,!1),Lt={x:!1,y:!1};function um(){return Lt.x||Lt.y}function Mv(t){return t==="x"||t==="y"?Lt[t]?null:(Lt[t]=!0,()=>{Lt[t]=!1}):Lt.x||Lt.y?null:(Lt.x=Lt.y=!0,()=>{Lt.x=Lt.y=!1})}function hm(t,e){const s=Cv(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function Mc(t){return!(t.pointerType==="touch"||um())}function Av(t,e,s={}){const[r,a,i]=hm(t,s),o=l=>{if(!Mc(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const u=h=>{Mc(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const mm=(t,e)=>e?t===e?!0:mm(t,e.parentElement):!1,Pl=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Pv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rv(t){return Pv.has(t.tagName)||t.tabIndex!==-1}const da=new WeakSet;function Ac(t){return e=>{e.key==="Enter"&&t(e)}}function vi(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Iv=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=Ac(()=>{if(da.has(s))return;vi(s,"down");const a=Ac(()=>{vi(s,"up")}),i=()=>vi(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function Pc(t){return Pl(t)&&!um()}function Fv(t,e,s={}){const[r,a,i]=hm(t,s),o=l=>{const c=l.currentTarget;if(!Pc(l))return;da.add(c);const d=e(c,l),u=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),da.has(c)&&da.delete(c),Pc(p)&&typeof d=="function"&&d(p,{success:g})},h=p=>{u(p,c===window||c===document||s.useGlobalTarget||mm(c,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),El(l)&&(l.addEventListener("focus",d=>Iv(d,a)),!Rv(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function pm(t){return Sh(t)&&"ownerSVGElement"in t}function Dv(t){return pm(t)&&t.tagName==="svg"}function Ov(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],a=t[1+s],i=t[2+s],o=t[3+s],l=Jh(a,i,o);return e?l(r):l}const st=t=>!!(t&&t.getVelocity),Lv=[...om,Be,Ms],$v=t=>Lv.find(im(t)),Ba=f.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Vv extends f.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,a=El(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function zv({children:t,isPresent:e,anchorX:s}){const r=f.useId(),a=f.useRef(null),i=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=f.useContext(Ba);return f.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:u,right:h}=i.current;if(e||!a.current||!l||!c)return;const m=s==="left"?`left: ${u}`:`right: ${h}`;a.current.dataset.motionPopId=r;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${m}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.contains(p)&&document.head.removeChild(p)}},[e]),n.jsx(Vv,{isPresent:e,childRef:a,sizeRef:i,children:f.cloneElement(t,{ref:a})})}const Uv=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l})=>{const c=mn(Bv),d=f.useId();let u=!0,h=f.useMemo(()=>(u=!1,{id:d,initial:e,isPresent:s,custom:a,onExitComplete:m=>{c.set(m,!0);for(const p of c.values())if(!p)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[s,c,r]);return i&&u&&(h={...h}),f.useMemo(()=>{c.forEach((m,p)=>c.set(p,!1))},[s]),f.useEffect(()=>{!s&&!c.size&&r&&r()},[s]),o==="popLayout"&&(t=n.jsx(zv,{isPresent:s,anchorX:l,children:t})),n.jsx(Ua.Provider,{value:h,children:t})};function Bv(){return new Map}function fm(t=!0){const e=f.useContext(Ua);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,i=f.useId();f.useEffect(()=>{if(t)return a(i)},[t]);const o=f.useCallback(()=>t&&r&&r(i),[i,r,t]);return!s&&r?[!1,o]:[!0]}const Gr=t=>t.key||"";function Rc(t){const e=[];return f.Children.forEach(t,s=>{f.isValidElement(s)&&e.push(s)}),e}const Te=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,d]=fm(o),u=f.useMemo(()=>Rc(t),[t]),h=o&&!c?[]:u.map(Gr),m=f.useRef(!0),p=f.useRef(u),g=mn(()=>new Map),[x,b]=f.useState(u),[y,v]=f.useState(u);dl(()=>{m.current=!1,p.current=u;for(let w=0;w<y.length;w++){const _=Gr(y[w]);h.includes(_)?g.delete(_):g.get(_)!==!0&&g.set(_,!1)}},[y,h.length,h.join("-")]);const j=[];if(u!==x){let w=[...u];for(let _=0;_<y.length;_++){const N=y[_],C=Gr(N);h.includes(C)||(w.splice(_,0,N),j.push(N))}return i==="wait"&&j.length&&(w=j),v(Rc(w)),b(u),null}const{forceRender:S}=f.useContext(ll);return n.jsx(n.Fragment,{children:y.map(w=>{const _=Gr(w),N=o&&!c?!1:u===y||h.includes(_),C=()=>{if(g.has(_))g.set(_,!0);else return;let P=!0;g.forEach(O=>{O||(P=!1)}),P&&(S==null||S(),v(p.current),o&&(d==null||d()),r&&r())};return n.jsx(Uv,{isPresent:N,initial:!m.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,onExitComplete:N?void 0:C,anchorX:l,children:w},_)})})},gm=f.createContext({strict:!1}),Ic={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fn={};for(const t in Ic)Fn[t]={isEnabled:e=>Ic[t].some(s=>!!e[s])};function Hv(t){for(const e in t)Fn[e]={...Fn[e],...t[e]}}const qv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ja(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qv.has(t)}let xm=t=>!ja(t);function Wv(t){typeof t=="function"&&(xm=e=>e.startsWith("on")?!ja(e):t(e))}try{Wv(require("@emotion/is-prop-valid").default)}catch{}function Gv(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(xm(a)||s===!0&&ja(a)||!e&&!ja(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function Kv(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,a)=>a==="create"?t:(e.has(a)||e.set(a,t(a)),e.get(a))})}const Ha=f.createContext({});function qa(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function kr(t){return typeof t=="string"||Array.isArray(t)}const Rl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Il=["initial",...Rl];function Wa(t){return qa(t.animate)||Il.some(e=>kr(t[e]))}function vm(t){return!!(Wa(t)||t.variants)}function Yv(t,e){if(Wa(t)){const{initial:s,animate:r}=t;return{initial:s===!1||kr(s)?s:void 0,animate:kr(r)?r:void 0}}return t.inherit!==!1?e:{}}function Jv(t){const{initial:e,animate:s}=Yv(t,f.useContext(Ha));return f.useMemo(()=>({initial:e,animate:s}),[Fc(e),Fc(s)])}function Fc(t){return Array.isArray(t)?t.join(" "):t}const Xv=Symbol.for("motionComponentSymbol");function Nn(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Zv(t,e,s){return f.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):Nn(s)&&(s.current=r))},[e])}const Fl=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qv="framerAppearId",ym="data-"+Fl(Qv),bm=f.createContext({});function ey(t,e,s,r,a){var x,b;const{visualElement:i}=f.useContext(Ha),o=f.useContext(gm),l=f.useContext(Ua),c=f.useContext(Ba).reducedMotion,d=f.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=f.useContext(bm);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&ty(d.current,s,a,h);const m=f.useRef(!1);f.useInsertionEffect(()=>{u&&m.current&&u.update(s,l)});const p=s[ym],g=f.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return dl(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),Al.render(u.render),g.current&&u.animationState&&u.animationState.animateChanges())}),f.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),g.current=!1))}),u}function ty(t,e,s,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:jm(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Nn(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function jm(t){if(t)return t.options.allowProjection!==!1?t.projection:jm(t.parent)}function sy({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:a}){t&&Hv(t);function i(l,c){let d;const u={...f.useContext(Ba),...l,layoutId:ny(l)},{isStatic:h}=u,m=Jv(l),p=r(l,h);if(!h&&cl){ry();const g=ay(u);d=g.MeasureLayout,m.visualElement=ey(a,p,u,e,g.ProjectionNode)}return n.jsxs(Ha.Provider,{value:m,children:[d&&m.visualElement?n.jsx(d,{visualElement:m.visualElement,...u}):null,s(a,l,Zv(p,m.visualElement,c),p,h,m.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const o=f.forwardRef(i);return o[Xv]=a,o}function ny({layoutId:t}){const e=f.useContext(ll).id;return e&&t!==void 0?e+"-"+t:t}function ry(t,e){f.useContext(gm).strict}function ay(t){const{drag:e,layout:s}=Fn;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Sr={};function iy(t){for(const e in t)Sr[e]=t[e],vl(e)&&(Sr[e].isCSSVariable=!0)}function _m(t,{layout:e,layoutId:s}){return Hn.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Sr[t]||t==="opacity")}const oy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ly=Bn.length;function cy(t,e,s){let r="",a=!0;for(let i=0;i<ly;i++){const o=Bn[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=dm(l,Ml[o]);if(!c){a=!1;const u=oy[o]||o;r+=`${u}(${d}) `}s&&(e[o]=d)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function Dl(t,e,s){const{style:r,vars:a,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Hn.has(c)){o=!0;continue}else if(vl(c)){a[c]=d;continue}else{const u=dm(d,Ml[c]);c.startsWith("origin")?(l=!0,i[c]=u):r[c]=u}}if(e.transform||(o||s?r.transform=cy(e,t.transform,s):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const Ol=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wm(t,e,s){for(const r in e)!st(e[r])&&!_m(r,s)&&(t[r]=e[r])}function dy({transformTemplate:t},e){return f.useMemo(()=>{const s=Ol();return Dl(s,e,t),Object.assign({},s.vars,s.style)},[e])}function uy(t,e){const s=t.style||{},r={};return wm(r,s,t),Object.assign(r,dy(t,e)),r}function hy(t,e){const s={},r=uy(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const my={offset:"stroke-dashoffset",array:"stroke-dasharray"},py={offset:"strokeDashoffset",array:"strokeDasharray"};function fy(t,e,s=1,r=0,a=!0){t.pathLength=1;const i=a?my:py;t[i.offset]=pe.transform(-r);const o=pe.transform(e),l=pe.transform(s);t[i.array]=`${o} ${l}`}function Nm(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(Dl(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),a!==void 0&&fy(h,a,i,o,!1)}const km=()=>({...Ol(),attrs:{}}),Sm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gy(t,e,s,r){const a=f.useMemo(()=>{const i=km();return Nm(i,e,Sm(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};wm(i,t.style,t),a.style={...i,...a.style}}return a}const xy=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ll(t){return typeof t!="string"||t.includes("-")?!1:!!(xy.indexOf(t)>-1||/[A-Z]/u.test(t))}function vy(t=!1){return(s,r,a,{latestValues:i},o)=>{const c=(Ll(s)?gy:hy)(r,i,o,s),d=Gv(r,typeof s=="string",t),u=s!==f.Fragment?{...d,...c,ref:a}:{},{children:h}=r,m=f.useMemo(()=>st(h)?h.get():h,[h]);return f.createElement(s,{...u,children:m})}}function Dc(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function $l(t,e,s,r){if(typeof e=="function"){const[a,i]=Dc(r);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=Dc(r);e=e(s!==void 0?s:t.custom,a,i)}return e}function ua(t){return st(t)?t.get():t}function yy({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:by(s,r,a,t),renderState:e()}}const Cm=t=>(e,s)=>{const r=f.useContext(Ha),a=f.useContext(Ua),i=()=>yy(t,e,r,a);return s?i():mn(i)};function by(t,e,s,r){const a={},i=r(t,{});for(const m in i)a[m]=ua(i[m]);let{initial:o,animate:l}=t;const c=Wa(t),d=vm(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!qa(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const g=$l(t,m[p]);if(g){const{transitionEnd:x,transition:b,...y}=g;for(const v in y){let j=y[v];if(Array.isArray(j)){const S=u?j.length-1:0;j=j[S]}j!==null&&(a[v]=j)}for(const v in x)a[v]=x[v]}}}return a}function Vl(t,e,s){var i;const{style:r}=t,a={};for(const o in r)(st(r[o])||e.style&&st(e.style[o])||_m(o,t)||((i=s==null?void 0:s.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const jy={useVisualState:Cm({scrapeMotionValuesFromProps:Vl,createRenderState:Ol})};function Em(t,e,s){const r=Vl(t,e,s);for(const a in t)if(st(t[a])||st(e[a])){const i=Bn.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}const _y={useVisualState:Cm({scrapeMotionValuesFromProps:Em,createRenderState:km})};function wy(t,e){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...Ll(r)?_y:jy,preloadedFeatures:t,useRender:vy(a),createVisualElement:e,Component:r};return sy(o)}}function Cr(t,e,s){const r=t.getProps();return $l(r,e,s!==void 0?s:r.custom,t)}const ao=t=>Array.isArray(t);function Ny(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,rn(s))}function ky(t){return ao(t)?t[t.length-1]||0:t}function Sy(t,e){const s=Cr(t,e);let{transitionEnd:r={},transition:a={},...i}=s||{};i={...i,...r};for(const o in i){const l=ky(i[o]);Ny(t,o,l)}}function Cy(t){return!!(st(t)&&t.add)}function io(t,e){const s=t.getValue("willChange");if(Cy(s))return s.add(e);if(!s&&ms.WillChange){const r=new ms.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Tm(t){return t.props[ym]}const Ey=t=>t!==null;function Ty(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(Ey),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const My={type:"spring",stiffness:500,damping:25,restSpeed:10},Ay=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Py={type:"keyframes",duration:.8},Ry={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Iy=(t,{keyframes:e})=>e.length>2?Py:Hn.has(t)?t.startsWith("scale")?Ay(e[1]):My:Ry;function Fy({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const zl=(t,e,s,r={},a,i)=>o=>{const l=Tl(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Jt(c);const u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:a};Fy(l)||Object.assign(u,Iy(t,u)),u.duration&&(u.duration=Jt(u.duration)),u.repeatDelay&&(u.repeatDelay=Jt(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),(ms.instantAnimations||ms.skipAnimations)&&(h=!0,u.duration=0,u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const m=Ty(u.keyframes,l);if(m!==void 0){Ie.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new Sl(u):new pv(u)};function Dy({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function Mm(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(i=r);const c=[],d=a&&t.animationState&&t.animationState.getState()[a];for(const u in l){const h=t.getValue(u,t.latestValues[u]??null),m=l[u];if(m===void 0||d&&Dy(d,u))continue;const p={delay:s,...Tl(i||{},u)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const y=Tm(t);if(y){const v=window.MotionHandoffAnimation(y,u,Ie);v!==null&&(p.startTime=v,x=!0)}}io(t,u),h.start(zl(u,h,m,t.shouldReduceMotion&&am.has(u)?{type:!1}:p,t,x));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Ie.update(()=>{o&&Sy(t,o)})}),c}function oo(t,e,s={}){var c;const r=Cr(t,e,s.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(Mm(t,r,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=a;return Oy(t,e,u+d,h,m,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,u]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>u())}else return Promise.all([i(),o(s.delay)])}function Oy(t,e,s=0,r=0,a=1,i){const o=[],l=(t.variantChildren.size-1)*r,c=a===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(t.variantChildren).sort(Ly).forEach((d,u)=>{d.notify("AnimationStart",e),o.push(oo(d,e,{...i,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function Ly(t,e){return t.sortNodePosition(e)}function $y(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(i=>oo(t,i,s));r=Promise.all(a)}else if(typeof e=="string")r=oo(t,e,s);else{const a=typeof e=="function"?Cr(t,e,s.custom):e;r=Promise.all(Mm(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Am(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const Vy=Il.length;function Pm(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?Pm(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Vy;s++){const r=Il[s],a=t.props[r];(kr(a)||a===!1)&&(e[r]=a)}return e}const zy=[...Rl].reverse(),Uy=Rl.length;function By(t){return e=>Promise.all(e.map(({animation:s,options:r})=>$y(t,s,r)))}function Hy(t){let e=By(t),s=Oc(),r=!0;const a=c=>(d,u)=>{var m;const h=Cr(t,u,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:p,transitionEnd:g,...x}=h;d={...d,...x,...g}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,u=Pm(t.parent)||{},h=[],m=new Set;let p={},g=1/0;for(let b=0;b<Uy;b++){const y=zy[b],v=s[y],j=d[y]!==void 0?d[y]:u[y],S=kr(j),w=y===c?v.isActive:null;w===!1&&(g=b);let _=j===u[y]&&j!==d[y]&&S;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),v.protectedKeys={...p},!v.isActive&&w===null||!j&&!v.prevProp||qa(j)||typeof j=="boolean")continue;const N=qy(v.prevProp,j);let C=N||y===c&&v.isActive&&!_&&S||b>g&&S,P=!1;const O=Array.isArray(j)?j:[j];let B=O.reduce(a(y),{});w===!1&&(B={});const{prevResolvedValues:U={}}=v,G={...U,...B},R=A=>{C=!0,m.has(A)&&(P=!0,m.delete(A)),v.needsAnimating[A]=!0;const F=t.getValue(A);F&&(F.liveStyle=!1)};for(const A in G){const F=B[A],ee=U[A];if(p.hasOwnProperty(A))continue;let D=!1;ao(F)&&ao(ee)?D=!Am(F,ee):D=F!==ee,D?F!=null?R(A):m.add(A):F!==void 0&&m.has(A)?R(A):v.protectedKeys[A]=!0}v.prevProp=j,v.prevResolvedValues=B,v.isActive&&(p={...p,...B}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(_&&N)||P)&&h.push(...O.map(A=>({animation:A,options:{type:y}})))}if(m.size){const b={};if(typeof d.initial!="boolean"){const y=Cr(t,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(b.transition=y.transition)}m.forEach(y=>{const v=t.getBaseTarget(y),j=t.getValue(y);j&&(j.liveStyle=!0),b[y]=v??null}),h.push({animation:b})}let x=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function l(c,d){var h;if(s[c].isActive===d)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(c,d)}),s[c].isActive=d;const u=o(c);for(const m in s)s[m].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=Oc(),r=!0}}}function qy(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Am(e,t):!1}function zs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Oc(){return{animate:zs(!0),whileInView:zs(),whileHover:zs(),whileTap:zs(),whileDrag:zs(),whileFocus:zs(),exit:zs()}}class Fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Wy extends Fs{constructor(e){super(e),e.animationState||(e.animationState=Hy(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qa(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Gy=0;class Ky extends Fs{constructor(){super(...arguments),this.id=Gy++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Yy={animation:{Feature:Wy},exit:{Feature:Ky}};function Er(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Vr(t){return{point:{x:t.pageX,y:t.pageY}}}const Jy=t=>e=>Pl(e)&&t(e,Vr(e));function pr(t,e,s,r){return Er(t,e,Jy(s),r)}function Rm({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function Xy({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Zy(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}const Im=1e-4,Qy=1-Im,e0=1+Im,Fm=.01,t0=0-Fm,s0=0+Fm;function ft(t){return t.max-t.min}function n0(t,e,s){return Math.abs(t-e)<=s}function Lc(t,e,s,r=.5){t.origin=r,t.originPoint=Re(e.min,e.max,t.origin),t.scale=ft(s)/ft(e),t.translate=Re(s.min,s.max,t.origin)-t.originPoint,(t.scale>=Qy&&t.scale<=e0||isNaN(t.scale))&&(t.scale=1),(t.translate>=t0&&t.translate<=s0||isNaN(t.translate))&&(t.translate=0)}function fr(t,e,s,r){Lc(t.x,e.x,s.x,r?r.originX:void 0),Lc(t.y,e.y,s.y,r?r.originY:void 0)}function $c(t,e,s){t.min=s.min+e.min,t.max=t.min+ft(e)}function r0(t,e,s){$c(t.x,e.x,s.x),$c(t.y,e.y,s.y)}function Vc(t,e,s){t.min=e.min-s.min,t.max=t.min+ft(e)}function gr(t,e,s){Vc(t.x,e.x,s.x),Vc(t.y,e.y,s.y)}const zc=()=>({translate:0,scale:1,origin:0,originPoint:0}),kn=()=>({x:zc(),y:zc()}),Uc=()=>({min:0,max:0}),ze=()=>({x:Uc(),y:Uc()});function Pt(t){return[t("x"),t("y")]}function yi(t){return t===void 0||t===1}function lo({scale:t,scaleX:e,scaleY:s}){return!yi(t)||!yi(e)||!yi(s)}function Ws(t){return lo(t)||Dm(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Dm(t){return Bc(t.x)||Bc(t.y)}function Bc(t){return t&&t!=="0%"}function _a(t,e,s){const r=t-s,a=e*r;return s+a}function Hc(t,e,s,r,a){return a!==void 0&&(t=_a(t,a,r)),_a(t,s,r)+e}function co(t,e=0,s=1,r,a){t.min=Hc(t.min,e,s,r,a),t.max=Hc(t.max,e,s,r,a)}function Om(t,{x:e,y:s}){co(t.x,e.translate,e.scale,e.originPoint),co(t.y,s.translate,s.scale,s.originPoint)}const qc=.999999999999,Wc=1.0000000000001;function a0(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Cn(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Om(t,o)),r&&Ws(i.latestValues)&&Cn(t,i.latestValues))}e.x<Wc&&e.x>qc&&(e.x=1),e.y<Wc&&e.y>qc&&(e.y=1)}function Sn(t,e){t.min=t.min+e,t.max=t.max+e}function Gc(t,e,s,r,a=.5){const i=Re(t.min,t.max,a);co(t,e,s,i,r)}function Cn(t,e){Gc(t.x,e.x,e.scaleX,e.scale,e.originX),Gc(t.y,e.y,e.scaleY,e.scale,e.originY)}function Lm(t,e){return Rm(Zy(t.getBoundingClientRect(),e))}function i0(t,e,s){const r=Lm(t,s),{scroll:a}=e;return a&&(Sn(r.x,a.offset.x),Sn(r.y,a.offset.y)),r}const $m=({current:t})=>t?t.ownerDocument.defaultView:null,Kc=(t,e)=>Math.abs(t-e);function o0(t,e){const s=Kc(t.x,e.x),r=Kc(t.y,e.y);return Math.sqrt(s**2+r**2)}class Vm{constructor(e,s,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ji(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=o0(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:g}=h,{timestamp:x}=et;this.history.push({...g,timestamp:x});const{onStart:b,onMove:y}=this.handlers;m||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=bi(m,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=ji(h.type==="pointercancel"?this.lastMoveEventInfo:bi(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),g&&g(h,b)},!Pl(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.contextWindow=a||window;const o=Vr(e),l=bi(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=et;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(e,ji(l,this.history)),this.removeListeners=Or(pr(this.contextWindow,"pointermove",this.handlePointerMove),pr(this.contextWindow,"pointerup",this.handlePointerUp),pr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ps(this.updatePoint)}}function bi(t,e){return e?{point:e(t.point)}:t}function Yc(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ji({point:t},e){return{point:t,delta:Yc(t,zm(e)),offset:Yc(t,l0(e)),velocity:c0(e,.1)}}function l0(t){return t[0]}function zm(t){return t[t.length-1]}function c0(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=zm(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>Jt(e)));)s--;if(!r)return{x:0,y:0};const i=Xt(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function d0(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?Re(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?Re(s,t,r.max):Math.min(t,s)),t}function Jc(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function u0(t,{top:e,left:s,bottom:r,right:a}){return{x:Jc(t.x,s,a),y:Jc(t.y,e,r)}}function Xc(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function h0(t,e){return{x:Xc(t.x,e.x),y:Xc(t.y,e.y)}}function m0(t,e){let s=.5;const r=ft(t),a=ft(e);return a>r?s=_r(e.min,e.max-r,t.min):r>a&&(s=_r(t.min,t.max-a,e.min)),hs(0,1,s)}function p0(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const uo=.35;function f0(t=uo){return t===!1?t=0:t===!0&&(t=uo),{x:Zc(t,"left","right"),y:Zc(t,"top","bottom")}}function Zc(t,e,s){return{min:Qc(t,e),max:Qc(t,s)}}function Qc(t,e){return typeof t=="number"?t:t[e]||0}const g0=new WeakMap;class x0{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ze(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Vr(u).point)},i=(u,h)=>{const{drag:m,dragPropagation:p,onDragStart:g}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Mv(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pt(b=>{let y=this.getAxisMotionValue(b).get()||0;if(Zt.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const j=v.layout.layoutBox[b];j&&(y=ft(j)*(parseFloat(y)/100))}}this.originPoint[b]=y}),g&&Ie.postRender(()=>g(u,h)),io(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:g,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=v0(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),x&&x(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Pt(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Vm(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:$m(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ie.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!Kr(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=d0(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;e&&Nn(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=u0(r.layoutBox,e):this.constraints=!1,this.elastic=f0(s),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=p0(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Nn(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=i0(r,a.root,this.visualElement.getTransformPagePoint());let o=h0(a.layout.layoutBox,i);if(s){const l=s(Xy(o));this.hasMutatedConstraints=!!l,l&&(o=Rm(l))}return o}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Pt(u=>{if(!Kr(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,p=a?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return io(this.visualElement,e),r.start(zl(e,r,0,s,this.visualElement,!1))}stopAnimation(){Pt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pt(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pt(s=>{const{drag:r}=this.getProps();if(!Kr(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(e[s]-Re(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Nn(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Pt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=m0({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pt(o=>{if(!Kr(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Re(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;g0.set(this.visualElement,this);const e=this.visualElement.current,s=pr(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Nn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ie.read(r);const o=Er(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Pt(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=uo,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Kr(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function v0(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class y0 extends Fs{constructor(e){super(e),this.removeGroupControls=Rt,this.removeListeners=Rt,this.controls=new x0(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ed=t=>(e,s)=>{t&&Ie.postRender(()=>t(e,s))};class b0 extends Fs{constructor(){super(...arguments),this.removePointerDownListener=Rt}onPointerDown(e){this.session=new Vm(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$m(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:ed(e),onStart:ed(s),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Ie.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=pr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ha={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function td(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Kn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const s=td(t,e.target.x),r=td(t,e.target.y);return`${s}% ${r}%`}},j0={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=Ms.parse(t);if(a.length>5)return r;const i=Ms.createTransformer(t),o=typeof a[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const d=Re(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class _0 extends f.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=e;iy(w0),i&&(s.group&&s.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ha.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ie.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Al.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Um(t){const[e,s]=fm(),r=f.useContext(ll);return n.jsx(_0,{...t,layoutGroup:r,switchLayoutGroup:f.useContext(bm),isPresent:e,safeToRemove:s})}const w0={borderRadius:{...Kn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kn,borderTopRightRadius:Kn,borderBottomLeftRadius:Kn,borderBottomRightRadius:Kn,boxShadow:j0};function N0(t,e,s){const r=st(t)?t:rn(t);return r.start(zl("",r,e,s)),r.animation}const k0=(t,e)=>t.depth-e.depth;class S0{constructor(){this.children=[],this.isDirty=!1}add(e){ul(this.children,e),this.isDirty=!0}remove(e){hl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(k0),this.isDirty=!1,this.children.forEach(e)}}function C0(t,e){const s=jt.now(),r=({timestamp:a})=>{const i=a-s;i>=e&&(ps(r),t(i-e))};return Ie.setup(r,!0),()=>ps(r)}const Bm=["TopLeft","TopRight","BottomLeft","BottomRight"],E0=Bm.length,sd=t=>typeof t=="string"?parseFloat(t):t,nd=t=>typeof t=="number"||pe.test(t);function T0(t,e,s,r,a,i){a?(t.opacity=Re(0,s.opacity??1,M0(r)),t.opacityExit=Re(e.opacity??1,0,A0(r))):i&&(t.opacity=Re(e.opacity??1,s.opacity??1,r));for(let o=0;o<E0;o++){const l=`border${Bm[o]}Radius`;let c=rd(e,l),d=rd(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||nd(c)===nd(d)?(t[l]=Math.max(Re(sd(c),sd(d),r),0),(Zt.test(d)||Zt.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=Re(e.rotate||0,s.rotate||0,r))}function rd(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const M0=Hm(0,.5,Fh),A0=Hm(.5,.95,Rt);function Hm(t,e,s){return r=>r<t?0:r>e?1:s(_r(t,e,r))}function ad(t,e){t.min=e.min,t.max=e.max}function At(t,e){ad(t.x,e.x),ad(t.y,e.y)}function id(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function od(t,e,s,r,a){return t-=e,t=_a(t,1/s,r),a!==void 0&&(t=_a(t,1/a,r)),t}function P0(t,e=0,s=1,r=.5,a,i=t,o=t){if(Zt.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Re(i.min,i.max,r);t===i&&(l-=e),t.min=od(t.min,e,s,l,a),t.max=od(t.max,e,s,l,a)}function ld(t,e,[s,r,a],i,o){P0(t,e[s],e[r],e[a],e.scale,i,o)}const R0=["x","scaleX","originX"],I0=["y","scaleY","originY"];function cd(t,e,s,r){ld(t.x,e,R0,s?s.x:void 0,r?r.x:void 0),ld(t.y,e,I0,s?s.y:void 0,r?r.y:void 0)}function dd(t){return t.translate===0&&t.scale===1}function qm(t){return dd(t.x)&&dd(t.y)}function ud(t,e){return t.min===e.min&&t.max===e.max}function F0(t,e){return ud(t.x,e.x)&&ud(t.y,e.y)}function hd(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Wm(t,e){return hd(t.x,e.x)&&hd(t.y,e.y)}function md(t){return ft(t.x)/ft(t.y)}function pd(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class D0{constructor(){this.members=[]}add(e){ul(this.members,e),e.scheduleRender()}remove(e){if(hl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O0(t,e,s){let r="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:p,skewY:g}=s;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const _i=["","X","Y","Z"],L0={visibility:"hidden"},$0=1e3;let V0=0;function wi(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Gm(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=Tm(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Ie,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Gm(r)}function Km({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=V0++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(B0),this.nodes.forEach(K0),this.nodes.forEach(Y0),this.nodes.forEach(H0)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new S0)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new fl),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=pm(o)&&!Dv(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=C0(h,250),ha.hasAnimatedSinceResize&&(ha.hasAnimatedSinceResize=!1,this.nodes.forEach(gd))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||e1,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!Wm(this.targetLayout,p),v=!h&&m;if(this.options.layoutRoot||this.resumeFrom||v||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Tl(g,"layout"),onPlay:x,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(u,v)}else h||gd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ps(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J0),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Gm(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fd);return}this.isUpdating||this.nodes.forEach(W0),this.isUpdating=!1,this.nodes.forEach(G0),this.nodes.forEach(z0),this.nodes.forEach(U0),this.clearAllSnapshots();const l=jt.now();et.delta=hs(0,1e3/60,l-et.timestamp),et.timestamp=l,et.isProcessing=!0,mi.update.process(et),mi.preRender.process(et),mi.render.process(et),et.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Al.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(q0),this.sharedNodes.forEach(X0)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ft(this.snapshot.measuredBox.x)&&!ft(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!qm(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Ws(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),t1(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return ze();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(s1))){const{scroll:u}=this.root;u&&(Sn(l.x,u.offset.x),Sn(l.y,u.offset.y))}return l}removeElementScroll(o){var c;const l=ze();if(At(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&At(l,o),Sn(l.x,h.offset.x),Sn(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=ze();At(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Cn(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ws(u.latestValues)&&Cn(c,u.latestValues)}return Ws(this.latestValues)&&Cn(c,this.latestValues),c}removeTransform(o){const l=ze();At(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ws(d.latestValues))continue;lo(d.latestValues)&&d.updateSnapshot();const u=ze(),h=d.measurePageBox();At(u,h),cd(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Ws(this.latestValues)&&cd(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==et.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=et.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ze(),this.relativeTargetOrigin=ze(),gr(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),At(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ze(),this.targetWithTransforms=ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r0(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):At(this.target,this.layout.layoutBox),Om(this.target,this.targetDelta)):At(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ze(),this.relativeTargetOrigin=ze(),gr(this.relativeTargetOrigin,this.target,p.target),At(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lo(this.parent.latestValues)||Dm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===et.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;At(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;a0(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ze());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(id(this.prevProjectionDelta.x,this.projectionDelta.x),id(this.prevProjectionDelta.y,this.projectionDelta.y)),fr(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!pd(this.projectionDelta.x,this.prevProjectionDelta.x)||!pd(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kn(),this.projectionDelta=kn(),this.projectionDeltaWithTransform=kn()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=kn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ze(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,x=p!==g,b=this.getStack(),y=!b||b.members.length<=1,v=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(Q0));this.animationProgress=0;let j;this.mixTargetDelta=S=>{const w=S/1e3;xd(h.x,o.x,w),xd(h.y,o.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gr(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z0(this.relativeTarget,this.relativeTargetOrigin,m,w),j&&F0(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=ze()),At(j,this.relativeTarget)),x&&(this.animationValues=u,T0(u,d,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(ps(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{ha.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rn(0)),this.currentAnimation=N0(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Ym(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ze();const h=ft(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=ft(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}At(l,c),Cn(l,u),fr(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new D0),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&wi("z",o,d,this.animationValues);for(let u=0;u<_i.length;u++)wi(`rotate${_i[u]}`,o,d,this.animationValues),wi(`skew${_i[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return L0;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=ua(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=ua(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ws(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const u=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=O0(this.projectionDeltaWithTransform,this.treeScale,u),c&&(l.transform=c(u,l.transform));const{x:h,y:m}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,d.animationValues?l.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:l.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in Sr){if(u[p]===void 0)continue;const{correct:g,applyTo:x,isCSSVariable:b}=Sr[p],y=l.transform==="none"?u[p]:g(u[p],d);if(x){const v=x.length;for(let j=0;j<v;j++)l[x[j]]=y}else b?this.options.visualElement.renderState.vars[p]=y:l[p]=y}return this.options.layoutId&&(l.pointerEvents=d===this?ua(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(fd),this.root.sharedNodes.clear()}}}function z0(t){t.updateLayout()}function U0(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Pt(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=ft(m);m.min=r[h].min,m.max=m.min+p}):Ym(i,e.layoutBox,r)&&Pt(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],p=ft(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const l=kn();fr(l,r,e.layoutBox);const c=kn();o?fr(c,t.applyTransform(a,!0),e.measuredBox):fr(c,r,e.layoutBox);const d=!qm(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const g=ze();gr(g,e.layoutBox,m.layoutBox);const x=ze();gr(x,r,p.layoutBox),Wm(g,x)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function B0(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function H0(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function q0(t){t.clearSnapshot()}function fd(t){t.clearMeasurements()}function W0(t){t.isLayoutDirty=!1}function G0(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gd(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function K0(t){t.resolveTargetDelta()}function Y0(t){t.calcProjection()}function J0(t){t.resetSkewAndRotation()}function X0(t){t.removeLeadSnapshot()}function xd(t,e,s){t.translate=Re(e.translate,0,s),t.scale=Re(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function vd(t,e,s,r){t.min=Re(e.min,s.min,r),t.max=Re(e.max,s.max,r)}function Z0(t,e,s,r){vd(t.x,e.x,s.x,r),vd(t.y,e.y,s.y,r)}function Q0(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const e1={duration:.45,ease:[.4,0,.1,1]},yd=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),bd=yd("applewebkit/")&&!yd("chrome/")?Math.round:Rt;function jd(t){t.min=bd(t.min),t.max=bd(t.max)}function t1(t){jd(t.x),jd(t.y)}function Ym(t,e,s){return t==="position"||t==="preserve-aspect"&&!n0(md(e),md(s),.2)}function s1(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const n1=Km({attachResizeListener:(t,e)=>Er(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ni={current:void 0},Jm=Km({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ni.current){const t=new n1({});t.mount(window),t.setOptions({layoutScroll:!0}),Ni.current=t}return Ni.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),r1={pan:{Feature:b0},drag:{Feature:y0,ProjectionNode:Jm,MeasureLayout:Um}};function _d(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=r[a];i&&Ie.postRender(()=>i(e,Vr(e)))}class a1 extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=Av(e,(s,r)=>(_d(this.node,r,"Start"),a=>_d(this.node,a,"End"))))}unmount(){}}class i1 extends Fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Or(Er(this.node.current,"focus",()=>this.onFocus()),Er(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wd(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=r[a];i&&Ie.postRender(()=>i(e,Vr(e)))}class o1 extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=Fv(e,(s,r)=>(wd(this.node,r,"Start"),(a,{success:i})=>wd(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ho=new WeakMap,ki=new WeakMap,l1=t=>{const e=ho.get(t.target);e&&e(t)},c1=t=>{t.forEach(l1)};function d1({root:t,...e}){const s=t||document;ki.has(s)||ki.set(s,{});const r=ki.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(c1,{root:t,...e})),r[a]}function u1(t,e,s){const r=d1(e);return ho.set(t,s),r.observe(t),()=>{ho.delete(t),r.unobserve(t)}}const h1={some:0,all:1};class m1 extends Fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:h1[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return u1(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(p1(e,s))&&this.startObserver()}unmount(){}}function p1({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const f1={inView:{Feature:m1},tap:{Feature:o1},focus:{Feature:i1},hover:{Feature:a1}},g1={layout:{ProjectionNode:Jm,MeasureLayout:Um}},mo={current:null},Xm={current:!1};function x1(){if(Xm.current=!0,!!cl)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>mo.current=t.matches;t.addListener(e),e()}else mo.current=!1}const v1=new WeakMap;function y1(t,e,s){for(const r in e){const a=e[r],i=s[r];if(st(a))t.addValue(r,a);else if(st(i))t.addValue(r,rn(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(r);t.addValue(r,rn(o!==void 0?o:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const Nd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class b1{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=jt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ie.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Wa(s),this.isVariantNode=vm(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in h){const p=h[m];c[m]!==void 0&&st(p)&&p.set(c[m],!1)}}mount(e){this.current=e,v1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),Xm.current||x1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mo.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ps(this.notifyUpdate),ps(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Hn.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fn){const s=Fn[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<Nd.length;r++){const a=Nd[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=y1(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=rn(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(kh(r)||Ch(r))?r=parseFloat(r):!$v(r)&&Ms.test(s)&&(r=cm(e,s)),this.setBaseTarget(e,st(r)?r.get():r)),st(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=$l(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!st(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new fl),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Zm extends b1{constructor(){super(...arguments),this.KeyframeResolver=Sv}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;st(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function Qm(t,{style:e,vars:s},r,a){Object.assign(t.style,e,a&&a.getProjectionStyles(r));for(const i in s)t.style.setProperty(i,s[i])}function j1(t){return window.getComputedStyle(t)}class _1 extends Zm{constructor(){super(...arguments),this.type="html",this.renderInstance=Qm}readValueFromInstance(e,s){var r;if(Hn.has(s))return(r=this.projection)!=null&&r.isProjecting?Qi(s):qx(e,s);{const a=j1(e),i=(vl(s)?a.getPropertyValue(s):a[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Lm(e,s)}build(e,s,r){Dl(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return Vl(e,s,r)}}const ep=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function w1(t,e,s,r){Qm(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(ep.has(a)?a:Fl(a),e.attrs[a])}class N1 extends Zm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ze}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Hn.has(s)){const r=lm(s);return r&&r.default||0}return s=ep.has(s)?s:Fl(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return Em(e,s,r)}build(e,s,r){Nm(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){w1(e,s,r,a)}mount(e){this.isSVGTag=Sm(e.tagName),super.mount(e)}}const k1=(t,e)=>Ll(t)?new N1(e):new _1(e,{allowProjection:t!==f.Fragment}),S1=wy({...Yy,...f1,...r1,...g1},k1),K=Kv(S1);function tp(t){const e=mn(()=>rn(t)),{isStatic:s}=f.useContext(Ba);if(s){const[,r]=f.useState(t);f.useEffect(()=>e.on("change",r),[])}return e}function sp(t,e){const s=tp(e()),r=()=>s.set(e());return r(),dl(()=>{const a=()=>Ie.preRender(r,!1,!0),i=t.map(o=>o.on("change",a));return()=>{i.forEach(o=>o()),ps(r)}}),s}function C1(t){mr.current=[],t();const e=sp(mr.current,t);return mr.current=void 0,e}function E1(t,e,s,r){if(typeof t=="function")return C1(t);const a=typeof e=="function"?e:Ov(e,s,r);return Array.isArray(t)?kd(t,a):kd([t],([i])=>a(i))}function kd(t,e){const s=mn(()=>[]);return sp(t,()=>{s.length=0;const r=t.length;for(let a=0;a<r;a++)s[a]=t[a].get();return e(s)})}const np=f.createContext(null);function T1(t,e,s,r){if(!r)return t;const a=t.findIndex(u=>u.value===e);if(a===-1)return t;const i=r>0?1:-1,o=t[a+i];if(!o)return t;const l=t[a],c=o.layout,d=Re(c.min,c.max,.5);return i===1&&l.layout.max+s>d||i===-1&&l.layout.min+s<d?Bg(t,a,a+i):t}function M1({children:t,as:e="ul",axis:s="y",onReorder:r,values:a,...i},o){const l=mn(()=>K[e]),c=[],d=f.useRef(!1),u={axis:s,registerItem:(h,m)=>{const p=c.findIndex(g=>h===g.value);p!==-1?c[p].layout=m[s]:c.push({value:h,layout:m[s]}),c.sort(R1)},updateOrder:(h,m,p)=>{if(d.current)return;const g=T1(c,h,m,p);c!==g&&(d.current=!0,r(g.map(P1).filter(x=>a.indexOf(x)!==-1)))}};return f.useEffect(()=>{d.current=!1}),n.jsx(l,{...i,ref:o,ignoreStrict:!0,children:n.jsx(np.Provider,{value:u,children:t})})}const A1=f.forwardRef(M1);function P1(t){return t.value}function R1(t,e){return t.layout.min-e.layout.min}function Sd(t,e=0){return st(t)?t:tp(e)}function I1({children:t,style:e={},value:s,as:r="li",onDrag:a,layout:i=!0,...o},l){const c=mn(()=>K[r]),d=f.useContext(np),u={x:Sd(e.x),y:Sd(e.y)},h=E1([u.x,u.y],([x,b])=>x||b?1:"unset"),{axis:m,registerItem:p,updateOrder:g}=d;return n.jsx(c,{drag:m,...o,dragSnapToOrigin:!0,style:{...e,x:u.x,y:u.y,zIndex:h},layout:i,onDrag:(x,b)=>{const{velocity:y}=b;y[m]&&g(s,u[m].get(),y[m]),a&&a(x,b)},onLayoutMeasure:x=>p(s,x),ref:l,ignoreStrict:!0,children:t})}const F1=f.forwardRef(I1);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rp=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...O1,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:rp("lucide",a),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=(t,e)=>{const s=f.forwardRef(({className:r,...a},i)=>f.createElement(L1,{ref:i,iconNode:e,className:rp(`lucide-${D1(t)}`,r),...a}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=T("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=T("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=T("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=T("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=T("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=T("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=T("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=T("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=T("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=T("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=T("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=T("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=T("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=T("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=T("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=T("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=T("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=T("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=T("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=T("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=T("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=T("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=T("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=T("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=T("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=T("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=T("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=T("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=T("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=T("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=T("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=T("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=T("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=T("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=T("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=T("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=T("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=T("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=T("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=T("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=T("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=T("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=T("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=T("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=T("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=T("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=T("Dice1",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=T("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=T("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=T("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=T("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=T("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=T("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=T("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=T("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=T("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=T("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=T("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=T("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=T("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=T("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=T("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=T("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=T("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=T("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=T("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=T("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=T("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=T("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=T("FolderCode",[["path",{d:"M10 10.5 8 13l2 2.5",key:"m4t9c1"}],["path",{d:"m14 10.5 2 2.5-2 2.5",key:"14w2eb"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z",key:"1u1bxd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=T("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=T("FolderSearch",[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=T("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=T("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=T("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=T("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=T("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=T("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=T("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=T("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=T("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=T("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=T("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=T("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=T("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=T("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=T("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=T("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=T("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=T("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=T("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=T("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=T("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=T("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=T("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=T("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=T("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=T("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=T("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=T("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=T("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=T("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=T("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=T("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=T("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=T("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=T("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=T("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=T("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=T("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=T("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=T("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=T("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=T("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=T("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=T("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=T("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=T("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=T("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=T("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=T("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=T("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=T("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=T("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=T("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=T("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=T("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=T("Podcast",[["path",{d:"M16.85 18.58a9 9 0 1 0-9.7 0",key:"d71mpg"}],["path",{d:"M8 14a5 5 0 1 1 8 0",key:"fc81rn"}],["circle",{cx:"12",cy:"11",r:"1",key:"1gvufo"}],["path",{d:"M13 17a1 1 0 1 0-2 0l.5 4.5a.5.5 0 1 0 1 0Z",key:"za5kbj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=T("Puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=T("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=T("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=T("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=T("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=T("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=T("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=T("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=T("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=T("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=T("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=T("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=T("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=T("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=T("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=T("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=T("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=T("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=T("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=T("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=T("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=T("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=T("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=T("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=T("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=T("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=T("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=T("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=T("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=T("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=T("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=T("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=T("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=T("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=T("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=T("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=T("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=T("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=T("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=T("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=T("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=T("Watch",[["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["polyline",{points:"12 10 12 12 13 13",key:"19dquz"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=T("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=T("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=T("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=T("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=T("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);let Yr=null;function Np(){if(Yr!==null)return Yr;if(typeof window>"u")return Yr=!1,!1;const t=!!(window.__TAURI__||window.__TAURI_METADATA__||window.__TAURI_INTERNALS__||navigator.userAgent.includes("Tauri"));return console.log("[detectEnvironment] isTauri:",t,"userAgent:",navigator.userAgent),Yr=t,t}async function Gj(t,e){let s=t;console.log(`[REST API] Original endpoint: ${t}, params:`,e),e&&Object.keys(e).forEach(a=>{[`{${a}}`,`{${a.charAt(0).toLowerCase()+a.slice(1)}}`,`{${a.charAt(0).toUpperCase()+a.slice(1)}}`].forEach(o=>{s.includes(o)&&(console.log(`[REST API] Replacing ${o} with ${e[a]}`),s=s.replace(o,encodeURIComponent(String(e[a]))))})}),console.log(`[REST API] Processed endpoint: ${s}`);const r=new URL(s,window.location.origin);e&&!s.includes("{")&&Object.keys(e).forEach(a=>{!t.includes(`{${a}}`)&&!t.includes(`{${a.charAt(0).toLowerCase()+a.slice(1)}}`)&&!t.includes(`{${a.charAt(0).toUpperCase()+a.slice(1)}}`)&&e[a]!==void 0&&e[a]!==null&&r.searchParams.append(a,String(e[a]))});try{const a=await fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"API call failed");return i.data}catch(a){throw console.error(`REST API call failed for ${t}:`,a),a}}async function W(t,e){if(!!Np()){console.log(`[Tauri] Calling: ${t}`,e);try{return await jr(t,e)}catch(i){console.warn("[Tauri] invoke failed, falling back to web mode:",i)}}if(console.log(`[Web] Calling: ${t}`,e),["execute_claude_code","continue_claude_code","resume_claude_code"].includes(t))return Yj(t,e);const a=Kj(t);return await Gj(a,e)}function Kj(t,e){const r={list_projects:"/api/projects",get_project_sessions:"/api/projects/{projectId}/sessions",list_agents:"/api/agents",fetch_github_agents:"/api/agents/github",fetch_github_agent_content:"/api/agents/github/content",import_agent_from_github:"/api/agents/import/github",create_agent:"/api/agents",update_agent:"/api/agents/{id}",delete_agent:"/api/agents/{id}",get_agent:"/api/agents/{id}",export_agent:"/api/agents/{id}/export",import_agent:"/api/agents/import",import_agent_from_file:"/api/agents/import/file",execute_agent:"/api/agents/{agentId}/execute",list_agent_runs:"/api/agents/runs",get_agent_run:"/api/agents/runs/{id}",get_agent_run_with_real_time_metrics:"/api/agents/runs/{id}/metrics",list_running_sessions:"/api/sessions/running",kill_agent_session:"/api/agents/sessions/{runId}/kill",get_session_status:"/api/agents/sessions/{runId}/status",cleanup_finished_processes:"/api/agents/sessions/cleanup",get_session_output:"/api/agents/sessions/{runId}/output",get_live_session_output:"/api/agents/sessions/{runId}/output/live",stream_session_output:"/api/agents/sessions/{runId}/output/stream",load_agent_session_history:"/api/agents/sessions/{sessionId}/history",get_usage_stats:"/api/usage",get_usage_by_date_range:"/api/usage/range",get_session_stats:"/api/usage/sessions",get_usage_details:"/api/usage/details",get_claude_settings:"/api/settings/claude",save_claude_settings:"/api/settings/claude",get_system_prompt:"/api/settings/system-prompt",save_system_prompt:"/api/settings/system-prompt",check_claude_version:"/api/settings/claude/version",find_claude_md_files:"/api/claude-md",read_claude_md_file:"/api/claude-md/read",save_claude_md_file:"/api/claude-md/save",open_new_session:"/api/sessions/new",load_session_history:"/api/sessions/{sessionId}/history/{projectId}",list_running_claude_sessions:"/api/sessions/running",execute_claude_code:"/api/sessions/execute",continue_claude_code:"/api/sessions/continue",resume_claude_code:"/api/sessions/resume",cancel_claude_execution:"/api/sessions/{sessionId}/cancel",get_claude_session_output:"/api/sessions/{sessionId}/output",mcp_add:"/api/mcp/servers",mcp_list:"/api/mcp/servers",mcp_get:"/api/mcp/servers/{name}",mcp_remove:"/api/mcp/servers/{name}",mcp_add_json:"/api/mcp/servers/json",mcp_add_from_claude_desktop:"/api/mcp/import/claude-desktop",mcp_serve:"/api/mcp/serve",mcp_test_connection:"/api/mcp/servers/{name}/test",mcp_reset_project_choices:"/api/mcp/reset-choices",mcp_get_server_status:"/api/mcp/status",mcp_read_project_config:"/api/mcp/project-config",mcp_save_project_config:"/api/mcp/project-config",get_claude_binary_path:"/api/settings/claude/binary-path",set_claude_binary_path:"/api/settings/claude/binary-path",list_claude_installations:"/api/settings/claude/installations",storage_list_tables:"/api/storage/tables",storage_read_table:"/api/storage/tables/{tableName}",storage_update_row:"/api/storage/tables/{tableName}/rows/{id}",storage_delete_row:"/api/storage/tables/{tableName}/rows/{id}",storage_insert_row:"/api/storage/tables/{tableName}/rows",storage_execute_sql:"/api/storage/sql",storage_reset_database:"/api/storage/reset",get_hooks_config:"/api/hooks/config",update_hooks_config:"/api/hooks/config",validate_hook_command:"/api/hooks/validate",slash_commands_list:"/api/slash-commands",slash_command_get:"/api/slash-commands/{commandId}",slash_command_save:"/api/slash-commands",slash_command_delete:"/api/slash-commands/{commandId}"}[t];return r||(console.warn(`Unknown command: ${t}, falling back to generic endpoint`),`/api/unknown/${t}`)}async function Yj(t,e){return new Promise((s,r)=>{const i=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/claude`;console.log("[TRACE] handleStreamingCommand called:"),console.log(`[TRACE]   command: ${t}`),console.log("[TRACE]   params:",e),console.log(`[TRACE]   WebSocket URL: ${i}`);const o=new WebSocket(i);o.onopen=()=>{console.log("[TRACE] WebSocket opened successfully");const l={command_type:t.replace("_claude_code",""),project_path:(e==null?void 0:e.projectPath)||"",prompt:(e==null?void 0:e.prompt)||"",model:(e==null?void 0:e.model)||"claude-3-5-sonnet-20241022",session_id:e==null?void 0:e.sessionId};console.log("[TRACE] Sending WebSocket request:",l),console.log("[TRACE] Request JSON:",JSON.stringify(l)),o.send(JSON.stringify(l)),console.log("[TRACE] WebSocket request sent")},o.onmessage=l=>{var c;console.log("[TRACE] WebSocket message received:",l.data);try{const d=JSON.parse(l.data);if(console.log("[TRACE] Parsed WebSocket message:",d),d.type==="start")console.log(`[TRACE] Start message: ${d.message}`);else if(d.type==="output"){console.log(`[TRACE] Output message, content length: ${((c=d.content)==null?void 0:c.length)||0}`),console.log("[TRACE] Raw content:",d.content);try{const u=typeof d.content=="string"?JSON.parse(d.content):d.content;console.log("[TRACE] Parsed Claude message:",u);const h=new CustomEvent("claude-output",{detail:u});console.log("[TRACE] Dispatching claude-output event:",h.detail),console.log("[TRACE] Event type:",h.type),window.dispatchEvent(h)}catch(u){console.error("[TRACE] Failed to parse Claude output content:",u),console.error("[TRACE] Content that failed to parse:",d.content)}}else if(d.type==="completion"){console.log("[TRACE] Completion message:",d);const u=new CustomEvent("claude-complete",{detail:d.status==="success"});console.log("[TRACE] Dispatching claude-complete event:",u.detail),window.dispatchEvent(u),o.close(),d.status==="success"?(console.log("[TRACE] Resolving promise with success"),s({})):(console.log(`[TRACE] Rejecting promise with error: ${d.error}`),r(new Error(d.error||"Execution failed")))}else if(d.type==="error"){console.log("[TRACE] Error message:",d);const u=new CustomEvent("claude-error",{detail:d.message||"Unknown error"});console.log("[TRACE] Dispatching claude-error event:",u.detail),window.dispatchEvent(u),r(new Error(d.message||"Unknown error"))}else console.log(`[TRACE] Unknown message type: ${d.type}`)}catch(d){console.error("[TRACE] Failed to parse WebSocket message:",d),console.error("[TRACE] Raw message:",l.data)}},o.onerror=l=>{console.error("[TRACE] WebSocket error:",l);const c=new CustomEvent("claude-error",{detail:"WebSocket connection failed"});console.log("[TRACE] Dispatching claude-error event for WebSocket error"),window.dispatchEvent(c),r(new Error("WebSocket connection failed"))},o.onclose=l=>{if(console.log(`[TRACE] WebSocket closed - code: ${l.code}, reason: ${l.reason}`),l.code!==1e3&&l.code!==1001){const c=new CustomEvent("claude-complete",{detail:!1});console.log("[TRACE] Dispatching claude-complete event for unexpected close"),window.dispatchEvent(c)}}})}function Jj(){Np()||window.__TAURI__||(window.__TAURI__={event:{listen:(t,e)=>{const s=r=>e({payload:r.detail});return window.addEventListener(`${t}`,s),Promise.resolve(()=>{window.removeEventListener(`${t}`,s)})},emit:()=>Promise.resolve()},invoke:()=>Promise.reject(new Error("Tauri invoke not available in web mode")),core:{invoke:()=>Promise.reject(new Error("Tauri invoke not available in web mode")),transformCallback:()=>{throw new Error("Tauri transformCallback not available in web mode")}}})}const X={async getHomeDirectory(){try{return await W("get_home_directory")}catch(t){return console.error("Failed to get home directory:",t),"/"}},async listProjects(){try{return await W("list_projects")}catch(t){throw console.error("Failed to list projects:",t),t}},async createProject(t){try{return await W("create_project",{path:t})}catch(e){throw console.error("Failed to create project:",e),e}},async getProjectSessions(t){try{return await W("get_project_sessions",{projectId:t})}catch(e){throw console.error("Failed to get project sessions:",e),e}},async fetchGitHubAgents(){try{return await W("fetch_github_agents")}catch(t){throw console.error("Failed to fetch GitHub agents:",t),t}},async fetchGitHubAgentContent(t){try{return await W("fetch_github_agent_content",{downloadUrl:t})}catch(e){throw console.error("Failed to fetch GitHub agent content:",e),e}},async importAgentFromGitHub(t){try{return await W("import_agent_from_github",{downloadUrl:t})}catch(e){throw console.error("Failed to import agent from GitHub:",e),e}},async getClaudeSettings(){try{const t=await W("get_claude_settings");return console.log("Raw result from get_claude_settings:",t),t&&typeof t=="object"&&"data"in t?t.data:t}catch(t){throw console.error("Failed to get Claude settings:",t),t}},async openNewSession(t){try{return await W("open_new_session",{path:t})}catch(e){throw console.error("Failed to open new session:",e),e}},async getSystemPrompt(){try{return await W("get_system_prompt")}catch(t){throw console.error("Failed to get system prompt:",t),t}},async checkClaudeVersion(){try{return await W("check_claude_version")}catch(t){throw console.error("Failed to check Claude version:",t),t}},async saveSystemPrompt(t){try{return await W("save_system_prompt",{content:t})}catch(e){throw console.error("Failed to save system prompt:",e),e}},async saveClaudeSettings(t){try{return await W("save_claude_settings",{settings:t})}catch(e){throw console.error("Failed to save Claude settings:",e),e}},async findClaudeMdFiles(t){try{return await W("find_claude_md_files",{projectPath:t})}catch(e){throw console.error("Failed to find CLAUDE.md files:",e),e}},async readClaudeMdFile(t){try{return await W("read_claude_md_file",{filePath:t})}catch(e){throw console.error("Failed to read CLAUDE.md file:",e),e}},async saveClaudeMdFile(t,e){try{return await W("save_claude_md_file",{filePath:t,content:e})}catch(s){throw console.error("Failed to save CLAUDE.md file:",s),s}},async listAgents(){try{return await W("list_agents")}catch(t){throw console.error("Failed to list agents:",t),t}},async createAgent(t,e,s,r,a,i){try{return await W("create_agent",{name:t,icon:e,systemPrompt:s,defaultTask:r,model:a,hooks:i})}catch(o){throw console.error("Failed to create agent:",o),o}},async updateAgent(t,e,s,r,a,i,o){try{return await W("update_agent",{id:t,name:e,icon:s,systemPrompt:r,defaultTask:a,model:i,hooks:o})}catch(l){throw console.error("Failed to update agent:",l),l}},async deleteAgent(t){try{return await W("delete_agent",{id:t})}catch(e){throw console.error("Failed to delete agent:",e),e}},async getAgent(t){try{return await W("get_agent",{id:t})}catch(e){throw console.error("Failed to get agent:",e),e}},async exportAgent(t){try{return await W("export_agent",{id:t})}catch(e){throw console.error("Failed to export agent:",e),e}},async importAgent(t){try{return await W("import_agent",{jsonData:t})}catch(e){throw console.error("Failed to import agent:",e),e}},async importAgentFromFile(t){try{return await W("import_agent_from_file",{filePath:t})}catch(e){throw console.error("Failed to import agent from file:",e),e}},async executeAgent(t,e,s,r){try{return await W("execute_agent",{agentId:t,projectPath:e,task:s,model:r})}catch(a){throw console.error("Failed to execute agent:",a),new Error(`Failed to execute agent: ${a instanceof Error?a.message:"Unknown error"}`)}},async listAgentRuns(t){try{return await W("list_agent_runs",{agentId:t})}catch(e){return console.error("Failed to list agent runs:",e),[]}},async listAgentRunsWithMetrics(t){try{return await W("list_agent_runs_with_metrics",{agentId:t})}catch(e){return console.error("Failed to list agent runs with metrics:",e),[]}},async getAgentRun(t){try{return await W("get_agent_run",{id:t})}catch(e){throw console.error("Failed to get agent run:",e),new Error(`Failed to get agent run: ${e instanceof Error?e.message:"Unknown error"}`)}},async getAgentRunWithRealTimeMetrics(t){try{return await W("get_agent_run_with_real_time_metrics",{id:t})}catch(e){throw console.error("Failed to get agent run with real-time metrics:",e),new Error(`Failed to get agent run with real-time metrics: ${e instanceof Error?e.message:"Unknown error"}`)}},async listRunningAgentSessions(){try{return await W("list_running_sessions")}catch(t){throw console.error("Failed to list running agent sessions:",t),new Error(`Failed to list running agent sessions: ${t instanceof Error?t.message:"Unknown error"}`)}},async killAgentSession(t){try{return await W("kill_agent_session",{runId:t})}catch(e){throw console.error("Failed to kill agent session:",e),new Error(`Failed to kill agent session: ${e instanceof Error?e.message:"Unknown error"}`)}},async getSessionStatus(t){try{return await W("get_session_status",{runId:t})}catch(e){throw console.error("Failed to get session status:",e),new Error(`Failed to get session status: ${e instanceof Error?e.message:"Unknown error"}`)}},async cleanupFinishedProcesses(){try{return await W("cleanup_finished_processes")}catch(t){throw console.error("Failed to cleanup finished processes:",t),new Error(`Failed to cleanup finished processes: ${t instanceof Error?t.message:"Unknown error"}`)}},async getSessionOutput(t){try{return await W("get_session_output",{runId:t})}catch(e){throw console.error("Failed to get session output:",e),new Error(`Failed to get session output: ${e instanceof Error?e.message:"Unknown error"}`)}},async getLiveSessionOutput(t){try{return await W("get_live_session_output",{runId:t})}catch(e){throw console.error("Failed to get live session output:",e),new Error(`Failed to get live session output: ${e instanceof Error?e.message:"Unknown error"}`)}},async streamSessionOutput(t){try{return await W("stream_session_output",{runId:t})}catch(e){throw console.error("Failed to start streaming session output:",e),new Error(`Failed to start streaming session output: ${e instanceof Error?e.message:"Unknown error"}`)}},async loadSessionHistory(t,e){return W("load_session_history",{sessionId:t,projectId:e})},async loadAgentSessionHistory(t){try{return await W("load_agent_session_history",{sessionId:t})}catch(e){throw console.error("Failed to load agent session history:",e),e}},async executeClaudeCode(t,e,s){return W("execute_claude_code",{projectPath:t,prompt:e,model:s})},async continueClaudeCode(t,e,s){return W("continue_claude_code",{projectPath:t,prompt:e,model:s})},async resumeClaudeCode(t,e,s,r){return W("resume_claude_code",{projectPath:t,sessionId:e,prompt:s,model:r})},async cancelClaudeExecution(t){return W("cancel_claude_execution",{sessionId:t})},async listRunningClaudeSessions(){return W("list_running_claude_sessions")},async getClaudeSessionOutput(t){return W("get_claude_session_output",{sessionId:t})},async listDirectoryContents(t){return W("list_directory_contents",{directoryPath:t})},async searchFiles(t,e){return W("search_files",{basePath:t,query:e})},async getUsageStats(){try{return await W("get_usage_stats")}catch(t){throw console.error("Failed to get usage stats:",t),t}},async getUsageByDateRange(t,e){try{return await W("get_usage_by_date_range",{startDate:t,endDate:e})}catch(s){throw console.error("Failed to get usage by date range:",s),s}},async getSessionStats(t,e,s){try{return await W("get_session_stats",{since:t,until:e,order:s})}catch(r){throw console.error("Failed to get session stats:",r),r}},async getUsageDetails(t){try{return await W("get_usage_details",{limit:t})}catch(e){throw console.error("Failed to get usage details:",e),e}},async createCheckpoint(t,e,s,r,a){return W("create_checkpoint",{sessionId:t,projectId:e,projectPath:s,messageIndex:r,description:a})},async restoreCheckpoint(t,e,s,r){return W("restore_checkpoint",{checkpointId:t,sessionId:e,projectId:s,projectPath:r})},async listCheckpoints(t,e,s){return W("list_checkpoints",{sessionId:t,projectId:e,projectPath:s})},async forkFromCheckpoint(t,e,s,r,a,i){return W("fork_from_checkpoint",{checkpointId:t,sessionId:e,projectId:s,projectPath:r,newSessionId:a,description:i})},async getSessionTimeline(t,e,s){return W("get_session_timeline",{sessionId:t,projectId:e,projectPath:s})},async updateCheckpointSettings(t,e,s,r,a){return W("update_checkpoint_settings",{sessionId:t,projectId:e,projectPath:s,autoCheckpointEnabled:r,checkpointStrategy:a})},async getCheckpointDiff(t,e,s,r){try{return await W("get_checkpoint_diff",{fromCheckpointId:t,toCheckpointId:e,sessionId:s,projectId:r})}catch(a){throw console.error("Failed to get checkpoint diff:",a),a}},async trackCheckpointMessage(t,e,s,r){try{await W("track_checkpoint_message",{sessionId:t,projectId:e,projectPath:s,message:r})}catch(a){throw console.error("Failed to track checkpoint message:",a),a}},async checkAutoCheckpoint(t,e,s,r){try{return await W("check_auto_checkpoint",{sessionId:t,projectId:e,projectPath:s,message:r})}catch(a){throw console.error("Failed to check auto checkpoint:",a),a}},async cleanupOldCheckpoints(t,e,s,r){try{return await W("cleanup_old_checkpoints",{sessionId:t,projectId:e,projectPath:s,keepCount:r})}catch(a){throw console.error("Failed to cleanup old checkpoints:",a),a}},async getCheckpointSettings(t,e,s){try{return await W("get_checkpoint_settings",{sessionId:t,projectId:e,projectPath:s})}catch(r){throw console.error("Failed to get checkpoint settings:",r),r}},async clearCheckpointManager(t){try{await W("clear_checkpoint_manager",{sessionId:t})}catch(e){throw console.error("Failed to clear checkpoint manager:",e),e}},trackSessionMessages:(t,e,s,r)=>W("track_session_messages",{sessionId:t,projectId:e,projectPath:s,messages:r}),async mcpAdd(t,e,s,r=[],a={},i,o="local"){try{return await W("mcp_add",{name:t,transport:e,command:s,args:r,env:a,url:i,scope:o})}catch(l){throw console.error("Failed to add MCP server:",l),l}},async mcpList(){try{console.log("API: Calling mcp_list...");const t=await W("mcp_list");return console.log("API: mcp_list returned:",t),t}catch(t){throw console.error("API: Failed to list MCP servers:",t),t}},async mcpGet(t){try{return await W("mcp_get",{name:t})}catch(e){throw console.error("Failed to get MCP server:",e),e}},async mcpRemove(t){try{return await W("mcp_remove",{name:t})}catch(e){throw console.error("Failed to remove MCP server:",e),e}},async mcpAddJson(t,e,s="local"){try{return await W("mcp_add_json",{name:t,jsonConfig:e,scope:s})}catch(r){throw console.error("Failed to add MCP server from JSON:",r),r}},async mcpAddFromClaudeDesktop(t="local"){try{return await W("mcp_add_from_claude_desktop",{scope:t})}catch(e){throw console.error("Failed to import from Claude Desktop:",e),e}},async mcpServe(){try{return await W("mcp_serve")}catch(t){throw console.error("Failed to start MCP server:",t),t}},async mcpTestConnection(t){try{return await W("mcp_test_connection",{name:t})}catch(e){throw console.error("Failed to test MCP connection:",e),e}},async mcpResetProjectChoices(){try{return await W("mcp_reset_project_choices")}catch(t){throw console.error("Failed to reset project choices:",t),t}},async mcpGetServerStatus(){try{return await W("mcp_get_server_status")}catch(t){throw console.error("Failed to get server status:",t),t}},async mcpReadProjectConfig(t){try{return await W("mcp_read_project_config",{projectPath:t})}catch(e){throw console.error("Failed to read project MCP config:",e),e}},async mcpSaveProjectConfig(t,e){try{return await W("mcp_save_project_config",{projectPath:t,config:e})}catch(s){throw console.error("Failed to save project MCP config:",s),s}},async getClaudeBinaryPath(){try{return await W("get_claude_binary_path")}catch(t){throw console.error("Failed to get Claude binary path:",t),t}},async setClaudeBinaryPath(t){try{return await W("set_claude_binary_path",{path:t})}catch(e){throw console.error("Failed to set Claude binary path:",e),e}},async listClaudeInstallations(){try{return await W("list_claude_installations")}catch(t){throw console.error("Failed to list Claude installations:",t),t}},async storageListTables(){try{return await W("storage_list_tables")}catch(t){throw console.error("Failed to list tables:",t),t}},async storageReadTable(t,e,s,r){try{return await W("storage_read_table",{tableName:t,page:e,pageSize:s,searchQuery:r})}catch(a){throw console.error("Failed to read table:",a),a}},async storageUpdateRow(t,e,s){try{return await W("storage_update_row",{tableName:t,primaryKeyValues:e,updates:s})}catch(r){throw console.error("Failed to update row:",r),r}},async storageDeleteRow(t,e){try{return await W("storage_delete_row",{tableName:t,primaryKeyValues:e})}catch(s){throw console.error("Failed to delete row:",s),s}},async storageInsertRow(t,e){try{return await W("storage_insert_row",{tableName:t,values:e})}catch(s){throw console.error("Failed to insert row:",s),s}},async storageExecuteSql(t){try{return await W("storage_execute_sql",{query:t})}catch(e){throw console.error("Failed to execute SQL:",e),e}},async storageResetDatabase(){try{return await W("storage_reset_database")}catch(t){throw console.error("Failed to reset database:",t),t}},async getSetting(t){var e;try{if(typeof window<"u"&&"localStorage"in window){const a=window.localStorage.getItem(`app_setting:${t}`);if(a!==null)return a}const s=await this.storageReadTable("app_settings",1,1e3),r=(e=s==null?void 0:s.data)==null?void 0:e.find(a=>a.key===t);return(r==null?void 0:r.value)||null}catch(s){return console.error(`Failed to get setting ${t}:`,s),null}},async saveSetting(t,e){try{if(typeof window<"u"&&"localStorage"in window)try{window.localStorage.setItem(`app_setting:${t}`,e)}catch{}try{await this.storageUpdateRow("app_settings",{key:t},{value:e})}catch{await this.storageInsertRow("app_settings",{key:t,value:e})}}catch(s){throw console.error(`Failed to save setting ${t}:`,s),s}},async getHooksConfig(t,e){try{return await W("get_hooks_config",{scope:t,projectPath:e})}catch(s){throw console.error("Failed to get hooks config:",s),s}},async updateHooksConfig(t,e,s){try{return await W("update_hooks_config",{scope:t,projectPath:s,hooks:e})}catch(r){throw console.error("Failed to update hooks config:",r),r}},async validateHookCommand(t){try{return await W("validate_hook_command",{command:t})}catch(e){throw console.error("Failed to validate hook command:",e),e}},async getMergedHooksConfig(t){try{const[e,s,r]=await Promise.all([this.getHooksConfig("user"),this.getHooksConfig("project",t),this.getHooksConfig("local",t)]),{HooksManager:a}=await zt(async()=>{const{HooksManager:i}=await Promise.resolve().then(()=>S_);return{HooksManager:i}},void 0);return a.mergeConfigs(e,s,r)}catch(e){throw console.error("Failed to get merged hooks config:",e),e}},async slashCommandsList(t){try{return await W("slash_commands_list",{projectPath:t})}catch(e){throw console.error("Failed to list slash commands:",e),e}},async slashCommandGet(t){try{return await W("slash_command_get",{commandId:t})}catch(e){throw console.error("Failed to get slash command:",e),e}},async slashCommandSave(t,e,s,r,a,i,o){try{return await W("slash_command_save",{scope:t,name:e,namespace:s,content:r,description:a,allowedTools:i,projectPath:o})}catch(l){throw console.error("Failed to save slash command:",l),l}},async slashCommandDelete(t,e){try{return await W("slash_command_delete",{commandId:t,projectPath:e})}catch(s){throw console.error("Failed to delete slash command:",s),s}}},kp=f.createContext(null);function eS(){const t=f.useContext(kp);if(!t)throw new Error("useOutputCache must be used within an OutputCacheProvider");return t}function Xj({children:t}){const[e,s]=f.useState(new Map),[r,a]=f.useState(!1),[i,o]=f.useState(null),l=f.useCallback(y=>e.get(y)||null,[e]),c=f.useCallback((y,v)=>{s(j=>new Map(j.set(y,v)))},[]),d=f.useCallback((y,v)=>{s(j=>{const S=j.get(y);if(S){const w=new Map(j);return w.set(y,{...S,status:v}),w}return j})},[]),u=f.useCallback(y=>{s(y?v=>{const j=new Map(v);return j.delete(y),j}:new Map)},[]),h=f.useCallback(y=>{if(!y)return[];const v=y.split(`
`).filter(S=>S.trim()),j=[];for(const S of v)try{const w=JSON.parse(S);j.push(w)}catch(w){console.error("Failed to parse message:",w,S),j.push({type:"result",subtype:"error",error:"Failed to parse message",raw_content:S})}return j},[]),m=f.useCallback(async(y,v)=>{try{const j=await X.getSessionOutput(y),S=h(j);c(y,{output:j,messages:S,lastUpdated:Date.now(),status:v})}catch(j){console.warn(`Failed to update cache for session ${y}:`,j)}},[h,c]),p=f.useCallback(async()=>{try{const y=await X.listRunningAgentSessions();for(const j of y)j.id&&j.status==="running"&&await m(j.id,j.status);const v=new Set(y.map(j=>j.id).filter(Boolean));s(j=>{const S=new Map;for(const[w,_]of j)(v.has(w)||_.status!=="running")&&S.set(w,_);return S})}catch(y){console.warn("Failed to poll running sessions:",y)}},[m]),g=f.useCallback(()=>{if(i)return;a(!0);const y=setInterval(p,3e3);o(y)},[i,p]),x=f.useCallback(()=>{i&&(clearInterval(i),o(null)),a(!1)},[i]);f.useEffect(()=>(g(),()=>x()),[g,x]);const b={getCachedOutput:l,setCachedOutput:c,updateSessionStatus:d,clearCache:u,isPolling:r,startBackgroundPolling:g,stopBackgroundPolling:x};return n.jsx(kp.Provider,{value:b,children:t})}const gn="opcode_tabs_v2",Jr="opcode_active_tab_v2",Ed="opcode_tab_persistence_enabled";class Ss{static isEnabled(){const e=localStorage.getItem(Ed);return e===null||e==="true"}static setEnabled(e){localStorage.setItem(Ed,String(e)),e||this.clearTabs()}static saveTabs(e,s){if(this.isEnabled())try{const r=e.filter(i=>!(i.status==="running"||i.type==="create-agent"||i.type==="import-agent")),a=r.map(i=>({id:i.id,type:i.type,title:i.title,sessionId:i.sessionId,agentRunId:i.agentRunId,claudeFileId:i.claudeFileId,initialProjectPath:i.initialProjectPath,projectPath:i.projectPath,status:i.status==="running"?"idle":i.status,hasUnsavedChanges:!1,order:i.order,icon:i.icon,createdAt:i.createdAt instanceof Date?i.createdAt.toISOString():i.createdAt,updatedAt:i.updatedAt instanceof Date?i.updatedAt.toISOString():i.updatedAt}));localStorage.setItem(gn,JSON.stringify(a)),s&&r.some(i=>i.id===s)&&localStorage.setItem(Jr,s)}catch(r){console.error("Failed to save tabs:",r)}}static loadTabs(){if(!this.isEnabled())return{tabs:[],activeTabId:null};try{const e=localStorage.getItem(gn),s=localStorage.getItem(Jr);if(!e)return{tabs:[],activeTabId:null};const o=JSON.parse(e).map(c=>({...c,createdAt:new Date(c.createdAt),updatedAt:new Date(c.updatedAt),sessionData:void 0,agentData:void 0,status:c.status==="running"?"idle":c.status})).filter(c=>{if(!c.id||!c.type||!c.title)return!1;switch(c.type){case"chat":return!0;case"agent":return!!c.agentRunId;case"agent-execution":return!1;case"claude-file":return!!c.claudeFileId;default:return!0}}).sort((c,d)=>c.order-d.order).map((c,d)=>({...c,order:d})),l=s&&o.some(c=>c.id===s)?s:o.length>0?o[0].id:null;return{tabs:o,activeTabId:l}}catch(e){return console.error("Failed to load tabs:",e),localStorage.removeItem(gn),localStorage.removeItem(Jr),{tabs:[],activeTabId:null}}}static clearTabs(){localStorage.removeItem(gn),localStorage.removeItem(Jr)}static migrateFromOldFormat(){try{const e="opcode_tabs",s=localStorage.getItem(e);s&&!localStorage.getItem(gn)&&(localStorage.setItem(gn,s),localStorage.removeItem(e),console.log("Migrated tab data from old format"))}catch(e){console.error("Failed to migrate old tab data:",e)}}}const Yn="opcode_session_",Jn="opcode_session_index";class Td{static saveSession(e,s,r,a,i){try{const o={sessionId:e,projectId:s,projectPath:r,lastMessageCount:a,scrollPosition:i,timestamp:Date.now()};localStorage.setItem(`${Yn}${e}`,JSON.stringify(o));const l=this.getSessionIndex();l.includes(e)||(l.push(e),localStorage.setItem(Jn,JSON.stringify(l)))}catch(o){console.error("Failed to save session data:",o)}}static loadSession(e){try{const s=localStorage.getItem(`${Yn}${e}`);if(!s)return null;const r=JSON.parse(s);return!r.sessionId||!r.projectId||!r.projectPath?null:r}catch(s){return console.error("Failed to load session data:",s),null}}static removeSession(e){try{localStorage.removeItem(`${Yn}${e}`);const r=this.getSessionIndex().filter(a=>a!==e);localStorage.setItem(Jn,JSON.stringify(r))}catch(s){console.error("Failed to remove session data:",s)}}static getSessionIndex(){try{const e=localStorage.getItem(Jn);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to get session index:",e),[]}}static clearAllSessions(){try{this.getSessionIndex().forEach(s=>{localStorage.removeItem(`${Yn}${s}`)}),localStorage.removeItem(Jn)}catch(e){console.error("Failed to clear session data:",e)}}static cleanupOldSessions(){try{const e=Date.now()-2592e6,s=this.getSessionIndex(),r=[];s.forEach(a=>{const i=this.loadSession(a);i&&i.timestamp>e?r.push(a):localStorage.removeItem(`${Yn}${a}`)}),localStorage.setItem(Jn,JSON.stringify(r))}catch(e){console.error("Failed to cleanup old sessions:",e)}}static async isSessionRestorable(e,s){try{if(!this.loadSession(e))return!1;const a=await X.loadSessionHistory(e,s);return a&&a.length>0}catch(r){return console.error("Failed to check session restorability:",r),!1}}static createSessionFromRestoreData(e){return{id:e.sessionId,project_id:e.projectId,project_path:e.projectPath,created_at:e.timestamp/1e3,first_message:"Restored session"}}}const Sp=f.createContext(void 0),Md=20,Zj=({children:t})=>{const[e,s]=f.useState([]),[r,a]=f.useState(null),i=f.useRef(!1),o=f.useRef();f.useEffect(()=>{(async()=>{if(i.current)return;i.current=!0,Ss.migrateFromOldFormat();const{tabs:v,activeTabId:j}=Ss.loadTabs();if(v.length>0){const S=await Promise.all(v.map(async w=>{if(w.type==="chat"&&w.sessionId){const _=Td.loadSession(w.sessionId);if(_){const N=Td.createSessionFromRestoreData(_);return{...w,sessionData:N,initialProjectPath:_.projectPath}}}return w}));s(S),a(j)}else{const S={id:l(),type:"projects",title:"Projects",status:"idle",hasUnsavedChanges:!1,order:0,createdAt:new Date,updatedAt:new Date};s([S]),a(S.id)}})()},[]),f.useEffect(()=>{if(i.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{Ss.saveTabs(e,r)},500),()=>{o.current&&clearTimeout(o.current)}},[e,r]),f.useEffect(()=>{const y=()=>{i.current&&e.length>0&&Ss.saveTabs(e,r)};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y),i.current&&e.length>0&&Ss.saveTabs(e,r)}},[e,r]);const l=()=>`tab-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c=f.useCallback(y=>{if(e.length>=Md)throw new Error(`Maximum number of tabs (${Md}) reached`);const v={...y,id:l(),order:e.length,createdAt:new Date,updatedAt:new Date};return s(j=>[...j,v]),a(v.id),v.id},[e.length]),d=f.useCallback(y=>{s(v=>{const S=v.filter(w=>w.id!==y).map((w,_)=>({...w,order:_}));if(r===y&&S.length>0){const w=v.findIndex(N=>N.id===y),_=Math.min(w,S.length-1);a(S[_].id)}else S.length===0&&a(null);return S})},[r]),u=f.useCallback((y,v)=>{s(j=>j.map(S=>S.id===y?{...S,...v,updatedAt:new Date}:S))},[]),h=f.useCallback(y=>{e.find(v=>v.id===y)&&a(y)},[e]),m=f.useCallback((y,v)=>{s(j=>{const S=[...j],[w]=S.splice(y,1);return S.splice(v,0,w),S.map((_,N)=>({..._,order:N}))})},[]),p=f.useCallback(y=>e.find(v=>v.id===y),[e]),g=f.useCallback(()=>{s([]),a(null),Ss.clearTabs()},[]),x=f.useCallback(y=>e.filter(v=>v.type===y),[e]),b={tabs:e,activeTabId:r,addTab:c,removeTab:d,updateTab:u,setActiveTab:h,reorderTabs:m,getTabById:p,closeAllTabs:g,getTabsByType:x};return n.jsx(Sp.Provider,{value:b,children:t})},Cp=()=>{const t=f.useContext(Sp);if(!t)throw new Error("useTabContext must be used within a TabProvider");return t},Ep=f.createContext(void 0),Ad="theme_preference",Pd="theme_custom_colors",Qj={background:"oklch(0.12 0.01 240)",foreground:"oklch(0.98 0.01 240)",card:"oklch(0.14 0.01 240)",cardForeground:"oklch(0.98 0.01 240)",primary:"oklch(0.98 0.01 240)",primaryForeground:"oklch(0.12 0.01 240)",secondary:"oklch(0.16 0.01 240)",secondaryForeground:"oklch(0.98 0.01 240)",muted:"oklch(0.16 0.01 240)",mutedForeground:"oklch(0.65 0.01 240)",accent:"oklch(0.16 0.01 240)",accentForeground:"oklch(0.98 0.01 240)",destructive:"oklch(0.6 0.2 25)",destructiveForeground:"oklch(0.98 0.01 240)",border:"oklch(0.16 0.01 240)",input:"oklch(0.16 0.01 240)",ring:"oklch(0.98 0.01 240)"},e_=({children:t})=>{const[e,s]=f.useState("gray"),[r,a]=f.useState(Qj),[i,o]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const m=await X.getSetting(Ad);if(m){const g=m;s(g),await l(g,r)}else s("gray"),await l("gray",r);const p=await X.getSetting(Pd);if(p){const g=JSON.parse(p);a(g),e==="custom"&&await l("custom",g)}}catch(m){console.error("Failed to load theme settings:",m)}finally{o(!1)}})()},[]);const l=f.useCallback(async(h,m)=>{const p=document.documentElement;p.classList.remove("theme-dark","theme-gray","theme-light","theme-custom"),p.classList.add(`theme-${h}`),h==="custom"?Object.entries(m).forEach(([g,x])=>{const b=`--color-${g.replace(/([A-Z])/g,"-$1").toLowerCase()}`;p.style.setProperty(b,x)}):Object.keys(m).forEach(g=>{const x=`--color-${g.replace(/([A-Z])/g,"-$1").toLowerCase()}`;p.style.removeProperty(x)})},[]),c=f.useCallback(async h=>{try{o(!0),s(h),await l(h,r),await X.saveSetting(Ad,h)}catch(m){console.error("Failed to save theme preference:",m)}finally{o(!1)}},[r,l]),d=f.useCallback(async h=>{try{o(!0);const m={...r,...h};a(m),e==="custom"&&await l("custom",m),await X.saveSetting(Pd,JSON.stringify(m))}catch(m){console.error("Failed to save custom colors:",m)}finally{o(!1)}},[e,r,l]),u={theme:e,customColors:r,setTheme:c,setCustomColors:d,isLoading:i};return n.jsx(Ep.Provider,{value:u,children:t})},t_=()=>{const t=f.useContext(Ep);if(!t)throw new Error("useThemeContext must be used within a ThemeProvider");return t};function V(...t){return Pg(Nh(t))}const se=f.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:V("rounded-lg border shadow-xs",t),style:{borderColor:"var(--color-border)",backgroundColor:"var(--color-card)",color:"var(--color-card-foreground)"},...e}));se.displayName="Card";const ma=f.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:V("flex flex-col space-y-1.5 p-6",t),...e}));ma.displayName="CardHeader";const pa=f.forwardRef(({className:t,...e},s)=>n.jsx("h3",{ref:s,className:V("font-semibold leading-none tracking-tight",t),...e}));pa.displayName="CardTitle";const fa=f.forwardRef(({className:t,...e},s)=>n.jsx("p",{ref:s,className:V("text-sm text-muted-foreground",t),...e}));fa.displayName="CardDescription";const Ct=f.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:V("p-6 pt-0",t),...e}));Ct.displayName="CardContent";const Kl=f.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:V("flex items-center p-6 pt-0",t),...e}));Kl.displayName="CardFooter";const Rd=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Id=Nh,Tp=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return Id(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],h=i==null?void 0:i[d];if(u===null)return null;const m=Rd(u)||Rd(h);return a[d][m]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:m,...p}=u;return Object.entries(p).every(g=>{let[x,b]=g;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...d,h,m]:d},[]);return Id(t,o,c,s==null?void 0:s.class,s==null?void 0:s.className)},s_=Tp("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),L=f.forwardRef(({className:t,variant:e,size:s,...r},a)=>n.jsx("button",{className:V(s_({variant:e,size:s,className:t})),ref:a,...r}));L.displayName="Button";const n_=t=>{const e=t.split("/").filter(Boolean);return e[e.length-1]||t},r_=(t,e=30)=>{let s=t;const r=["/Users/","/home/"];for(const a of r)if(t.includes(a)){const i=t.split("/"),o=i.findIndex((l,c)=>c>0&&i[c-1]===a.split("/")[1]);if(o>0){s=`~/${i.slice(o+1).join("/")}`;break}}if(s.length>e){const a=s.substring(0,Math.floor(e/2)-2),i=s.substring(s.length-Math.floor(e/2)+2);return`${a}...${i}`}return s},Mp=({projects:t,onProjectClick:e,onOpenProject:s,className:r})=>{const[a,i]=f.useState(!1),[o,l]=f.useState(1),c=a?10:5,d=Math.ceil(t.length/c),u=a?(o-1)*c:0,h=u+c,m=t.slice(u,h),p=()=>{i(!0),l(1)},g=()=>{i(!1),l(1)};return n.jsx("div",{className:V("h-full overflow-y-auto",r),children:n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Projects"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:"Select a project to start working with Claude Code"})]}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsxs(L,{onClick:s,size:"default",className:"flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4"}),"Open Project"]})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:m.length>0?n.jsxs(se,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-heading-4",children:"Recent Projects"}),a?n.jsx("button",{onClick:g,className:"text-caption text-muted-foreground hover:text-foreground transition-colors",children:"View less"}):n.jsxs("button",{onClick:p,className:"text-caption text-muted-foreground hover:text-foreground transition-colors",children:["View all (",t.length,")"]})]}),n.jsx("div",{className:"space-y-1",children:m.map((x,b)=>n.jsx(K.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15,delay:b*.02},className:"group",children:n.jsxs(K.button,{onClick:()=>e(x),whileTap:{scale:.97},transition:{duration:.15},className:"w-full text-left px-3 py-2 rounded-md hover:bg-accent/50 transition-colors flex items-center justify-between",children:[n.jsx("span",{className:"text-body-small font-medium",children:n_(x.path)}),n.jsx("span",{className:"text-caption text-muted-foreground font-mono text-right",style:{minWidth:"200px"},children:r_(x.path,35)})]})},x.id))}),a&&d>1&&n.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>l(x=>Math.max(1,x-1)),disabled:o===1,children:n.jsx(Tr,{className:"h-4 w-4"})})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:d},(x,b)=>b+1).map(x=>n.jsx(L,{variant:o===x?"default":"ghost",size:"sm",onClick:()=>l(x),className:"w-8 h-8 p-0",children:x},x))}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>l(x=>Math.min(d,x+1)),disabled:o===d,children:n.jsx(Ve,{className:"h-4 w-4"})})})]})]}):n.jsx(se,{className:"p-12",children:n.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:n.jsx(Mt,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-heading-3 mb-2",children:"No recent projects"}),n.jsx("p",{className:"text-body-small text-muted-foreground mb-6",children:"Open a project to get started with Claude Code"}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsxs(L,{onClick:s,size:"default",className:"flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4"}),"Open Your First Project"]})})]})})})]})})},xn=new Map,js=new Map,a_=t=>{var s;if(t.is_directory)return Xa;const e=(s=t.extension)==null?void 0:s.toLowerCase();return e?["ts","tsx","js","jsx","py","rs","go","java","cpp","c","h"].includes(e)?tn:["md","txt","json","yaml","yml","toml","xml","html","css"].includes(e)?Ke:["png","jpg","jpeg","gif","svg","webp","ico"].includes(e)?xb:Cd:Cd},i_=t=>{if(t===0)return"";const e=1024,s=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(1))} ${s[r]}`},Fd=({basePath:t,onSelect:e,onClose:s,initialQuery:r="",className:a})=>{const i=r,[o,l]=f.useState(t),[c,d]=f.useState(()=>i.trim()?[]:xn.get(t)||[]),[u,h]=f.useState(()=>{if(i.trim()){const A=`${t}:${i}`;return js.get(A)||[]}return[]}),[m,p]=f.useState(!1),[g,x]=f.useState(null),[b,y]=f.useState([t]),[v,j]=f.useState(0),[S,w]=f.useState(()=>{if(i.trim()){const A=`${t}:${i}`;return js.has(A)}return xn.has(t)}),_=f.useRef(null),N=f.useRef(null),C=i.trim()?u:c,P=b.length>1,O=o.startsWith(t)?o.slice(t.length)||"/":o;f.useEffect(()=>{B(o)},[o]),f.useEffect(()=>{if(_.current&&clearTimeout(_.current),i.trim()){const A=`${t}:${i}`;js.has(A)&&(console.log("[FilePicker] Immediately showing cached search results for:",i),h(js.get(A)||[]),w(!0),x(null)),_.current=setTimeout(()=>{U(i)},300)}else h([]),w(!1);return()=>{_.current&&clearTimeout(_.current)}},[i,t]),f.useEffect(()=>{j(0)},[c,u]),f.useEffect(()=>{const A=F=>{const ee=i.trim()?u:c;switch(F.key){case"Escape":F.preventDefault(),s();break;case"Enter":F.preventDefault(),ee.length>0&&v<ee.length&&e(ee[v]);break;case"ArrowUp":F.preventDefault(),j(D=>Math.max(0,D-1));break;case"ArrowDown":F.preventDefault(),j(D=>Math.min(ee.length-1,D+1));break;case"ArrowRight":if(F.preventDefault(),ee.length>0&&v<ee.length){const D=ee[v];D.is_directory&&G(D.path)}break;case"ArrowLeft":F.preventDefault(),P&&R();break}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[c,u,v,i,P]),f.useEffect(()=>{if(N.current){const A=N.current.querySelector(`[data-index="${v}"]`);A&&A.scrollIntoView({block:"nearest",behavior:"smooth"})}},[v]);const B=async A=>{try{console.log("[FilePicker] Loading directory:",A),xn.has(A)?(console.log("[FilePicker] Showing cached contents for:",A),d(xn.get(A)||[]),w(!0),x(null)):p(!0);const F=await X.listDirectoryContents(A);console.log("[FilePicker] Loaded fresh contents:",F.length,"items"),xn.set(A,F),d(F),w(!1),x(null)}catch(F){console.error("[FilePicker] Failed to load directory:",A,F),console.error("[FilePicker] Error details:",F),xn.has(A)||x(F instanceof Error?F.message:"Failed to load directory")}finally{p(!1)}},U=async A=>{try{console.log("[FilePicker] Searching for:",A,"in:",t);const F=`${t}:${A}`;js.has(F)?(console.log("[FilePicker] Showing cached search results for:",A),h(js.get(F)||[]),w(!0),x(null)):p(!0);const ee=await X.searchFiles(t,A);console.log("[FilePicker] Fresh search results:",ee.length,"items"),js.set(F,ee),h(ee),w(!1),x(null)}catch(F){console.error("[FilePicker] Search failed:",A,F);const ee=`${t}:${A}`;js.has(ee)||x(F instanceof Error?F.message:"Search failed")}finally{p(!1)}},G=A=>{l(A),y(F=>[...F,A])},R=()=>{if(b.length>1){const A=[...b];A.pop();const F=A[A.length-1];(F.startsWith(t)||F===t)&&(l(F),y(A))}},z=A=>{e(A)},re=A=>{A.is_directory&&G(A.path)};return n.jsxs(K.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:V("absolute bottom-full mb-2 left-0 z-50","w-[500px] h-[400px]","bg-background border border-border rounded-lg shadow-lg","flex flex-col overflow-hidden",a),children:[n.jsx("div",{className:"border-b border-border p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:R,disabled:!P,className:"h-8 w-8",children:n.jsx(pn,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate max-w-[300px]",children:O})]}),n.jsx(L,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8",children:n.jsx(Ut,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto relative",children:[m&&C.length===0&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})}),S&&m&&C.length>0&&n.jsx("div",{className:"absolute top-1 right-2 text-xs text-muted-foreground/50 italic",children:"updating..."}),g&&C.length===0&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("span",{className:"text-sm text-destructive",children:g})}),!m&&!g&&C.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[n.jsx(ns,{className:"h-8 w-8 text-muted-foreground mb-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.trim()?"No files found":"Empty directory"})]}),C.length>0&&n.jsx("div",{className:"p-2 space-y-0.5",ref:N,children:C.map((A,F)=>{const ee=a_(A),D=i.trim()!=="",Z=F===v;return n.jsxs("button",{"data-index":F,onClick:()=>z(A),onDoubleClick:()=>re(A),onMouseEnter:()=>j(F),className:V("w-full flex items-center gap-2 px-2 py-1.5 rounded-md","hover:bg-accent transition-colors","text-left text-sm",Z&&"bg-accent"),title:A.is_directory?"Click to select  Double-click to enter":"Click to select",children:[n.jsx(ee,{className:V("h-4 w-4 flex-shrink-0",A.is_directory?"text-blue-500":"text-muted-foreground")}),n.jsx("span",{className:"flex-1 truncate",children:A.name}),!A.is_directory&&A.size>0&&n.jsx("span",{className:"text-xs text-muted-foreground",children:i_(A.size)}),A.is_directory&&n.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"}),D&&n.jsx("span",{className:"text-xs text-muted-foreground font-mono truncate max-w-[150px]",children:A.path.replace(t,"").replace(/^\//,"")})]},A.path)})})]}),n.jsx("div",{className:"border-t border-border p-2",children:n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:" Navigate  Enter Select   Enter Directory   Go Back  Esc Close"})})]})},Ap=({currentPage:t,totalPages:e,onPageChange:s,className:r})=>e<=1?null:n.jsxs("div",{className:V("flex items-center justify-center space-x-2",r),children:[n.jsx(L,{variant:"outline",size:"icon",onClick:()=>s(t-1),disabled:t<=1,className:"h-8 w-8",children:n.jsx(Tr,{className:"h-4 w-4"})}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",e]}),n.jsx(L,{variant:"outline",size:"icon",onClick:()=>s(t+1),disabled:t>=e,className:"h-8 w-8",children:n.jsx(Ve,{className:"h-4 w-4"})})]});function Pp(t){const e=new Date(t*1e3),s=new Date;return d_(e)?Si(e):u_(e)?`Yesterday, ${Si(e)}`:h_(e)?`${m_(e)}, ${Si(e)}`:e.getFullYear()===s.getFullYear()?e.toLocaleDateString("en-US",{month:"short",day:"numeric"}):e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function o_(t){const e=new Date(t);return Pp(Math.floor(e.getTime()/1e3))}function l_(t,e){return t.length<=e?t:t.slice(0,e-3)+"..."}function c_(t){return t.split(`
`)[0]||""}function Si(t){return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function d_(t){const e=new Date;return t.toDateString()===e.toDateString()}function u_(t){const e=new Date;return e.setDate(e.getDate()-1),t.toDateString()===e.toDateString()}function h_(t){const e=new Date;return e.setDate(e.getDate()-7),t>e}function m_(t){return t.toLocaleDateString("en-US",{weekday:"long"})}const p_=({projectPath:t,onEditFile:e,className:s})=>{const[r,a]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(!1),[d,u]=f.useState(null);f.useEffect(()=>{r&&i.length===0&&h()},[r]);const h=async()=>{try{c(!0),u(null);const p=await X.findClaudeMdFiles(t);o(p)}catch(p){console.error("Failed to load CLAUDE.md files:",p),u("Failed to load CLAUDE.md files")}finally{c(!1)}},m=p=>p<1024?`${p} B`:p<1024*1024?`${(p/1024).toFixed(1)} KB`:`${(p/(1024*1024)).toFixed(1)} MB`;return n.jsx("div",{className:V("w-full",s),children:n.jsxs(se,{className:"overflow-hidden",children:[n.jsxs("button",{onClick:()=>a(!r),className:"w-full flex items-center justify-between p-3 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"CLAUDE.md Memories"}),i.length>0&&!l&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.length,")"]})]}),n.jsx(K.div,{animate:{rotate:r?180:0},transition:{duration:.2},children:n.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})})]}),n.jsx(Te,{children:r&&n.jsx(K.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},className:"overflow-hidden",children:n.jsx("div",{className:"border-t border-border",children:l?n.jsx("div",{className:"p-4 flex items-center justify-center",children:n.jsx(ye,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):d?n.jsx("div",{className:"p-3 text-xs text-destructive",children:d}):i.length===0?n.jsx("div",{className:"p-3 text-xs text-muted-foreground text-center",children:"No CLAUDE.md files found in this project"}):n.jsx("div",{className:"max-h-64 overflow-y-auto",children:i.map((p,g)=>n.jsxs(K.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:g*.05},className:"flex items-center justify-between p-3 hover:bg-accent/50 transition-colors border-b border-border last:border-b-0",children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[n.jsx("p",{className:"text-xs font-mono truncate",children:p.relative_path}),n.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:m(p.size)}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Modified ",Pp(p.modified)]})]})]}),n.jsx(L,{variant:"ghost",size:"icon",className:"h-7 w-7 flex-shrink-0",onClick:x=>{x.stopPropagation(),e(p)},children:n.jsx(oj,{className:"h-3 w-3"})})]},p.absolute_path))})})})})]})})},ka=eh,vo=th,yo=sh,Sa=f.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(za,{ref:r,sideOffset:e,className:V("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Sa.displayName=za.displayName;const Ci=12,Rp=({sessions:t,projectPath:e,onSessionClick:s,onEditClaudeFile:r,className:a})=>{const[i,o]=f.useState(1),l=Math.ceil(t.length/Ci),c=(i-1)*Ci,d=c+Ci,u=t.slice(c,d);return He.useEffect(()=>{o(1)},[t.length]),n.jsx(ka,{children:n.jsxs("div",{className:V("space-y-4",a),children:[r&&n.jsx(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:n.jsx(p_,{projectPath:e,onEditFile:r})}),n.jsx(Te,{mode:"popLayout",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:u.map((h,m)=>n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:m*.05,ease:[.4,0,.2,1]},children:n.jsx(se,{className:V("p-3 hover:bg-accent/50 transition-all duration-200 cursor-pointer group h-full",h.todo_data&&"bg-primary/5"),onClick:()=>{const p=new CustomEvent("claude-session-selected",{detail:{session:h,projectPath:e}});window.dispatchEvent(p),s==null||s(h)},children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-start gap-1.5 flex-1 min-w-0",children:[n.jsx(As,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("p",{className:"text-body-small font-medium",children:["Session on ",h.message_timestamp?new Date(h.message_timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):new Date(h.created_at*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})})]}),h.todo_data&&n.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-caption font-medium bg-primary/10 text-primary",children:"Todo"})]}),h.first_message?n.jsx("p",{className:"text-caption text-muted-foreground line-clamp-2 mb-2",children:l_(c_(h.first_message),120)}):n.jsx("p",{className:"text-caption text-muted-foreground/60 italic mb-2",children:"No messages yet"})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[n.jsx("p",{className:"text-caption text-muted-foreground font-mono",children:h.id.slice(-8)}),h.todo_data&&n.jsx(wa,{className:"h-3 w-3 text-primary"})]})]})})},h.id))})}),n.jsx(Ap,{currentPage:i,totalPages:l,onPageChange:o})]})})},f_=eh,g_=th,x_=sh,Ip=f.forwardRef(({className:t,sideOffset:e=6,...s},r)=>n.jsx(pg,{children:n.jsx(za,{ref:r,sideOffset:e,className:V("z-[100] overflow-hidden rounded-lg border border-border bg-popover px-3 py-2","text-xs text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2","data-[side=top]:slide-in-from-bottom-2",t),...s})}));Ip.displayName=za.displayName;const Xr=({content:t,children:e,side:s="top",align:r="center",delayDuration:a=200,className:i,contentClassName:o})=>n.jsxs(g_,{delayDuration:a,children:[n.jsx(x_,{asChild:!0,className:i,children:e}),n.jsx(Ip,{side:s,align:r,className:o,children:t})]}),v_=({onSettingsClick:t,onAgentsClick:e,onUsageClick:s,onClaudeClick:r,onMCPClick:a,onInfoClick:i})=>{const[o,l]=f.useState(!1),[c,d]=f.useState(!1),u=f.useRef(null);f.useEffect(()=>{const g=x=>{u.current&&!u.current.contains(x.target)&&d(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{try{await ui().minimize(),console.log("Window minimized successfully")}catch(g){console.error("Failed to minimize window:",g)}},m=async()=>{try{const g=ui();await g.isMaximized()?(await g.unmaximize(),console.log("Window unmaximized successfully")):(await g.maximize(),console.log("Window maximized successfully"))}catch(g){console.error("Failed to maximize/unmaximize window:",g)}},p=async()=>{try{await ui().close(),console.log("Window closed successfully")}catch(g){console.error("Failed to close window:",g)}};return n.jsx(f_,{children:n.jsxs("div",{className:"relative z-[200] h-11 bg-background/95 backdrop-blur-sm flex items-center justify-between select-none border-b border-border/50 tauri-drag","data-tauri-drag-region":!0,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[n.jsx("div",{className:"flex items-center space-x-2 pl-5",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:g=>{g.stopPropagation(),p()},className:"group relative w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 transition-all duration-200 flex items-center justify-center tauri-no-drag",title:"Close",children:o&&n.jsx(Ut,{size:8,className:"text-red-900 opacity-60 group-hover:opacity-100"})}),n.jsx("button",{onClick:g=>{g.stopPropagation(),h()},className:"group relative w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600 transition-all duration-200 flex items-center justify-center tauri-no-drag",title:"Minimize",children:o&&n.jsx(Zb,{size:8,className:"text-yellow-900 opacity-60 group-hover:opacity-100"})}),n.jsx("button",{onClick:g=>{g.stopPropagation(),m()},className:"group relative w-3 h-3 rounded-full bg-green-500 hover:bg-green-600 transition-all duration-200 flex items-center justify-center tauri-no-drag",title:"Maximize",children:o&&n.jsx(jj,{size:6,className:"text-green-900 opacity-60 group-hover:opacity-100"})})]})}),n.jsxs("div",{className:"flex items-center pr-5 gap-3 tauri-no-drag",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[e&&n.jsx(Xr,{content:"Agents",side:"bottom",children:n.jsx(K.button,{onClick:e,whileTap:{scale:.97},transition:{duration:.15},className:"p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors tauri-no-drag",children:n.jsx(ts,{size:16})})}),s&&n.jsx(Xr,{content:"Usage Dashboard",side:"bottom",children:n.jsx(K.button,{onClick:s,whileTap:{scale:.97},transition:{duration:.15},className:"p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors tauri-no-drag",children:n.jsx(lp,{size:16})})})]}),n.jsx("div",{className:"w-px h-5 bg-border/50"}),n.jsxs("div",{className:"flex items-center gap-1",children:[t&&n.jsx(Xr,{content:"Settings",side:"bottom",children:n.jsx(K.button,{onClick:t,whileTap:{scale:.97},transition:{duration:.15},className:"p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors tauri-no-drag",children:n.jsx(qn,{size:16})})}),n.jsxs("div",{className:"relative",ref:u,children:[n.jsx(Xr,{content:"More options",side:"bottom",children:n.jsx(K.button,{onClick:()=>d(!c),whileTap:{scale:.97},transition:{duration:.15},className:"p-2 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors flex items-center gap-1",children:n.jsx(pb,{size:16})})}),c&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-popover border border-border rounded-lg shadow-lg z-[250]",children:n.jsxs("div",{className:"py-1",children:[r&&n.jsxs("button",{onClick:()=>{r(),d(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground transition-colors flex items-center gap-3",children:[n.jsx(Ke,{size:14}),n.jsx("span",{children:"CLAUDE.md"})]}),a&&n.jsxs("button",{onClick:()=>{a(),d(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground transition-colors flex items-center gap-3",children:[n.jsx(Mr,{size:14}),n.jsx("span",{children:"MCP Servers"})]}),i&&n.jsxs("button",{onClick:()=>{i(),d(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground transition-colors flex items-center gap-3",children:[n.jsx(Ot,{size:14}),n.jsx("span",{children:"About"})]})]})})]})]})]})]})})},fs=({message:t,type:e="info",duration:s=3e3,onDismiss:r,className:a})=>{f.useEffect(()=>{if(s&&s>0){const l=setTimeout(()=>{r==null||r()},s);return()=>clearTimeout(l)}},[s,r]);const i={success:n.jsx(Ul,{className:"h-4 w-4"}),error:n.jsx(qe,{className:"h-4 w-4"}),info:n.jsx(Ot,{className:"h-4 w-4"})},o={success:"text-green-500",error:"text-red-500",info:"text-primary"};return n.jsxs(K.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:V("flex items-center space-x-3 rounded-lg border border-border bg-card px-4 py-3 shadow-lg",a),children:[n.jsx("span",{className:o[e],children:i[e]}),n.jsx("span",{className:"flex-1 text-sm",children:t}),r&&n.jsx("button",{onClick:r,className:"text-muted-foreground hover:text-foreground transition-colors",children:n.jsx(Ut,{className:"h-4 w-4"})})]})},gs=({children:t})=>n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 flex justify-center p-4 pointer-events-none",children:n.jsx("div",{className:"pointer-events-auto",children:n.jsx(Te,{mode:"wait",children:t})})}),Fp=({className:t})=>{const[e,s]=f.useState(""),[r,a]=f.useState(""),[i,o]=f.useState(!0),[l,c]=f.useState(!1),[d,u]=f.useState(null),[h,m]=f.useState(null),p=e!==r;f.useEffect(()=>{g()},[]);const g=async()=>{try{o(!0),u(null);const b=await X.getSystemPrompt();s(b),a(b)}catch(b){console.error("Failed to load system prompt:",b),u("Failed to load CLAUDE.md file")}finally{o(!1)}},x=async()=>{try{c(!0),u(null),m(null),await X.saveSystemPrompt(e),a(e),m({message:"CLAUDE.md saved successfully",type:"success"})}catch(b){console.error("Failed to save system prompt:",b),u("Failed to save CLAUDE.md file"),m({message:"Failed to save CLAUDE.md",type:"error"})}finally{c(!1)}};return n.jsxs("div",{className:V("h-full overflow-y-auto",t),children:[n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"CLAUDE.md"}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Edit your Claude Code system prompt"})]}),n.jsx(L,{onClick:x,disabled:!p||l,size:"default",children:l?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fn,{className:"mr-2 h-4 w-4"}),"Save"]})})]})}),d&&n.jsx(K.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mx-6 mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/50 text-sm text-destructive",children:d}),n.jsx("div",{className:"flex-1 overflow-hidden p-6",children:i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsx("div",{className:"h-full rounded-lg border border-border overflow-hidden shadow-sm","data-color-mode":"dark",children:n.jsx(ol,{value:e,onChange:b=>s(b||""),preview:"edit",height:"100%",visibleDragbar:!1})})})]}),n.jsx(gs,{children:h&&n.jsx(fs,{message:h.message,type:h.type,onDismiss:()=>m(null)})})]})},y_=Object.freeze(Object.defineProperty({__proto__:null,MarkdownEditor:Fp},Symbol.toStringTag,{value:"Module"})),b_=({file:t,onBack:e,className:s})=>{const[r,a]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState(!0),[d,u]=f.useState(!1),[h,m]=f.useState(null),[p,g]=f.useState(null),x=r!==i;f.useEffect(()=>{b()},[t.absolute_path]);const b=async()=>{try{c(!0),m(null);const j=await X.readClaudeMdFile(t.absolute_path);a(j),o(j)}catch(j){console.error("Failed to load file:",j),m("Failed to load CLAUDE.md file")}finally{c(!1)}},y=async()=>{try{u(!0),m(null),g(null),await X.saveClaudeMdFile(t.absolute_path,r),o(r),g({message:"File saved successfully",type:"success"})}catch(j){console.error("Failed to save file:",j),m("Failed to save CLAUDE.md file"),g({message:"Failed to save file",type:"error"})}finally{u(!1)}},v=()=>{x&&!window.confirm("You have unsaved changes. Are you sure you want to leave?")||e()};return n.jsxs("div",{className:V("flex flex-col h-full bg-background",s),children:[n.jsxs("div",{className:"w-full max-w-5xl mx-auto flex flex-col h-full",children:[n.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:v,className:"h-8 w-8",children:n.jsx(pn,{className:"h-4 w-4"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h2",{className:"text-lg font-semibold truncate",children:t.relative_path}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Edit project-specific Claude Code system prompt"})]})]}),n.jsxs(L,{onClick:y,disabled:!x||d,size:"sm",children:[d?n.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(fn,{className:"mr-2 h-4 w-4"}),d?"Saving...":"Save"]})]}),h&&n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},className:"mx-4 mt-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-xs text-destructive",children:h}),n.jsx("div",{className:"flex-1 p-4 overflow-hidden",children:l?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(ye,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):n.jsx("div",{className:"h-full rounded-lg border border-border overflow-hidden shadow-sm","data-color-mode":"dark",children:n.jsx(ol,{value:r,onChange:j=>a(j||""),preview:"edit",height:"100%",visibleDragbar:!1})})})]}),n.jsx(gs,{children:p&&n.jsx(fs,{message:p.message,type:p.type,onDismiss:()=>g(null)})})]})},xe=f.forwardRef(({className:t,type:e,...s},r)=>n.jsx("input",{type:e,className:V("flex h-9 w-full rounded-md border px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","focus-visible:outline-none focus-visible:ring-1","disabled:cursor-not-allowed disabled:opacity-50",t),style:{borderColor:"var(--color-input)",backgroundColor:"transparent",color:"var(--color-foreground)"},ref:r,...s}));xe.displayName="Input";const ce=f.forwardRef(({className:t,...e},s)=>n.jsx("label",{ref:s,className:V("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));ce.displayName="Label";const Ks=f.forwardRef(({className:t,checked:e,onCheckedChange:s,disabled:r,...a},i)=>n.jsxs("button",{type:"button",role:"switch","aria-checked":e,disabled:r,onClick:()=>s==null?void 0:s(!e),className:V("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors","disabled:cursor-not-allowed disabled:opacity-50",t),style:{backgroundColor:e?"var(--color-primary)":"var(--color-muted)"},children:[n.jsx("span",{className:V("pointer-events-none block h-4 w-4 rounded-full shadow-lg ring-0 transition-transform",e?"translate-x-4":"translate-x-0"),style:{backgroundColor:"var(--color-background)"}}),n.jsx("input",{ref:i,type:"checkbox",checked:e,disabled:r,className:"sr-only",onChange:()=>{},...a})]}));Ks.displayName="Switch";const Yl=f.createContext({value:"",onValueChange:()=>{}}),Ds=({value:t,onValueChange:e,children:s,className:r})=>n.jsx(Yl.Provider,{value:{value:t,onValueChange:e},children:n.jsx("div",{className:V("w-full",r),children:s})}),xs=f.forwardRef(({className:t,...e},s)=>n.jsx("div",{ref:s,className:V("flex h-9 items-center justify-start rounded-lg p-1",t),style:{backgroundColor:"var(--color-muted)",color:"var(--color-muted-foreground)"},...e}));xs.displayName="TabsList";const Ne=f.forwardRef(({className:t,value:e,disabled:s,...r},a)=>{const{value:i,onValueChange:o}=f.useContext(Yl),l=i===e;return n.jsx("button",{ref:a,type:"button",role:"tab","aria-selected":l,disabled:s,onClick:()=>o(e),className:V("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium transition-all","disabled:pointer-events-none disabled:opacity-50",t),style:{backgroundColor:l?"var(--color-background)":"transparent",color:l?"var(--color-foreground)":"inherit",boxShadow:l?"0 1px 2px rgba(0,0,0,0.1)":"none"},...r})});Ne.displayName="TabsTrigger";const ke=f.forwardRef(({className:t,value:e,...s},r)=>{const{value:a}=f.useContext(Yl);return a===e?n.jsx("div",{ref:r,role:"tabpanel",className:V("mt-2",t),...s}):null});ke.displayName="TabsContent";const ln=bg,cn=jg,Ps=f.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(nh,{ref:r,className:V("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,n.jsx(fg,{asChild:!0,children:n.jsx(gt,{className:"h-4 w-4 opacity-50"})})]}));Ps.displayName=nh.displayName;const Dp=f.forwardRef(({className:t,...e},s)=>n.jsx(rh,{ref:s,className:V("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(Ga,{className:"h-4 w-4"})}));Dp.displayName=rh.displayName;const Op=f.forwardRef(({className:t,...e},s)=>n.jsx(ah,{ref:s,className:V("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(gt,{className:"h-4 w-4"})}));Op.displayName=ah.displayName;const Rs=f.forwardRef(({className:t,children:e,position:s="popper",...r},a)=>n.jsx(gg,{children:n.jsxs(ih,{ref:a,className:V("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[n.jsx(Dp,{}),n.jsx(xg,{className:V("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(Op,{})]})}));Rs.displayName=ih.displayName;const j_=f.forwardRef(({className:t,...e},s)=>n.jsx(oh,{ref:s,className:V("px-2 py-1.5 text-sm font-semibold",t),...e}));j_.displayName=oh.displayName;const St=f.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(lh,{ref:r,className:V("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(vg,{children:n.jsx(ds,{className:"h-4 w-4"})})}),n.jsx(yg,{children:e})]}));St.displayName=lh.displayName;const __=f.forwardRef(({className:t,...e},s)=>n.jsx(ch,{ref:s,className:V("-mx-1 my-1 h-px bg-muted",t),...e}));__.displayName=ch.displayName;const bo=({value:t,onValueChange:e,options:s,placeholder:r="Select an option",disabled:a=!1,className:i})=>n.jsxs(ln,{value:t,onValueChange:e,disabled:a,children:[n.jsx(Ps,{className:i,children:n.jsx(cn,{placeholder:r})}),n.jsx(Rs,{children:s.map(o=>n.jsx(St,{value:o.value,children:o.label},o.value))})]}),w_=Tp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ee({className:t,variant:e,...s}){return n.jsx("div",{className:V(w_({variant:e}),t),...s})}const Lp=({selectedPath:t,onSelect:e,className:s,showSaveButton:r=!1,onSave:a,isSaving:i=!1,simplified:o=!1})=>{const[l,c]=f.useState([]),[d,u]=f.useState(!0),[h,m]=f.useState(null),[p,g]=f.useState(null);f.useEffect(()=>{x()},[]),f.useEffect(()=>{if(t&&l.length>0){const w=l.find(_=>_.path===t);w&&g(w)}},[t,l]);const x=async()=>{try{u(!0),m(null);const w=await X.listClaudeInstallations();if(c(w),t){const _=w.find(N=>N.path===t);_&&g(_)}else w.length>0&&(g(w[0]),e(w[0]))}catch(w){console.error("Failed to load Claude installations:",w),m(w instanceof Error?w.message:"Failed to load Claude installations")}finally{u(!1)}},b=w=>{const _=l.find(N=>N.path===w);_&&(g(_),e(_))},y=w=>{switch(w.installation_type){case"System":return n.jsx(fo,{className:"h-4 w-4"});case"Custom":return n.jsx(qn,{className:"h-4 w-4"});default:return n.jsx(fo,{className:"h-4 w-4"})}},v=w=>{switch(w.installation_type){case"System":return"default";case"Custom":return"secondary";default:return"outline"}};if(d)return o?n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Claude Installation"}),n.jsx("div",{className:"flex items-center justify-center py-3 border rounded-lg",children:n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})})]}):n.jsxs(se,{className:s,children:[n.jsxs(ma,{children:[n.jsx(pa,{children:"Claude Code Installation"}),n.jsx(fa,{children:"Loading available installations..."})]}),n.jsx(Ct,{children:n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})})]});if(h)return o?n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Claude Installation"}),n.jsxs("div",{className:"p-3 border border-destructive/50 rounded-lg bg-destructive/10",children:[n.jsx("p",{className:"text-sm text-destructive mb-2",children:h}),n.jsx(L,{onClick:x,variant:"outline",size:"sm",children:"Retry"})]})]}):n.jsxs(se,{className:s,children:[n.jsxs(ma,{children:[n.jsx(pa,{children:"Claude Code Installation"}),n.jsx(fa,{children:"Error loading installations"})]}),n.jsxs(Ct,{children:[n.jsx("div",{className:"text-sm text-destructive mb-4",children:h}),n.jsx(L,{onClick:x,variant:"outline",size:"sm",children:"Retry"})]})]});const j=l.filter(w=>w.installation_type==="System"),S=l.filter(w=>w.installation_type==="Custom");return o?n.jsxs("div",{className:V("space-y-3",s),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(ce,{htmlFor:"claude-installation",className:"text-sm font-medium",children:"Claude Installation"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select which version of Claude to use"})]}),p&&n.jsx(Ee,{variant:v(p),className:"text-xs",children:p.installation_type})]}),n.jsxs(ln,{value:(p==null?void 0:p.path)||"",onValueChange:b,children:[n.jsx(Ps,{id:"claude-installation",className:"w-full",children:n.jsx(cn,{placeholder:"Choose Claude installation",children:p&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dt,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"font-mono text-sm",children:p.path.split("/").pop()||p.path}),p.version&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",p.version,")"]})]})})}),n.jsx(Rs,{side:"bottom",align:"start",sideOffset:5,children:l.length===0?n.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No Claude installations found"}):n.jsx(n.Fragment,{children:l.map(w=>n.jsx(St,{value:w.path,className:"cursor-pointer hover:bg-accent focus:bg-accent",children:n.jsxs("div",{className:"flex items-center gap-2 py-1",children:[n.jsx(dt,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-mono text-sm",children:w.path}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx("span",{children:w.version||"Unknown version"}),n.jsx("span",{children:""}),n.jsx("span",{children:w.source}),n.jsx(Ee,{variant:v(w),className:"text-xs ml-2",children:w.installation_type})]})]})]})},w.path))})})]}),p&&n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-muted/50 rounded-md",children:[n.jsx(Ot,{className:"h-3.5 w-3.5 text-muted-foreground mt-0.5"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Path:"})," ",n.jsx("code",{className:"font-mono",children:p.path})]})]})]}):n.jsxs(se,{className:s,children:[n.jsxs(ma,{children:[n.jsxs(pa,{className:"flex items-center gap-2",children:[n.jsx(Ul,{className:"h-5 w-5"}),"Claude Code Installation"]}),n.jsx(fa,{children:"Choose your preferred Claude Code installation."})]}),n.jsxs(Ct,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Available Installations"}),n.jsxs(ln,{value:(p==null?void 0:p.path)||"",onValueChange:b,children:[n.jsx(Ps,{children:n.jsx(cn,{placeholder:"Select Claude installation",children:p&&n.jsxs("div",{className:"flex items-center gap-2",children:[y(p),n.jsx("span",{className:"truncate",children:p.path}),n.jsx(Ee,{variant:v(p),className:"text-xs",children:p.installation_type})]})})}),n.jsxs(Rs,{side:"bottom",align:"start",sideOffset:5,children:[j.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:"System Installations"}),j.map(w=>n.jsx(St,{value:w.path,className:"cursor-pointer hover:bg-accent focus:bg-accent",children:n.jsxs("div",{className:"flex items-center gap-2 w-full",children:[y(w),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:w.path}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.version||"Version unknown","  ",w.source]})]}),n.jsx(Ee,{variant:"outline",className:"text-xs",children:"System"})]})},w.path))]}),S.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground",children:"Custom Installations"}),S.map(w=>n.jsx(St,{value:w.path,className:"cursor-pointer hover:bg-accent focus:bg-accent",children:n.jsxs("div",{className:"flex items-center gap-2 w-full",children:[y(w),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:w.path}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.version||"Version unknown","  ",w.source]})]}),n.jsx(Ee,{variant:"outline",className:"text-xs",children:"Custom"})]})},w.path))]})]})]})]}),p&&n.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Selected Installation"}),n.jsx(Ee,{variant:v(p),className:"text-xs",children:p.installation_type})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Path:"})," ",p.path]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Source:"})," ",p.source]}),p.version&&n.jsxs("div",{children:[n.jsx("strong",{children:"Version:"})," ",p.version]})]})]}),r&&n.jsx(L,{onClick:a,disabled:i||!p,className:"w-full",children:i?"Saving...":"Save Selection"})]})]})},yt=Ng,N_=_g,$p=f.forwardRef(({className:t,...e},s)=>n.jsx(dh,{ref:s,className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));$p.displayName=dh.displayName;const mt=f.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(N_,{children:[n.jsx($p,{}),n.jsxs(uh,{ref:r,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,n.jsxs(wg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Ut,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mt.displayName=uh.displayName;const bt=({className:t,...e})=>n.jsx("div",{className:V("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});bt.displayName="DialogHeader";const Wt=({className:t,...e})=>n.jsx("div",{className:V("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wt.displayName="DialogFooter";const pt=f.forwardRef(({className:t,...e},s)=>n.jsx(hh,{ref:s,className:V("text-lg font-semibold leading-none tracking-tight",t),...e}));pt.displayName=hh.displayName;const Gt=f.forwardRef(({className:t,...e},s)=>n.jsx(mh,{ref:s,className:V("text-sm text-muted-foreground",t),...e}));Gt.displayName=mh.displayName;const Ar=f.forwardRef(({className:t,...e},s)=>n.jsx("textarea",{className:V("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));Ar.displayName="Textarea";const k_=()=>{const[t,e]=f.useState([]),[s,r]=f.useState(""),[a,i]=f.useState(null),[o,l]=f.useState(1),[c]=f.useState(25),[d,u]=f.useState(""),[h,m]=f.useState(!1),[p,g]=f.useState(null),[x,b]=f.useState(null),[y,v]=f.useState(null),[j,S]=f.useState(null),[w,_]=f.useState(!1),[N,C]=f.useState(!1),[P,O]=f.useState(""),[B,U]=f.useState(null),[G,R]=f.useState(null),[z,re]=f.useState(null);f.useEffect(()=>{A()},[]),f.useEffect(()=>{s&&F(1)},[s]);const A=async()=>{try{m(!0),g(null);const k=await X.storageListTables();e(k),k.length>0&&!s&&r(k[0].name)}catch(k){console.error("Failed to load tables:",k),g("Failed to load tables")}finally{m(!1)}},F=async(k,E)=>{if(s)try{m(!0),g(null);const q=await X.storageReadTable(s,k,c,E||d||void 0);i(q),l(k)}catch(q){console.error("Failed to load table data:",q),g("Failed to load table data")}finally{m(!1)}},ee=f.useCallback(k=>{u(k),F(1,k)},[s]),D=k=>{if(!a)return{};const E=a.columns.filter(ie=>ie.pk),q={};return E.forEach(ie=>{q[ie.name]=k[ie.name]}),q},Z=async k=>{if(!(!x||!s))try{m(!0);const E=D(x);await X.storageUpdateRow(s,E,k),await F(o),b(null)}catch(E){console.error("Failed to update row:",E),g("Failed to update row")}finally{m(!1)}},me=async()=>{if(!(!j||!s))try{m(!0);const k=D(j);await X.storageDeleteRow(s,k),await F(o),S(null)}catch(k){console.error("Failed to delete row:",k),g("Failed to delete row")}finally{m(!1)}},fe=async k=>{if(s)try{m(!0),await X.storageInsertRow(s,k),await F(o),v(null)}catch(E){console.error("Failed to insert row:",E),g("Failed to insert row")}finally{m(!1)}},be=async()=>{try{m(!0),R(null);const k=await X.storageExecuteSql(P);U(k),k.rows_affected!==void 0&&(await A(),s&&await F(o))}catch(k){console.error("Failed to execute SQL:",k),R(k instanceof Error?k.message:"Failed to execute SQL")}finally{m(!1)}},le=async()=>{try{m(!0),await X.storageResetDatabase(),await A(),r(""),i(null),_(!1),re({message:"Database Reset Complete: The database has been restored to its default state with empty tables (agents, agent_runs, app_settings).",type:"success"})}catch(k){console.error("Failed to reset database:",k),g("Failed to reset database"),re({message:"Reset Failed: Failed to reset the database. Please try again.",type:"error"})}finally{m(!1)}},$=(k,E=100)=>{if(k===null)return"NULL";if(k===void 0)return"";if(typeof k=="boolean")return k?"true":"false";if(typeof k=="object")return JSON.stringify(k);const q=String(k);return q.length>E?q.substring(0,E)+"...":q},M=k=>{const E=k.type_name.toUpperCase();return E.includes("INT")||E.includes("REAL")||E.includes("FLOAT")||E.includes("DOUBLE")?"number":E.includes("BOOL")?"checkbox":"text"};return n.jsxs("div",{className:"space-y-6",children:[n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(hp,{className:"h-4 w-4 text-primary"}),n.jsx("h3",{className:"text-sm font-semibold",children:"Database Storage"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>C(!0),className:"gap-2 h-8 text-xs",children:[n.jsx(dt,{className:"h-3 w-3"}),"SQL Query"]}),n.jsxs(L,{variant:"destructive",size:"sm",onClick:()=>_(!0),className:"gap-2 h-8 text-xs",children:[n.jsx(jp,{className:"h-3 w-3"}),"Reset DB"]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(ln,{value:s,onValueChange:r,children:[n.jsx(Ps,{className:"w-[200px] h-8 text-xs",children:n.jsx(cn,{placeholder:"Select a table",children:s&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kj,{className:"h-3 w-3"}),s]})})}),n.jsx(Rs,{children:t.map(k=>n.jsx(St,{value:k.name,className:"text-xs",children:n.jsxs("div",{className:"flex items-center justify-between w-full",children:[n.jsx("span",{children:k.name}),n.jsxs("span",{className:"text-[10px] text-muted-foreground ml-2",children:[k.row_count," rows"]})]})},k.name))})]}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-muted-foreground"}),n.jsx(xe,{placeholder:"Search in table...",value:d,onChange:k=>ee(k.target.value),className:"pl-8 h-8 text-xs"})]}),a&&n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>v({}),className:"gap-2 h-8 text-xs",children:[n.jsx(nt,{className:"h-3 w-3"}),"New Row"]})]})]})}),a&&n.jsxs(se,{className:"overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b bg-muted/50",children:[a.columns.map(k=>n.jsxs("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[k.name,k.pk&&n.jsx("span",{className:"text-[10px] text-primary",children:"PK"})]}),n.jsx("div",{className:"text-[10px] font-normal",children:k.type_name})]},k.name)),n.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-muted-foreground",children:"Actions"})]})}),n.jsx("tbody",{children:n.jsx(Te,{children:a.rows.map((k,E)=>n.jsxs(K.tr,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"border-b hover:bg-muted/25 transition-colors",children:[a.columns.map(q=>{const ie=k[q.name],je=$(ie,50),Ce=ie===null?"NULL":ie===void 0?"":typeof ie=="object"?JSON.stringify(ie,null,2):String(ie),ut=Ce.length>50;return n.jsx("td",{className:"px-3 py-2 text-xs font-mono",children:ut?n.jsx(ka,{children:n.jsxs(vo,{children:[n.jsx(yo,{asChild:!0,children:n.jsx("span",{className:"cursor-help block truncate max-w-[200px]",children:je})}),n.jsx(Sa,{side:"bottom",className:"max-w-[500px] max-h-[300px] overflow-auto",children:n.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:Ce})})]})}):n.jsx("span",{className:"block truncate max-w-[200px]",children:je})},q.name)}),n.jsx("td",{className:"px-3 py-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>b(k),className:"h-6 w-6",children:n.jsx(go,{className:"h-3 w-3"})}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>S(k),className:"h-6 w-6 hover:text-destructive",children:n.jsx(Nt,{className:"h-3 w-3"})})]})})]},E))})})]})}),a.total_pages>1&&n.jsxs("div",{className:"flex items-center justify-between p-3 border-t",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Showing ",(o-1)*c+1," to"," ",Math.min(o*c,a.total_rows)," of"," ",a.total_rows," rows"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>F(o-1),disabled:o===1,className:"h-7 text-xs",children:[n.jsx(Tr,{className:"h-3 w-3"}),"Previous"]}),n.jsxs("div",{className:"text-xs",children:["Page ",o," of ",a.total_pages]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>F(o+1),disabled:o===a.total_pages,className:"h-7 text-xs",children:["Next",n.jsx(Ve,{className:"h-3 w-3"})]})]})]})]}),h&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),p&&n.jsx(se,{className:"p-6 border-destructive/50 bg-destructive/10",children:n.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[n.jsx(An,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:p})]})}),n.jsx(yt,{open:!!x,onOpenChange:()=>b(null),children:n.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"Edit Row"}),n.jsxs(Gt,{children:["Update the values for this row in the ",s," table."]})]}),x&&a&&n.jsx("div",{className:"space-y-4",children:a.columns.map(k=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ce,{htmlFor:`edit-${k.name}`,children:[k.name,k.pk&&n.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"(Primary Key)"})]}),M(k)==="checkbox"?n.jsx("input",{type:"checkbox",id:`edit-${k.name}`,checked:!!x[k.name],onChange:E=>b({...x,[k.name]:E.target.checked}),disabled:k.pk,className:"h-4 w-4"}):n.jsx(xe,{id:`edit-${k.name}`,type:M(k),value:x[k.name]??"",onChange:E=>b({...x,[k.name]:E.target.value}),disabled:k.pk,placeholder:k.dflt_value||"NULL"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type: ",k.type_name,k.notnull&&", NOT NULL",k.dflt_value&&`, Default: ${k.dflt_value}`]})]},k.name))}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>b(null),children:"Cancel"}),n.jsx(L,{onClick:()=>Z(x),disabled:h,children:h?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):"Update"})]})]})}),n.jsx(yt,{open:!!y,onOpenChange:()=>v(null),children:n.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"New Row"}),n.jsxs(Gt,{children:["Add a new row to the ",s," table."]})]}),y&&a&&n.jsx("div",{className:"space-y-4",children:a.columns.map(k=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ce,{htmlFor:`new-${k.name}`,children:[k.name,k.notnull&&n.jsx("span",{className:"text-xs text-destructive ml-2",children:"(Required)"})]}),M(k)==="checkbox"?n.jsx("input",{type:"checkbox",id:`new-${k.name}`,checked:y[k.name]||!1,onChange:E=>v({...y,[k.name]:E.target.checked}),className:"h-4 w-4"}):n.jsx(xe,{id:`new-${k.name}`,type:M(k),value:y[k.name]??"",onChange:E=>v({...y,[k.name]:E.target.value}),placeholder:k.dflt_value||"NULL"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type: ",k.type_name,k.dflt_value&&`, Default: ${k.dflt_value}`]})]},k.name))}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>v(null),children:"Cancel"}),n.jsx(L,{onClick:()=>fe(y),disabled:h,children:h?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):"Insert"})]})]})}),n.jsx(yt,{open:!!j,onOpenChange:()=>S(null),children:n.jsxs(mt,{children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"Delete Row"}),n.jsx(Gt,{children:"Are you sure you want to delete this row? This action cannot be undone."})]}),j&&n.jsx("div",{className:"rounded-md bg-muted p-4",children:n.jsx("pre",{className:"text-xs font-mono overflow-x-auto max-h-[200px] overflow-y-auto",children:JSON.stringify(Object.fromEntries(Object.entries(j).map(([k,E])=>[k,typeof E=="string"&&E.length>100?E.substring(0,100)+"...":E])),null,2)})}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>S(null),children:"Cancel"}),n.jsx(L,{variant:"destructive",onClick:me,disabled:h,children:h?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):"Delete"})]})]})}),n.jsx(yt,{open:w,onOpenChange:_,children:n.jsxs(mt,{children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"Reset Database"}),n.jsx(Gt,{children:"This will delete all data and recreate the database with its default structure (empty tables for agents, agent_runs, and app_settings). The database will be restored to the same state as when you first installed the app. This action cannot be undone."})]}),n.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-md bg-destructive/10 text-destructive",children:[n.jsx(An,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"All your agents, runs, and settings will be permanently deleted!"})]}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),n.jsx(L,{variant:"destructive",onClick:le,disabled:h,children:h?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):"Reset Database"})]})]})}),n.jsx(yt,{open:N,onOpenChange:C,children:n.jsxs(mt,{className:"max-w-4xl max-h-[80vh]",children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"SQL Query Editor"}),n.jsx(Gt,{children:"Execute raw SQL queries on the database. Use with caution."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"sql-query",children:"SQL Query"}),n.jsx(Ar,{id:"sql-query",value:P,onChange:k=>O(k.target.value),placeholder:"SELECT * FROM agents LIMIT 10;",className:"font-mono text-sm h-32"})]}),G&&n.jsx("div",{className:"p-3 rounded-md bg-destructive/10 text-destructive text-sm",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ut,{className:"h-4 w-4"}),G]})}),B&&n.jsx("div",{className:"space-y-2",children:B.rows_affected!==void 0?n.jsx("div",{className:"p-3 rounded-md bg-green-500/10 text-green-600 dark:text-green-400 text-sm",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ds,{className:"h-4 w-4"}),"Query executed successfully. ",B.rows_affected," rows affected.",B.last_insert_rowid&&n.jsxs("span",{children:["Last insert ID: ",B.last_insert_rowid]})]})}):n.jsx("div",{className:"border rounded-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{children:n.jsx("tr",{className:"border-b bg-muted/50",children:B.columns.map((k,E)=>n.jsx("th",{className:"px-2 py-1 text-left font-medium",children:k},E))})}),n.jsx("tbody",{children:B.rows.map((k,E)=>n.jsx("tr",{className:"border-b",children:k.map((q,ie)=>{const je=$(q,50),Ce=q===null?"NULL":q===void 0?"":typeof q=="object"?JSON.stringify(q,null,2):String(q),ut=Ce.length>50;return n.jsx("td",{className:"px-2 py-1 font-mono",children:ut?n.jsx(ka,{children:n.jsxs(vo,{children:[n.jsx(yo,{asChild:!0,children:n.jsx("span",{className:"cursor-help block truncate max-w-[200px]",children:je})}),n.jsx(Sa,{side:"bottom",className:"max-w-[500px] max-h-[300px] overflow-auto",children:n.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:Ce})})]})}):n.jsx("span",{className:"block truncate max-w-[200px]",children:je})},ie)})},E))})]})})})})]}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>{C(!1),O(""),U(null),R(null)},children:"Close"}),n.jsx(L,{onClick:be,disabled:h||!P.trim(),children:h?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):"Execute"})]})]})}),n.jsx(gs,{children:z&&n.jsx(fs,{message:z.message,type:z.type,onDismiss:()=>re(null)})})]})};class it{static mergeConfigs(e,s,r){const a={},i=["PreToolUse","PostToolUse"],o=["Notification","Stop","SubagentStop"];for(const l of i){let c=[...e[l]||[]];s[l]&&(c=this.mergeMatchers(c,s[l])),r[l]&&(c=this.mergeMatchers(c,r[l])),c.length>0&&(a[l]=c)}for(const l of o){const c=[];e[l]&&c.push(...e[l]),s[l]&&c.push(...s[l]),r[l]&&c.push(...r[l]),c.length>0&&(a[l]=c)}return a}static mergeMatchers(e,s){const r=[...e];for(const a of s){const i=r.findIndex(o=>o.matcher===a.matcher);i>=0?r[i]=a:r.push(a)}return r}static async validateConfig(e){const s=[],r=[];if(!e)return{valid:!0,errors:s,warnings:r};const a=["PreToolUse","PostToolUse"],i=["Notification","Stop","SubagentStop"];for(const o of a){const l=e[o];if(!(!l||!Array.isArray(l)))for(const c of l){if(c.matcher)try{new RegExp(c.matcher)}catch(d){s.push({event:o,matcher:c.matcher,message:`Invalid regex pattern: ${d instanceof Error?d.message:"Unknown error"}`})}if(c.hooks&&Array.isArray(c.hooks))for(const d of c.hooks){(!d.command||!d.command.trim())&&s.push({event:o,matcher:c.matcher,message:"Empty command"});const u=this.checkDangerousPatterns(d.command||"");r.push(...u.map(h=>({event:o,matcher:c.matcher,command:d.command||"",message:h})))}}}for(const o of i){const l=e[o];if(!(!l||!Array.isArray(l)))for(const c of l){(!c.command||!c.command.trim())&&s.push({event:o,message:"Empty command"});const d=this.checkDangerousPatterns(c.command||"");r.push(...d.map(u=>({event:o,command:c.command||"",message:u})))}}return{valid:s.length===0,errors:s,warnings:r}}static checkDangerousPatterns(e){const s=[];if(!e||typeof e!="string")return s;const r=[{pattern:/rm\s+-rf\s+\/(?:\s|$)/,message:"Destructive command on root directory"},{pattern:/rm\s+-rf\s+~/,message:"Destructive command on home directory"},{pattern:/:\s*\(\s*\)\s*\{.*\}\s*;/,message:"Fork bomb pattern detected"},{pattern:/curl.*\|\s*(?:bash|sh)/,message:"Downloading and executing remote code"},{pattern:/wget.*\|\s*(?:bash|sh)/,message:"Downloading and executing remote code"},{pattern:/>\/dev\/sda/,message:"Direct disk write operation"},{pattern:/sudo\s+/,message:"Elevated privileges required"},{pattern:/dd\s+.*of=\/dev\//,message:"Dangerous disk operation"},{pattern:/mkfs\./,message:"Filesystem formatting command"},{pattern:/:(){ :|:& };:/,message:"Fork bomb detected"}];for(const{pattern:a,message:i}of r)a.test(e)&&s.push(i);return e.includes("$")&&!e.includes('"$')&&s.push("Unquoted shell variable detected - potential code injection risk"),s}static escapeCommand(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\$/g,"\\$").replace(/`/g,"\\`")}static generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}const S_=Object.freeze(Object.defineProperty({__proto__:null,HooksManager:it},Symbol.toStringTag,{value:"Module"})),Vp=["Task","Bash","Glob","Grep","Read","Edit","MultiEdit","Write","WebFetch","WebSearch","Notebook.*","Edit|Write","mcp__.*","mcp__memory__.*","mcp__filesystem__.*","mcp__github__.*"],C_=[{id:"log-bash-commands",name:"Log Shell Commands",description:"Log all bash commands to a file for auditing",event:"PreToolUse",matcher:"Bash",commands:[`jq -r '"(.tool_input.command) - (.tool_input.description // "No description")"' >> ~/.claude/bash-command-log.txt`]},{id:"format-on-save",name:"Auto-format Code",description:"Run code formatters after file modifications",event:"PostToolUse",matcher:"Write|Edit|MultiEdit",commands:['if [[ "$( jq -r .tool_input.file_path )" =~ \\.(ts|tsx|js|jsx)$ ]]; then prettier --write "$( jq -r .tool_input.file_path )"; fi','if [[ "$( jq -r .tool_input.file_path )" =~ \\.go$ ]]; then gofmt -w "$( jq -r .tool_input.file_path )"; fi']},{id:"git-commit-guard",name:"Protect Main Branch",description:"Prevent direct commits to main/master branch",event:"PreToolUse",matcher:"Bash",commands:['if [[ "$(jq -r .tool_input.command)" =~ "git commit" ]] && [[ "$(git branch --show-current 2>/dev/null)" =~ ^(main|master)$ ]]; then echo "Direct commits to main/master branch are not allowed"; exit 2; fi']},{id:"custom-notification",name:"Custom Notifications",description:"Send custom notifications when Claude needs attention",event:"Notification",commands:['osascript -e "display notification \\"$(jq -r .message)\\" with title \\"$(jq -r .title)\\" sound name \\"Glass\\""']},{id:"continue-on-tests",name:"Auto-continue on Test Success",description:"Automatically continue when tests pass",event:"Stop",commands:[`if grep -q "All tests passed" "$( jq -r .transcript_path )"; then echo '{"decision": "block", "reason": "All tests passed. Continue with next task."}'; fi`]}],vn={PreToolUse:{label:"Pre Tool Use",description:"Runs before tool calls, can block and provide feedback",icon:n.jsx(ei,{className:"h-4 w-4"})},PostToolUse:{label:"Post Tool Use",description:"Runs after successful tool completion",icon:n.jsx(sb,{className:"h-4 w-4"})},Notification:{label:"Notification",description:"Customizes notifications when Claude needs attention",icon:n.jsx(on,{className:"h-4 w-4"})},Stop:{label:"Stop",description:"Runs when Claude finishes responding",icon:n.jsx(ab,{className:"h-4 w-4"})},SubagentStop:{label:"Subagent Stop",description:"Runs when a Claude subagent (Task) finishes",icon:n.jsx(dt,{className:"h-4 w-4"})}},Pr=({projectPath:t,scope:e,readOnly:s=!1,className:r,onChange:a,hideActions:i=!1})=>{const[o,l]=f.useState("PreToolUse"),[c,d]=f.useState(!1),[u,h]=f.useState([]),[m,p]=f.useState([]),g=He.useRef(!0),[x,b]=f.useState(!1),[y,v]=f.useState(!1),[j,S]=f.useState(!1),[w,_]=f.useState(null),[N,C]=f.useState({}),P=["PreToolUse","PostToolUse"],O=["Notification","Stop","SubagentStop"],[B,U]=f.useState(()=>{const M={PreToolUse:[],PostToolUse:[],Notification:[],Stop:[],SubagentStop:[]};return P.forEach(k=>{const E=N==null?void 0:N[k];E&&Array.isArray(E)&&(M[k]=E.map(q=>({...q,id:it.generateId(),expanded:!1,hooks:(q.hooks||[]).map(ie=>({...ie,id:it.generateId()}))})))}),O.forEach(k=>{const E=N==null?void 0:N[k];E&&Array.isArray(E)&&(M[k]=E.map(q=>({...q,id:it.generateId()})))}),M});f.useEffect(()=>{e==="user"||t?(S(!0),_(null),X.getHooksConfig(e,t).then(M=>{C(M||{}),b(!1)}).catch(M=>{console.error("Failed to load hooks configuration:",M),_(M instanceof Error?M.message:"Failed to load hooks configuration"),C({})}).finally(()=>{S(!1)})):C({})},[t,e]),f.useEffect(()=>{g.current=!0,b(!1);const M={PreToolUse:[],PostToolUse:[],Notification:[],Stop:[],SubagentStop:[]};P.forEach(k=>{const E=N==null?void 0:N[k];E&&Array.isArray(E)&&(M[k]=E.map(q=>({...q,id:it.generateId(),expanded:!1,hooks:(q.hooks||[]).map(ie=>({...ie,id:it.generateId()}))})))}),O.forEach(k=>{const E=N==null?void 0:N[k];E&&Array.isArray(E)&&(M[k]=E.map(q=>({...q,id:it.generateId()})))}),U(M)},[N]),f.useEffect(()=>{if(g.current){g.current=!1;return}b(!0)},[B]),f.useEffect(()=>{a&&a(x,()=>{const k={};return P.forEach(E=>{const q=B[E];q.length>0&&(k[E]=q.map(({id:ie,expanded:je,...Ce})=>({...Ce,hooks:Ce.hooks.map(({id:ut,...rs})=>rs)})))}),O.forEach(E=>{const q=B[E];q.length>0&&(k[E]=q.map(({id:ie,...je})=>je))}),k})},[x,B,a]);const G=async()=>{if(e!=="user"&&!t)return;v(!0);const M={};P.forEach(k=>{const E=B[k];E.length>0&&(M[k]=E.map(({id:q,expanded:ie,...je})=>({...je,hooks:je.hooks.map(({id:Ce,...ut})=>ut)})))}),O.forEach(k=>{const E=B[k];E.length>0&&(M[k]=E.map(({id:q,...ie})=>ie))});try{await X.updateHooksConfig(e,M,t),C(M),b(!1)}catch(k){console.error("Failed to save hooks:",k),_(k instanceof Error?k.message:"Failed to save hooks")}finally{v(!1)}},R=M=>{if(!P.includes(M))return;const k={id:it.generateId(),matcher:"",hooks:[],expanded:!0};U(E=>({...E,[M]:[...E[M],k]}))},z=M=>{if(!O.includes(M))return;const k={id:it.generateId(),type:"command",command:""};U(E=>({...E,[M]:[...E[M],k]}))},re=(M,k,E)=>{P.includes(M)&&U(q=>({...q,[M]:q[M].map(ie=>ie.id===k?{...ie,...E}:ie)}))},A=(M,k)=>{P.includes(M)&&U(E=>({...E,[M]:E[M].filter(q=>q.id!==k)}))},F=(M,k,E)=>{O.includes(M)&&U(q=>({...q,[M]:q[M].map(ie=>ie.id===k?{...ie,...E}:ie)}))},ee=(M,k)=>{O.includes(M)&&U(E=>({...E,[M]:E[M].filter(q=>q.id!==k)}))},D=M=>{if(P.includes(M.event)){const k={id:it.generateId(),matcher:M.matcher,hooks:M.commands.map(E=>({id:it.generateId(),type:"command",command:E})),expanded:!0};U(E=>({...E,[M.event]:[...E[M.event],k]}))}else{const k=M.commands.map(E=>({id:it.generateId(),type:"command",command:E}));U(E=>({...E,[M.event]:[...E[M.event],...k]}))}l(M.event),d(!1)},Z=async()=>{if(!N){h([]),p([]);return}const M=await it.validateConfig(N);h(M.errors.map(k=>k.message)),p(M.warnings.map(k=>`${k.message} in command: ${(k.command||"").substring(0,50)}...`))};f.useEffect(()=>{Z()},[N]);const me=(M,k)=>{if(!P.includes(M))return;const E={id:it.generateId(),type:"command",command:""};U(q=>({...q,[M]:q[M].map(ie=>ie.id===k?{...ie,hooks:[...ie.hooks,E]}:ie)}))},fe=(M,k,E,q)=>{P.includes(M)&&U(ie=>({...ie,[M]:ie[M].map(je=>je.id===k?{...je,hooks:je.hooks.map(Ce=>Ce.id===E?{...Ce,...q}:Ce)}:je)}))},be=(M,k,E)=>{P.includes(M)&&U(q=>({...q,[M]:q[M].map(ie=>ie.id===k?{...ie,hooks:ie.hooks.filter(je=>je.id!==E)}:ie)}))},le=(M,k)=>n.jsxs(se,{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(L,{variant:"ghost",size:"sm",className:"p-0 h-6 w-6",onClick:()=>re(M,k.id,{expanded:!k.expanded}),children:k.expanded?n.jsx(gt,{className:"h-4 w-4"}):n.jsx(Ve,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ce,{htmlFor:`matcher-${k.id}`,children:"Pattern"}),n.jsx(ka,{children:n.jsxs(vo,{children:[n.jsx(yo,{asChild:!0,children:n.jsx(Ot,{className:"h-3 w-3 text-muted-foreground"})}),n.jsx(Sa,{children:n.jsx("p",{children:"Tool name pattern (regex supported). Leave empty to match all tools."})})]})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xe,{id:`matcher-${k.id}`,placeholder:"e.g., Bash, Edit|Write, mcp__.*",value:k.matcher||"",onChange:E=>re(M,k.id,{matcher:E.target.value}),disabled:s,className:"flex-1"}),n.jsxs(ln,{value:k.matcher||"custom",onValueChange:E=>{E!=="custom"&&re(M,k.id,{matcher:E})},disabled:s,children:[n.jsx(Ps,{className:"w-40",children:n.jsx(cn,{placeholder:"Common patterns"})}),n.jsxs(Rs,{children:[n.jsx(St,{value:"custom",children:"Custom"}),Vp.map(E=>n.jsx(St,{value:E,children:E},E))]})]}),!s&&n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>A(M,k.id),children:n.jsx(Nt,{className:"h-4 w-4"})})]})]})]}),n.jsx(Te,{children:k.expanded&&n.jsx(K.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pl-10",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{children:"Commands"}),!s&&n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>me(M,k.id),children:[n.jsx(nt,{className:"h-3 w-3 mr-1"}),"Add Command"]})]}),k.hooks.length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"No commands added yet"}):n.jsx("div",{className:"space-y-2",children:k.hooks.map(E=>n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-start gap-2",children:n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(Ar,{placeholder:"Enter shell command...",value:E.command||"",onChange:q=>fe(M,k.id,E.id,{command:q.target.value}),disabled:s,className:"font-mono text-sm min-h-[80px]"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"h-3 w-3 text-muted-foreground"}),n.jsx(xe,{type:"number",placeholder:"60",value:E.timeout||"",onChange:q=>fe(M,k.id,E.id,{timeout:q.target.value?parseInt(q.target.value):void 0}),disabled:s,className:"w-20 h-8"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]}),!s&&n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>be(M,k.id,E.id),children:n.jsx(Nt,{className:"h-4 w-4"})})]})]})}),(()=>{const q=it.checkDangerousPatterns(E.command||"");return q.length>0&&n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-500/10 rounded-md",children:[n.jsx(An,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),n.jsx("div",{className:"space-y-1",children:q.map((ie,je)=>n.jsx("p",{className:"text-xs text-yellow-600",children:ie},je))})]})})()]},E.id))})]})})})]},k.id),$=(M,k)=>n.jsxs(se,{className:"p-4 space-y-2",children:[n.jsx("div",{className:"flex items-start gap-2",children:n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(Ar,{placeholder:"Enter shell command...",value:k.command||"",onChange:E=>F(M,k.id,{command:E.target.value}),disabled:s,className:"font-mono text-sm min-h-[80px]"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"h-3 w-3 text-muted-foreground"}),n.jsx(xe,{type:"number",placeholder:"60",value:k.timeout||"",onChange:E=>F(M,k.id,{timeout:E.target.value?parseInt(E.target.value):void 0}),disabled:s,className:"w-20 h-8"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"seconds"})]}),!s&&n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>ee(M,k.id),children:n.jsx(Nt,{className:"h-4 w-4"})})]})]})}),(()=>{const E=it.checkDangerousPatterns(k.command||"");return E.length>0&&n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-500/10 rounded-md",children:[n.jsx(An,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),n.jsx("div",{className:"space-y-1",children:E.map((q,ie)=>n.jsx("p",{className:"text-xs text-yellow-600",children:q},ie))})]})})()]},k.id);return n.jsxs("div",{className:V("space-y-6",r),children:[j&&n.jsxs("div",{className:"flex items-center justify-center p-8",children:[n.jsx(ye,{className:"h-6 w-6 animate-spin mr-2"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading hooks configuration..."})]}),w&&!j&&n.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-xs text-destructive flex items-center gap-2",children:[n.jsx(An,{className:"h-4 w-4 flex-shrink-0"}),w]}),!j&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Hooks Configuration"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ee,{variant:e==="project"?"secondary":e==="local"?"outline":"default",children:[e==="project"?"Project":e==="local"?"Local":"User"," Scope"]}),!s&&n.jsxs(n.Fragment,{children:[n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[n.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Templates"]}),!i&&n.jsxs(L,{variant:x?"default":"outline",size:"sm",onClick:G,disabled:!x||y||!t,children:[y?n.jsx(ye,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(fn,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save"]})]})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Configure shell commands to execute at various points in Claude Code's lifecycle.",e==="local"&&" These settings are not committed to version control."]}),x&&!s&&n.jsx("p",{className:"text-sm text-amber-600",children:"You have unsaved changes. Click Save to persist them."})]}),u.length>0&&n.jsxs("div",{className:"p-3 bg-red-500/10 rounded-md space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-red-600",children:"Validation Errors:"}),u.map((M,k)=>n.jsxs("p",{className:"text-xs text-red-600",children:[" ",M]},k))]}),m.length>0&&n.jsxs("div",{className:"p-3 bg-yellow-500/10 rounded-md space-y-1",children:[n.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Security Warnings:"}),m.map((M,k)=>n.jsxs("p",{className:"text-xs text-yellow-600",children:[" ",M]},k))]}),n.jsxs(Ds,{value:o,onValueChange:M=>l(M),children:[n.jsx(xs,{className:"w-full",children:Object.keys(vn).map(M=>{const k=P.includes(M),E=B[M].length;return n.jsxs(Ne,{value:M,className:"flex items-center gap-2",children:[vn[M].icon,n.jsx("span",{className:"hidden sm:inline",children:vn[M].label}),E>0&&n.jsx(Ee,{variant:"secondary",className:"ml-1 h-5 px-1",children:E})]},M)})}),Object.keys(vn).map(M=>{const k=P.includes(M),E=B[M];return n.jsxs(ke,{value:M,className:"space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:vn[M].description})}),E.length===0?n.jsxs(se,{className:"p-8 text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"No hooks configured for this event"}),!s&&n.jsxs(L,{onClick:()=>k?R(M):z(M),children:[n.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Hook"]})]}):n.jsxs("div",{className:"space-y-4",children:[k?E.map(q=>le(M,q)):E.map(q=>$(M,q)),!s&&n.jsxs(L,{variant:"outline",onClick:()=>k?R(M):z(M),className:"w-full",children:[n.jsx(nt,{className:"h-4 w-4 mr-2"}),"Add Another ",k?"Matcher":"Command"]})]})]},M)})]}),n.jsx(yt,{open:c,onOpenChange:d,children:n.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[n.jsxs(bt,{children:[n.jsx(pt,{children:"Hook Templates"}),n.jsx(Gt,{children:"Choose a pre-configured hook template to get started quickly"})]}),n.jsx("div",{className:"space-y-4 py-4",children:C_.map(M=>n.jsx(se,{className:"p-4 cursor-pointer hover:bg-accent",onClick:()=>D(M),children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium",children:M.name}),n.jsx(Ee,{children:vn[M.event].label})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),P.includes(M.event)&&M.matcher&&n.jsxs("p",{className:"text-xs font-mono bg-muted px-2 py-1 rounded inline-block",children:["Matcher: ",M.matcher]})]})},M.id))})]})})]})]})},Os=()=>t_();var I=typeof window<"u"?window:void 0,_t=typeof globalThis<"u"?globalThis:I,zp=Array.prototype,Dd=zp.forEach,Od=zp.indexOf,Et=_t==null?void 0:_t.navigator,ne=_t==null?void 0:_t.document,vt=_t==null?void 0:_t.location,jo=_t==null?void 0:_t.fetch,_o=_t!=null&&_t.XMLHttpRequest&&"withCredentials"in new _t.XMLHttpRequest?_t.XMLHttpRequest:void 0,Ld=_t==null?void 0:_t.AbortController,xt=Et==null?void 0:Et.userAgent,ge=I??{},ls={DEBUG:!1,LIB_VERSION:"1.258.3"},Ei="$copy_autocapture",E_=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],cs=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),T_=["fatal","error","warning","log","info","debug"];function ve(t,e){return t.indexOf(e)!==-1}var si=function(t){return t.trim()},wo=function(t){return t.replace(/^\$/,"")},M_=Array.isArray,Up=Object.prototype,Bp=Up.hasOwnProperty,ni=Up.toString,Me=M_||function(t){return ni.call(t)==="[object Array]"},It=t=>typeof t=="function",Le=t=>t===Object(t)&&!Me(t),En=t=>{if(Le(t)){for(var e in t)if(Bp.call(t,e))return!1;return!0}return!1},J=t=>t===void 0,$e=t=>ni.call(t)=="[object String]",No=t=>$e(t)&&t.trim().length===0,Ls=t=>t===null,_e=t=>J(t)||Ls(t),lt=t=>ni.call(t)=="[object Number]",Kt=t=>ni.call(t)==="[object Boolean]",A_=t=>t instanceof FormData,P_=t=>ve(E_,t),Hp=t=>{var e={t:function(s){if(I&&(ls.DEBUG||ge.POSTHOG_DEBUG)&&!J(I.console)&&I.console){for(var r=("__rrweb_original__"in I.console[s])?I.console[s].__rrweb_original__:I.console[s],a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];r(t,...i)}},info:function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];e.t("log",...r)},warn:function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];e.t("warn",...r)},error:function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];e.t("error",...r)},critical:function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];console.error(t,...r)},uninitializedWarning:s=>{e.error("You must initialize PostHog before calling "+s)},createLogger:s=>Hp(t+" "+s)};return e},ae=Hp("[PostHog.js]"),Xe=ae.createLogger,R_=Xe("[ExternalScriptsLoader]"),$d=(t,e,s)=>{if(t.config.disable_external_dependency_loading)return R_.warn(e+" was requested but loading of external scripts is disabled."),s("Loading of external scripts is disabled");var r=ne==null?void 0:ne.querySelectorAll("script");if(r){for(var a=0;a<r.length;a++)if(r[a].src===e)return s()}var i=()=>{if(!ne)return s("document not found");var o=ne.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=d=>s(void 0,d),o.onerror=d=>s(d),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return s("prepare_external_dependency_script returned null");var l,c=ne.querySelectorAll("body > script");c.length>0?(l=c[0].parentNode)==null||l.insertBefore(o,c[0]):ne.body.appendChild(o)};ne!=null&&ne.body?i():ne==null||ne.addEventListener("DOMContentLoaded",i)};function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)({}).hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},te.apply(null,arguments)}function qp(t,e){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;s[r]=t[r]}return s}ge.__PosthogExtensions__=ge.__PosthogExtensions__||{},ge.__PosthogExtensions__.loadExternalDependency=(t,e,s)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var a=3e5;r=r+"&t="+Math.floor(Date.now()/a)*a}var i=t.requestRouter.endpointFor("assets",r);$d(t,i,s)},ge.__PosthogExtensions__.loadSiteApp=(t,e,s)=>{var r=t.requestRouter.endpointFor("api",e);$d(t,r,s)};var Ca={};function Es(t,e,s){if(Me(t)){if(Dd&&t.forEach===Dd)t.forEach(e,s);else if("length"in t&&t.length===+t.length){for(var r=0,a=t.length;r<a;r++)if(r in t&&e.call(s,t[r],r)===Ca)return}}}function Se(t,e,s){if(!_e(t)){if(Me(t))return Es(t,e,s);if(A_(t)){for(var r of t.entries())if(e.call(s,r[1],r[0])===Ca)return}else for(var a in t)if(Bp.call(t,a)&&e.call(s,t[a],a)===Ca)return}}var Ue=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];return Es(s,function(a){for(var i in a)a[i]!==void 0&&(t[i]=a[i])}),t},ri=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),r=1;r<e;r++)s[r-1]=arguments[r];return Es(s,function(a){Es(a,function(i){t.push(i)})}),t};function ga(t){for(var e=Object.keys(t),s=e.length,r=new Array(s);s--;)r[s]=[e[s],t[e[s]]];return r}var Vd=function(t){try{return t()}catch{return}},I_=function(t){return function(){try{for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return t.apply(this,s)}catch(a){ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),ae.critical(a)}}},Jl=function(t){var e={};return Se(t,function(s,r){($e(s)&&s.length>0||lt(s))&&(e[r]=s)}),e};function F_(t,e){return s=t,r=i=>$e(i)&&!Ls(e)?i.slice(0,e):i,a=new Set,function i(o,l){return o!==Object(o)?r?r(o,l):o:a.has(o)?void 0:(a.add(o),Me(o)?(c=[],Es(o,d=>{c.push(i(d))})):(c={},Se(o,(d,u)=>{a.has(d)||(c[u]=i(d,u))})),c);var c}(s);var s,r,a}var D_=["herokuapp.com","vercel.app","netlify.app"];function O_(t){var e=t==null?void 0:t.hostname;if(!$e(e))return!1;var s=e.split(".").slice(-2).join(".");for(var r of D_)if(s===r)return!1;return!0}function Wp(t,e){for(var s=0;s<t.length;s++)if(e(t[s]))return t[s]}function Fe(t,e,s,r){var{capture:a=!1,passive:i=!0}=r??{};t==null||t.addEventListener(e,s,{capture:a,passive:i})}var Gp="$people_distinct_id",sr="__alias",nr="__timers",zd="$autocapture_disabled_server_side",ko="$heatmaps_enabled_server_side",Ud="$exception_capture_enabled_server_side",So="$error_tracking_suppression_rules",Bd="$error_tracking_capture_extension_exceptions",Hd="$web_vitals_enabled_server_side",Kp="$dead_clicks_enabled_server_side",qd="$web_vitals_allowed_metrics",Co="$session_recording_enabled_server_side",Wd="$console_log_recording_enabled_server_side",Gd="$session_recording_network_payload_capture",Kd="$session_recording_masking",Yd="$session_recording_canvas_recording",Jd="$replay_sample_rate",Xd="$replay_minimum_duration",Zd="$replay_script_config",Ea="$sesid",rr="$session_is_sampled",Eo="$session_recording_url_trigger_activated_session",To="$session_recording_event_trigger_activated_session",Tn="$enabled_feature_flags",ar="$early_access_features",Mo="$feature_flag_details",ir="$stored_person_properties",Gs="$stored_group_properties",Ao="$surveys",Zr="$surveys_activated",Ta="$flag_call_reported",is="$user_state",Po="$client_session_props",Ro="$capture_rate_limit",Io="$initial_campaign_params",Fo="$initial_referrer_info",Ma="$initial_person_info",Aa="$epp",Yp="__POSTHOG_TOOLBAR__",Qr="$posthog_cookieless",L_=[Gp,sr,"__cmpns",nr,Co,ko,Ea,Tn,So,is,ar,Mo,Gs,ir,Ao,Ta,Po,Ro,Io,Fo,Aa,Ma];function Qd(t){return t instanceof Element&&(t.id===Yp||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function ai(t){return!!t&&t.nodeType===1}function Ts(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function Jp(t){return!!t&&t.nodeType===3}function Xp(t){return!!t&&t.nodeType===11}function Xl(t){return t?si(t).split(/\s+/):[]}function eu(t){var e=I==null?void 0:I.location.href;return!!(e&&t&&t.some(s=>e.match(s)))}function Pa(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Xl(e)}function Zp(t){return _e(t)?null:si(t).split(/(\s+)/).filter(e=>On(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function ii(t){var e="";return Oo(t)&&!tf(t)&&t.childNodes&&t.childNodes.length&&Se(t.childNodes,function(s){var r;Jp(s)&&s.textContent&&(e+=(r=Zp(s.textContent))!==null&&r!==void 0?r:"")}),si(e)}function Qp(t){return J(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Do=["a","button","form","input","select","textarea","label"];function ef(t){var e=t.parentNode;return!(!e||!ai(e))&&e}function $_(t,e,s,r,a){var i,o,l;if(s===void 0&&(s=void 0),!I||!t||Ts(t,"html")||!ai(t)||(i=s)!=null&&i.url_allowlist&&!eu(s.url_allowlist)||(o=s)!=null&&o.url_ignorelist&&eu(s.url_ignorelist))return!1;if((l=s)!=null&&l.dom_event_allowlist){var c=s.dom_event_allowlist;if(c&&!c.some(b=>e.type===b))return!1}for(var d=!1,u=[t],h=!0,m=t;m.parentNode&&!Ts(m,"body");)if(Xp(m.parentNode))u.push(m.parentNode.host),m=m.parentNode.host;else{if(!(h=ef(m)))break;if(r||Do.indexOf(h.tagName.toLowerCase())>-1)d=!0;else{var p=I.getComputedStyle(h);p&&p.getPropertyValue("cursor")==="pointer"&&(d=!0)}u.push(h),m=h}if(!function(b,y){var v=y==null?void 0:y.element_allowlist;if(J(v))return!0;var j,S=function(_){if(v.some(N=>_.tagName.toLowerCase()===N))return{v:!0}};for(var w of b)if(j=S(w))return j.v;return!1}(u,s)||!function(b,y){var v=y==null?void 0:y.css_selector_allowlist;if(J(v))return!0;var j,S=function(_){if(v.some(N=>_.matches(N)))return{v:!0}};for(var w of b)if(j=S(w))return j.v;return!1}(u,s))return!1;var g=I.getComputedStyle(t);if(g&&g.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var x=t.tagName.toLowerCase();switch(x){case"html":return!1;case"form":return(a||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(a||["change","click"]).indexOf(e.type)>=0;default:return d?(a||["click"]).indexOf(e.type)>=0:(a||["click"]).indexOf(e.type)>=0&&(Do.indexOf(x)>-1||t.getAttribute("contenteditable")==="true")}}function Oo(t){for(var e=t;e.parentNode&&!Ts(e,"body");e=e.parentNode){var s=Pa(e);if(ve(s,"ph-sensitive")||ve(s,"ph-no-capture"))return!1}if(ve(Pa(t),"ph-include"))return!0;var r=t.type||"";if($e(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var a=t.name||t.id||"";return!($e(a)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(a.replace(/[^a-zA-Z0-9]/g,"")))}function tf(t){return!!(Ts(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Ts(t,"select")||Ts(t,"textarea")||t.getAttribute("contenteditable")==="true")}var sf="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",V_=new RegExp("^(?:"+sf+")$"),z_=new RegExp(sf),nf="\\d{3}-?\\d{2}-?\\d{4}",U_=new RegExp("^("+nf+")$"),B_=new RegExp("("+nf+")");function On(t,e){return e===void 0&&(e=!0),!(_e(t)||$e(t)&&(t=si(t),(e?V_:z_).test((t||"").replace(/[- ]/g,""))||(e?U_:B_).test(t)))}function rf(t){var e=ii(t);return On(e=(e+" "+af(t)).trim())?e:""}function af(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Se(t.childNodes,function(s){var r;if(s&&((r=s.tagName)==null?void 0:r.toLowerCase())==="span")try{var a=ii(s);e=(e+" "+a).trim(),s.childNodes&&s.childNodes.length&&(e=(e+" "+af(s)).trim())}catch(i){ae.error("[AutoCapture]",i)}}),e}function H_(t){return function(e){var s=e.map(r=>{var a,i,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var l of(r.attr_class.sort(),r.attr_class))o+="."+l.replace(/"/g,"");var c=te({},r.text?{text:r.text}:{},{"nth-child":(a=r.nth_child)!==null&&a!==void 0?a:0,"nth-of-type":(i=r.nth_of_type)!==null&&i!==void 0?i:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),d={};return ga(c).sort((u,h)=>{var[m]=u,[p]=h;return m.localeCompare(p)}).forEach(u=>{var[h,m]=u;return d[tu(h.toString())]=tu(m.toString())}),o+=":",o+=ga(d).map(u=>{var[h,m]=u;return h+'="'+m+'"'}).join("")});return s.join(";")}(function(e){return e.map(s=>{var r,a,i={text:(r=s.$el_text)==null?void 0:r.slice(0,400),tag_name:s.tag_name,href:(a=s.attr__href)==null?void 0:a.slice(0,2048),attr_class:q_(s),attr_id:s.attr__id,nth_child:s.nth_child,nth_of_type:s.nth_of_type,attributes:{}};return ga(s).filter(o=>{var[l]=o;return l.indexOf("attr__")===0}).forEach(o=>{var[l,c]=o;return i.attributes[l]=c}),i})}(t))}function tu(t){return t.replace(/"|\\"/g,'\\"')}function q_(t){var e=t.attr__class;return e?Me(e)?e:Xl(e):void 0}class of{constructor(){this.clicks=[]}isRageClick(e,s,r){var a=this.clicks[this.clicks.length-1];if(a&&Math.abs(e-a.x)+Math.abs(s-a.y)<30&&r-a.timestamp<1e3){if(this.clicks.push({x:e,y:s,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:s,timestamp:r}];return!1}}var W_=["localhost","127.0.0.1"],Ln=t=>{var e=ne==null?void 0:ne.createElement("a");return J(e)?null:(e.href=t,e)},G_=function(t,e){var s,r;e===void 0&&(e="&");var a=[];return Se(t,function(i,o){J(i)||J(o)||o==="undefined"||(s=encodeURIComponent((l=>l instanceof File)(i)?i.name:i.toString()),r=encodeURIComponent(o),a[a.length]=r+"="+s)}),a.join(e)},Ra=function(t,e){for(var s,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),a=0;a<r.length;a++){var i=r[a].split("=");if(i[0]===e){s=i;break}}if(!Me(s)||s.length<2)return"";var o=s[1];try{o=decodeURIComponent(o)}catch{ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Zl=function(t,e,s){if(!t||!e||!e.length)return t;for(var r=t.split("#"),a=r[0]||"",i=r[1],o=a.split("?"),l=o[1],c=o[0],d=(l||"").split("&"),u=[],h=0;h<d.length;h++){var m=d[h].split("=");Me(m)&&(e.includes(m[0])?u.push(m[0]+"="+s):u.push(d[h]))}var p=c;return l!=null&&(p+="?"+u.join("&")),i!=null&&(p+="#"+i),p},Ia=function(t,e){var s=t.match(new RegExp(e+"=([^&]*)"));return s?s[1]:null},su=Xe("[AutoCapture]");function Ti(t,e){return e.length>t?e.slice(0,t)+"...":e}function K_(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!ai(e));return e}function Y_(t,e,s,r){var a=t.tagName.toLowerCase(),i={tag_name:a};Do.indexOf(a)>-1&&!s&&(a.toLowerCase()==="a"||a.toLowerCase()==="button"?i.$el_text=Ti(1024,rf(t)):i.$el_text=Ti(1024,ii(t)));var o=Pa(t);o.length>0&&(i.classes=o.filter(function(u){return u!==""})),Se(t.attributes,function(u){var h;if((!tf(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(r==null||!r.includes(u.name))&&!e&&On(u.value)&&(h=u.name,!$e(h)||h.substring(0,10)!=="_ngcontent"&&h.substring(0,7)!=="_nghost")){var m=u.value;u.name==="class"&&(m=Xl(m).join(" ")),i["attr__"+u.name]=Ti(1024,m)}});for(var l=1,c=1,d=t;d=K_(d);)l++,d.tagName===t.tagName&&c++;return i.nth_child=l,i.nth_of_type=c,i}function J_(t,e){for(var s,r,{e:a,maskAllElementAttributes:i,maskAllText:o,elementAttributeIgnoreList:l,elementsChainAsString:c}=e,d=[t],u=t;u.parentNode&&!Ts(u,"body");)Xp(u.parentNode)?(d.push(u.parentNode.host),u=u.parentNode.host):(d.push(u.parentNode),u=u.parentNode);var h,m=[],p={},g=!1,x=!1;if(Se(d,S=>{var w=Oo(S);S.tagName.toLowerCase()==="a"&&(g=S.getAttribute("href"),g=w&&g&&On(g)&&g),ve(Pa(S),"ph-no-capture")&&(x=!0),m.push(Y_(S,i,o,l));var _=function(N){if(!Oo(N))return{};var C={};return Se(N.attributes,function(P){if(P.name&&P.name.indexOf("data-ph-capture-attribute")===0){var O=P.name.replace("data-ph-capture-attribute-",""),B=P.value;O&&B&&On(B)&&(C[O]=B)}}),C}(S);Ue(p,_)}),x)return{props:{},explicitNoCapture:x};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?m[0].$el_text=rf(t):m[0].$el_text=ii(t)),g){var b,y;m[0].attr__href=g;var v=(b=Ln(g))==null?void 0:b.host,j=I==null||(y=I.location)==null?void 0:y.host;v&&j&&v!==j&&(h=g)}return{props:Ue({$event_type:a.type,$ce_version:1},c?{}:{$elements:m},{$elements_chain:H_(m)},(s=m[0])!=null&&s.$el_text?{$el_text:(r=m[0])==null?void 0:r.$el_text}:{},h&&a.type==="click"?{$external_click_url:h}:{},p)}}class X_{constructor(e){this.i=!1,this.o=null,this.rageclicks=new of,this.h=!1,this.instance=e,this.m=null}get S(){var e,s,r=Le(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map(a=>new RegExp(a)),r.url_ignorelist=(s=r.url_ignorelist)==null?void 0:s.map(a=>new RegExp(a)),r}$(){if(this.isBrowserSupported()){if(I&&ne){var e=r=>{r=r||(I==null?void 0:I.event);try{this.k(r)}catch(a){su.error("Failed to capture event",a)}};if(Fe(ne,"submit",e,{capture:!0}),Fe(ne,"change",e,{capture:!0}),Fe(ne,"click",e,{capture:!0}),this.S.capture_copied_text){var s=r=>{r=r||(I==null?void 0:I.event),this.k(r,Ei)};Fe(ne,"copy",s,{capture:!0}),Fe(ne,"cut",s,{capture:!0})}}}else su.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[zd]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var s,r=[];return(s=this.m)==null||s.forEach(a=>{var i=ne==null?void 0:ne.querySelectorAll(a);i==null||i.forEach(o=>{e===o&&r.push(a)})}),r}get isEnabled(){var e,s,r=(e=this.instance.persistence)==null?void 0:e.props[zd],a=this.o;if(Ls(a)&&!Kt(r)&&!this.instance.I())return!1;var i=(s=this.o)!==null&&s!==void 0?s:!!r;return!!this.instance.config.autocapture&&!i}k(e,s){if(s===void 0&&(s="$autocapture"),this.isEnabled){var r,a=Qp(e);Jp(a)&&(a=a.parentNode||null),s==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var i=s===Ei;if(a&&$_(a,e,this.S,i,i?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:l}=J_(a,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(l)return!1;var c=this.getElementSelectors(a);if(c&&c.length>0&&(o.$element_selectors=c),s===Ei){var d,u=Zp(I==null||(d=I.getSelection())==null?void 0:d.toString()),h=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=h}return this.instance.capture(s,o),!0}}}isBrowserSupported(){return It(ne==null?void 0:ne.querySelectorAll)}}Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return lt(t)&&isFinite(t)&&Math.floor(t)===t});var nu="0123456789abcdef";class Fa{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,s,r,a){if(!Number.isInteger(e)||!Number.isInteger(s)||!Number.isInteger(r)||!Number.isInteger(a)||e<0||s<0||r<0||a<0||e>0xffffffffffff||s>4095||r>1073741823||a>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|s>>>8,i[7]=s,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=a>>>24,i[13]=a>>>16,i[14]=a>>>8,i[15]=a,new Fa(i)}toString(){for(var e="",s=0;s<this.bytes.length;s++)e=e+nu.charAt(this.bytes[s]>>>4)+nu.charAt(15&this.bytes[s]),s!==3&&s!==5&&s!==7&&s!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Fa(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var s=0;s<16;s++){var r=this.bytes[s]-e.bytes[s];if(r!==0)return Math.sign(r)}return 0}}class Z_{constructor(){this.P=0,this.R=0,this.T=new Q_}generate(){var e=this.generateOrAbort();if(J(e)){this.P=0;var s=this.generateOrAbort();if(J(s))throw new Error("Could not generate UUID after timestamp reset");return s}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return Fa.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}}var ru,lf=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};I&&!J(I.crypto)&&crypto.getRandomValues&&(lf=t=>crypto.getRandomValues(t));class Q_{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(lf(this.C),this.F=0),this.C[this.F++]}}var Cs=()=>ew().toString(),ew=()=>(ru||(ru=new Z_)).generate(),Xn="",tw=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function sw(t,e){if(e){var s=function(a,i){if(i===void 0&&(i=ne),Xn)return Xn;if(!i||["localhost","127.0.0.1"].includes(a))return"";for(var o=a.split("."),l=Math.min(o.length,8),c="dmn_chk_"+Cs();!Xn&&l--;){var d=o.slice(l).join("."),u=c+"=1;domain=."+d+";path=/";i.cookie=u+";max-age=3",i.cookie.includes(c)&&(i.cookie=u+";max-age=0",Xn=d)}return Xn}(t);if(!s){var r=(a=>{var i=a.match(tw);return i?i[0]:""})(t);r!==s&&ae.info("Warning: cookie subdomain discovery mismatch",r,s),s=r}return s?"; domain=."+s:""}return""}var Qt={O:()=>!!ne,A:function(t){ae.error("cookieStore error: "+t)},D:function(t){if(ne){try{for(var e=t+"=",s=ne.cookie.split(";").filter(i=>i.length),r=0;r<s.length;r++){for(var a=s[r];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return decodeURIComponent(a.substring(e.length,a.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(Qt.D(t))||{}}catch{}return e},j:function(t,e,s,r,a){if(ne)try{var i="",o="",l=sw(ne.location.hostname,r);if(s){var c=new Date;c.setTime(c.getTime()+24*s*60*60*1e3),i="; expires="+c.toUTCString()}a&&(o="; secure");var d=t+"="+encodeURIComponent(JSON.stringify(e))+i+"; SameSite=Lax; path=/"+l+o;return d.length>3686.4&&ae.warn("cookieStore warning: large cookie, len="+d.length),ne.cookie=d,d}catch{return}},N:function(t,e){try{Qt.j(t,"",-1,e)}catch{return}}},Mi=null,Ge={O:function(){if(!Ls(Mi))return Mi;var t=!0;if(J(I))t=!1;else try{var e="__mplssupport__";Ge.j(e,"xyz"),Ge.D(e)!=='"xyz"'&&(t=!1),Ge.N(e)}catch{t=!1}return t||ae.error("localStorage unsupported; falling back to cookie store"),Mi=t,t},A:function(t){ae.error("localStorage error: "+t)},D:function(t){try{return I==null?void 0:I.localStorage.getItem(t)}catch(e){Ge.A(e)}return null},L:function(t){try{return JSON.parse(Ge.D(t))||{}}catch{}return null},j:function(t,e){try{I==null||I.localStorage.setItem(t,JSON.stringify(e))}catch(s){Ge.A(s)}},N:function(t){try{I==null||I.localStorage.removeItem(t)}catch(e){Ge.A(e)}}},nw=["distinct_id",Ea,rr,Aa,Ma],ea=te({},Ge,{L:function(t){try{var e={};try{e=Qt.L(t)||{}}catch{}var s=Ue(e,JSON.parse(Ge.D(t)||"{}"));return Ge.j(t,s),s}catch{}return null},j:function(t,e,s,r,a,i){try{Ge.j(t,e,void 0,void 0,i);var o={};nw.forEach(l=>{e[l]&&(o[l]=e[l])}),Object.keys(o).length&&Qt.j(t,o,s,r,a,i)}catch(l){Ge.A(l)}},N:function(t,e){try{I==null||I.localStorage.removeItem(t),Qt.N(t,e)}catch(s){Ge.A(s)}}}),ta={},rw={O:function(){return!0},A:function(t){ae.error("memoryStorage error: "+t)},D:function(t){return ta[t]||null},L:function(t){return ta[t]||null},j:function(t,e){ta[t]=e},N:function(t){delete ta[t]}},Us=null,tt={O:function(){if(!Ls(Us))return Us;if(Us=!0,J(I))Us=!1;else try{var t="__support__";tt.j(t,"xyz"),tt.D(t)!=='"xyz"'&&(Us=!1),tt.N(t)}catch{Us=!1}return Us},A:function(t){ae.error("sessionStorage error: ",t)},D:function(t){try{return I==null?void 0:I.sessionStorage.getItem(t)}catch(e){tt.A(e)}return null},L:function(t){try{return JSON.parse(tt.D(t))||null}catch{}return null},j:function(t,e){try{I==null||I.sessionStorage.setItem(t,JSON.stringify(e))}catch(s){tt.A(s)}},N:function(t){try{I==null||I.sessionStorage.removeItem(t)}catch(e){tt.A(e)}}},yn=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});class aw{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?yn.DENIED:this.q}isOptedOut(){return this.consent===yn.DENIED||this.consent===yn.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:s}=this._instance.config;return(s||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?yn.GRANTED:e==="0"?yn.DENIED:yn.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?Ge:Qt;var s=e==="localStorage"?Qt:Ge;s.D(this.H)&&(this.W.D(this.H)||this.optInOut(s.D(this.H)==="1"),s.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!Wp([Et==null?void 0:Et.doNotTrack,Et==null?void 0:Et.msDoNotTrack,ge.doNotTrack],e=>ve([!0,1,"1","yes"],e))}}var sa=Xe("[Dead Clicks]"),iw=()=>!0,ow=t=>{var e,s=!((e=t.instance.persistence)==null||!e.get_property(Kp)),r=t.instance.config.capture_dead_clicks;return Kt(r)?r:s};class cf{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,s,r){this.instance=e,this.isEnabled=s,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Kp]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var s,r;(s=ge.__PosthogExtensions__)!=null&&s.initDeadClicksAutocapture&&e(),(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",a=>{a?sa.error("failed to load script",a):e()})}V(){var e;if(ne){if(!this.G&&(e=ge.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var s=Le(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};s.__onCapture=this.onCapture,this.G=ge.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,s),this.G.start(ne),sa.info("starting...")}}else sa.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,sa.info("stopping..."))}}function Tt(t,e,s,r,a){return e>s&&(ae.warn("min cannot be greater than max."),e=s),lt(t)?t>s?(r&&ae.warn(r+" cannot be  greater than max: "+s+". Using max value instead."),s):t<e?(r&&ae.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&ae.warn(r+" must be a number. using max or fallback. max: "+s+", fallback: "+a),Tt(a||s,e,s,r))}class df{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(s=>{var r=this.X(s)+this.Z;r>=this.tt?delete this.K[s]:this.it(s,r)})},this.X=s=>this.K[String(s)],this.it=(s,r)=>{this.K[String(s)]=r},this.consumeRateLimit=s=>{var r,a=(r=this.X(s))!==null&&r!==void 0?r:this.tt;if((a=Math.max(a-1,0))===0)return!0;this.it(s,a);var i,o=a===0;return o&&((i=this.et)==null||i.call(this,s)),o},this.rt=e,this.et=this.rt.et,this.tt=Tt(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=Tt(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=Tt(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}}var na=Xe("[ExceptionAutocapture]");class lw{constructor(e){var s,r,a;this.nt=()=>{var i;if(I&&this.isEnabled&&(i=ge.__PosthogExtensions__)!=null&&i.errorWrappingFunctions){var o=ge.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,l=ge.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,c=ge.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=l(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=c(this.captureException.bind(this)))}catch(d){na.error("failed to start",d),this.ht()}}},this._instance=e,this.dt=!((s=this._instance.persistence)==null||!s.props[Ud]),this.S=this.vt(),this.ct=new df({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(a=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&a!==void 0?a:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,s={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Le(e)?s=te({},s,e):(J(e)?this.dt:e)&&(s=te({},s,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),s}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(na.info("enabled"),this.J(this.nt))}J(e){var s,r;(s=ge.__PosthogExtensions__)!=null&&s.errorWrappingFunctions&&e(),(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",a=>{if(a)return na.error("failed to load script",a);e()})}ht(){var e,s,r;(e=this.ot)==null||e.call(this),this.ot=void 0,(s=this.lt)==null||s.call(this),this.lt=void 0,(r=this.ut)==null||r.call(this),this.ut=void 0}onRemoteConfig(e){var s=e.autocaptureExceptions;this.dt=!!s||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[Ud]:this.dt}),this.startIfEnabled()}captureException(e){var s,r=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=r+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var a=(s=e.$exception_list[0].type)!==null&&s!==void 0?s:"Exception";this.ct.consumeRateLimit(a)?na.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}}function uf(t){return!J(Event)&&hf(t,Event)}function hf(t,e){try{return t instanceof e}catch{return!1}}function mf(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return hf(t,Error)}}function xa(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function Ai(t){return xa(t,"DOMError")}var au=/\(error: (.*)\)/,iu=50,Mn="?";function Pi(t,e,s,r){var a={platform:"web:javascript",filename:t,function:e==="<anonymous>"?Mn:e,in_app:!0};return J(s)||(a.lineno=s),J(r)||(a.colno=r),a}var cw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,dw=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,uw=/\((\S*)(?::(\d+))(?::(\d+))\)/,hw=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,mw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,pw=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];var r=e.sort((a,i)=>a[0]-i[0]).map(a=>a[1]);return function(a,i){i===void 0&&(i=0);for(var o=[],l=a.split(`
`),c=i;c<l.length;c++){var d=l[c];if(!(d.length>1024)){var u=au.test(d)?d.replace(au,"$1"):d;if(!u.match(/\S*Error: /)){for(var h of r){var m=h(u);if(m){o.push(m);break}}if(o.length>=iu)break}}}return function(p){if(!p.length)return[];var g=Array.from(p);return g.reverse(),g.slice(0,iu).map(x=>te({},x,{filename:x.filename||fw(g).filename,function:x.function||Mn}))}(o)}}([30,t=>{var e=cw.exec(t);if(e){var[,s,r,a]=e;return Pi(s,Mn,+r,+a)}var i=dw.exec(t);if(i){if(i[2]&&i[2].indexOf("eval")===0){var o=uw.exec(i[2]);o&&(i[2]=o[1],i[3]=o[2],i[4]=o[3])}var[l,c]=lu(i[1]||Mn,i[2]);return Pi(c,l,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}}],[50,t=>{var e=hw.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var s=mw.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}var r=e[3],a=e[1]||Mn;return[a,r]=lu(a,r),Pi(r,a,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function fw(t){return t[t.length-1]||{}}var ra,ou,Ri,lu=(t,e)=>{var s=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return s||r?[t.indexOf("@")!==-1?t.split("@")[0]:Mn,s?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},gw=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Ql(t,e){e===void 0&&(e=0);var s=t.stacktrace||t.stack||"",r=function(o){return o&&xw.test(o.message)?1:0}(t);try{var a=pw,i=function(o,l){var c=function(d){var u=globalThis._posthogChunkIds;if(!u)return{};var h=Object.keys(u);return Ri&&h.length===ou||(ou=h.length,Ri=h.reduce((m,p)=>{ra||(ra={});var g=ra[p];if(g)m[g[0]]=g[1];else for(var x=d(p),b=x.length-1;b>=0;b--){var y=x[b],v=y==null?void 0:y.filename,j=u[p];if(v&&j){m[v]=j,ra[p]=[v,j];break}}return m},{})),Ri}(l);return o.forEach(d=>{d.filename&&(d.chunk_id=c[d.filename])}),o}(a(s,r),a);return i.slice(0,i.length-e)}catch{}return[]}var xw=/Minified React error #\d+;/i;function vw(t,e){var s,r,a=Ql(t),i=(s=e==null?void 0:e.handled)===null||s===void 0||s,o=(r=e==null?void 0:e.synthetic)!==null&&r!==void 0&&r;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(l){var c=l.message;return c.error&&typeof c.error.message=="string"?String(c.error.message):String(c)}(t),stacktrace:{frames:a,type:"raw"},mechanism:{handled:i,synthetic:o}}}function pf(t,e){var s=vw(t,e);return t.cause&&mf(t.cause)&&t.cause!==t?[s,...pf(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[s]}function Ii(t,e){return{$exception_list:pf(t,e),$exception_level:"error"}}function Fi(t,e){var s,r,a,i=(s=e==null?void 0:e.handled)===null||s===void 0||s,o=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,l={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(a=e==null?void 0:e.defaultExceptionType)!==null&&a!==void 0?a:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:i,synthetic:o}};if(e!=null&&e.syntheticException){var c=Ql(e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:"error"}}function yw(t){return $e(t)&&!No(t)&&T_.indexOf(t)>=0}function bw(t,e){var s,r,a=(s=e==null?void 0:e.handled)===null||s===void 0||s,i=(r=e==null?void 0:e.synthetic)===null||r===void 0||r,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:uf(t)?t.constructor.name:"Error",l="Non-Error 'exception' captured with keys: "+function(u,h){h===void 0&&(h=40);var m=Object.keys(u);if(m.sort(),!m.length)return"[object has no keys]";for(var p=m.length;p>0;p--){var g=m.slice(0,p).join(", ");if(!(g.length>h))return p===m.length||g.length<=h?g:g.slice(0,h)+"..."}return""}(t),c={type:o,value:l,mechanism:{handled:a,synthetic:i}};if(e!=null&&e.syntheticException){var d=Ql(e==null?void 0:e.syntheticException,1);d.length&&(c.stacktrace={frames:d,type:"raw"})}return{$exception_list:[c],$exception_level:yw(t.level)?t.level:"error"}}function jw(t,e){var{error:s,event:r}=t,a={$exception_list:[]},i=s||r;if(Ai(i)||function(m){return xa(m,"DOMException")}(i)){var o=i;if(function(m){return"stack"in m}(i))a=Ii(i,e);else{var l=o.name||(Ai(o)?"DOMError":"DOMException"),c=o.message?l+": "+o.message:l;a=Fi(c,te({},e,{overrideExceptionType:Ai(o)?"DOMError":"DOMException",defaultExceptionMessage:c}))}return"code"in o&&(a.$exception_DOMException_code=""+o.code),a}if(function(m){return xa(m,"ErrorEvent")}(i)&&i.error)return Ii(i.error,e);if(mf(i))return Ii(i,e);if(function(m){return xa(m,"Object")}(i)||uf(i))return bw(i,e);if(J(s)&&$e(r)){var d="Error",u=r,h=r.match(gw);return h&&(d=h[1],u=h[2]),Fi(u,te({},e,{overrideExceptionType:d,defaultExceptionMessage:u}))}return Fi(i,e)}function cu(t,e,s){try{if(!(e in t))return()=>{};var r=t[e],a=s(r);return It(a)&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=a,()=>{t[e]=r}}catch{return()=>{}}}class _w{constructor(e){var s;this._instance=e,this.ft=(I==null||(s=I.location)==null?void 0:s.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,s;if(I&&I.history){var r=this;(e=I.history.pushState)!=null&&e.__posthog_wrapped__||cu(I.history,"pushState",a=>function(i,o,l){a.call(this,i,o,l),r._t("pushState")}),(s=I.history.replaceState)!=null&&s.__posthog_wrapped__||cu(I.history,"replaceState",a=>function(i,o,l){a.call(this,i,o,l),r._t("replaceState")}),this.bt()}}_t(e){try{var s,r=I==null||(s=I.location)==null?void 0:s.pathname;if(!r)return;r!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=r}catch(a){ae.error("Error capturing "+e+" pageview",a)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Fe(I,"popstate",e),this.gt=()=>{I&&I.removeEventListener("popstate",e)}}}}function Da(t){var e,s;return((e=JSON.stringify(t,(s=[],function(r,a){if(Le(a)){for(;s.length>0&&s[s.length-1]!==this;)s.pop();return s.includes(a)?"[Circular]":(s.push(a),a)}return a})))==null?void 0:e.length)||0}function Lo(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var s=Math.floor(t.data.length/2),r=t.data.slice(0,s),a=t.data.slice(s);return[Lo({size:Da(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),Lo({size:Da(a),data:a,sessionId:t.sessionId,windowId:t.windowId})].flatMap(i=>i)}return[t]}var os=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(os||{}),$t=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))($t||{}),$o="[SessionRecording]",Vo="redacted",aa={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},ww=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Nw=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],kw=["/s/","/e/","/i/"];function du(t,e,s,r){if(_e(t))return t;var a=(e==null?void 0:e["content-length"])||function(i){return new Blob([i]).size}(t);return $e(a)&&(a=parseInt(a)),a>s?$o+" "+r+" body too large to record ("+a+" bytes)":t}function uu(t,e){if(_e(t))return t;var s=t;return On(s,!1)||(s=$o+" "+e+" body "+Vo),Se(Nw,r=>{var a,i;(a=s)!=null&&a.length&&((i=s)==null?void 0:i.indexOf(r))!==-1&&(s=$o+" "+e+" body "+Vo+" as might contain: "+r)}),s}var Sw=(t,e)=>{var s,r,a,i={payloadSizeLimitBytes:aa.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...aa.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...aa.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,l=t.session_recording.recordBody!==!1&&e.recordBody,c=t.capture_performance!==!1&&e.recordPerformance,d=(s=i,a=Math.min(1e6,(r=s.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),m=>(m!=null&&m.requestBody&&(m.requestBody=du(m.requestBody,m.requestHeaders,a,"Request")),m!=null&&m.responseBody&&(m.responseBody=du(m.responseBody,m.responseHeaders,a,"Response")),m)),u=m=>{return d(((x,b)=>{var y,v=Ln(x.name),j=b.indexOf("http")===0?(y=Ln(b))==null?void 0:y.pathname:b;j==="/"&&(j="");var S=v==null?void 0:v.pathname.replace(j||"","");if(!(v&&S&&kw.some(w=>S.indexOf(w)===0)))return x})((g=(p=m).requestHeaders,_e(g)||Se(Object.keys(g??{}),x=>{ww.includes(x.toLowerCase())&&(g[x]=Vo)}),p),t.api_host));var p,g},h=It(t.session_recording.maskNetworkRequestFn);return h&&It(t.session_recording.maskCapturedNetworkRequestFn)&&ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),h&&(t.session_recording.maskCapturedNetworkRequestFn=m=>{var p=t.session_recording.maskNetworkRequestFn({url:m.name});return te({},m,{name:p==null?void 0:p.url})}),i.maskRequestFn=It(t.session_recording.maskCapturedNetworkRequestFn)?m=>{var p,g=u(m);return g&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(g))!==null&&p!==void 0?p:void 0}:m=>function(p){if(!J(p))return p.requestBody=uu(p.requestBody,"Request"),p.responseBody=uu(p.responseBody,"Response"),p}(u(m)),te({},aa,i,{recordHeaders:o,recordBody:l,recordPerformance:c,recordInitialRequests:c})};class Cw{constructor(e,s){var r,a;s===void 0&&(s={}),this.yt={},this.wt=i=>{if(!this.yt[i]){var o,l;this.yt[i]=!0;var c=this.St(i);(o=(l=this.rt).onBlockedNode)==null||o.call(l,i,c)}},this.$t=i=>{var o=this.St(i);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var l=o.closest("svg");if(l)return[this._rrweb.mirror.getId(l),l]}return[i,o]},this.St=i=>this._rrweb.mirror.getNode(i),this.xt=i=>{var o,l,c,d,u,h,m,p;return((o=(l=i.removes)==null?void 0:l.length)!==null&&o!==void 0?o:0)+((c=(d=i.attributes)==null?void 0:d.length)!==null&&c!==void 0?c:0)+((u=(h=i.texts)==null?void 0:h.length)!==null&&u!==void 0?u:0)+((m=(p=i.adds)==null?void 0:p.length)!==null&&m!==void 0?m:0)},this.throttleMutations=i=>{if(i.type!==3||i.data.source!==0)return i;var o=i.data,l=this.xt(o);o.attributes&&(o.attributes=o.attributes.filter(d=>{var[u]=this.$t(d.id);return!this.ct.consumeRateLimit(u)&&d}));var c=this.xt(o);return c!==0||l===c?i:void 0},this._rrweb=e,this.rt=s,this.ct=new df({bucketSize:(r=this.rt.bucketSize)!==null&&r!==void 0?r:100,refillRate:(a=this.rt.refillRate)!==null&&a!==void 0?a:10,refillInterval:1e3,et:this.wt})}}var Ft=Uint8Array,wt=Uint16Array,$n=Uint32Array,ec=new Ft([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tc=new Ft([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hu=new Ft([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ff=function(t,e){for(var s=new wt(31),r=0;r<31;++r)s[r]=e+=1<<t[r-1];var a=new $n(s[30]);for(r=1;r<30;++r)for(var i=s[r];i<s[r+1];++i)a[i]=i-s[r]<<5|r;return[s,a]},gf=ff(ec,2),Ew=gf[0],zo=gf[1];Ew[28]=258,zo[258]=28;for(var mu=ff(tc,0)[1],xf=new wt(32768),Ae=0;Ae<32768;++Ae){var Bs=(43690&Ae)>>>1|(21845&Ae)<<1;Bs=(61680&(Bs=(52428&Bs)>>>2|(13107&Bs)<<2))>>>4|(3855&Bs)<<4,xf[Ae]=((65280&Bs)>>>8|(255&Bs)<<8)>>>1}var xr=function(t,e,s){for(var r=t.length,a=0,i=new wt(e);a<r;++a)++i[t[a]-1];var o,l=new wt(e);for(a=0;a<e;++a)l[a]=l[a-1]+i[a-1]<<1;for(o=new wt(r),a=0;a<r;++a)o[a]=xf[l[t[a]-1]++]>>>15-t[a];return o},dn=new Ft(288);for(Ae=0;Ae<144;++Ae)dn[Ae]=8;for(Ae=144;Ae<256;++Ae)dn[Ae]=9;for(Ae=256;Ae<280;++Ae)dn[Ae]=7;for(Ae=280;Ae<288;++Ae)dn[Ae]=8;var Oa=new Ft(32);for(Ae=0;Ae<32;++Ae)Oa[Ae]=5;var Tw=xr(dn,9),Mw=xr(Oa,5),vf=function(t){return(t/8>>0)+(7&t&&1)},yf=function(t,e,s){(s==null||s>t.length)&&(s=t.length);var r=new(t instanceof wt?wt:t instanceof $n?$n:Ft)(s-e);return r.set(t.subarray(e,s)),r},as=function(t,e,s){s<<=7&e;var r=e/8>>0;t[r]|=s,t[r+1]|=s>>>8},Zn=function(t,e,s){s<<=7&e;var r=e/8>>0;t[r]|=s,t[r+1]|=s>>>8,t[r+2]|=s>>>16},Di=function(t,e){for(var s=[],r=0;r<t.length;++r)t[r]&&s.push({s:r,f:t[r]});var a=s.length,i=s.slice();if(!a)return[new Ft(0),0];if(a==1){var o=new Ft(s[0].s+1);return o[s[0].s]=1,[o,1]}s.sort(function(w,_){return w.f-_.f}),s.push({s:-1,f:25001});var l=s[0],c=s[1],d=0,u=1,h=2;for(s[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=s[s[d].f<s[h].f?d++:h++],c=s[d!=u&&s[d].f<s[h].f?d++:h++],s[u++]={s:-1,f:l.f+c.f,l,r:c};var m=i[0].s;for(r=1;r<a;++r)i[r].s>m&&(m=i[r].s);var p=new wt(m+1),g=Uo(s[u-1],p,0);if(g>e){r=0;var x=0,b=g-e,y=1<<b;for(i.sort(function(w,_){return p[_.s]-p[w.s]||w.f-_.f});r<a;++r){var v=i[r].s;if(!(p[v]>e))break;x+=y-(1<<g-p[v]),p[v]=e}for(x>>>=b;x>0;){var j=i[r].s;p[j]<e?x-=1<<e-p[j]++-1:++r}for(;r>=0&&x;--r){var S=i[r].s;p[S]==e&&(--p[S],++x)}g=e}return[new Ft(p),g]},Uo=function(t,e,s){return t.s==-1?Math.max(Uo(t.l,e,s+1),Uo(t.r,e,s+1)):e[t.s]=s},pu=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new wt(++e),r=0,a=t[0],i=1,o=function(c){s[r++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return[s.subarray(0,r),e]},Qn=function(t,e){for(var s=0,r=0;r<e.length;++r)s+=t[r]*e[r];return s},Bo=function(t,e,s){var r=s.length,a=vf(e+2);t[a]=255&r,t[a+1]=r>>>8,t[a+2]=255^t[a],t[a+3]=255^t[a+1];for(var i=0;i<r;++i)t[a+i+4]=s[i];return 8*(a+4+r)},fu=function(t,e,s,r,a,i,o,l,c,d,u){as(e,u++,s),++a[256];for(var h=Di(a,15),m=h[0],p=h[1],g=Di(i,15),x=g[0],b=g[1],y=pu(m),v=y[0],j=y[1],S=pu(x),w=S[0],_=S[1],N=new wt(19),C=0;C<v.length;++C)N[31&v[C]]++;for(C=0;C<w.length;++C)N[31&w[C]]++;for(var P=Di(N,7),O=P[0],B=P[1],U=19;U>4&&!O[hu[U-1]];--U);var G,R,z,re,A=d+5<<3,F=Qn(a,dn)+Qn(i,Oa)+o,ee=Qn(a,m)+Qn(i,x)+o+14+3*U+Qn(N,O)+(2*N[16]+3*N[17]+7*N[18]);if(A<=F&&A<=ee)return Bo(e,u,t.subarray(c,c+d));if(as(e,u,1+(ee<F)),u+=2,ee<F){G=xr(m,p),R=m,z=xr(x,b),re=x;var D=xr(O,B);for(as(e,u,j-257),as(e,u+5,_-1),as(e,u+10,U-4),u+=14,C=0;C<U;++C)as(e,u+3*C,O[hu[C]]);u+=3*U;for(var Z=[v,w],me=0;me<2;++me){var fe=Z[me];for(C=0;C<fe.length;++C){var be=31&fe[C];as(e,u,D[be]),u+=O[be],be>15&&(as(e,u,fe[C]>>>5&127),u+=fe[C]>>>12)}}}else G=Tw,R=dn,z=Mw,re=Oa;for(C=0;C<l;++C)if(r[C]>255){be=r[C]>>>18&31,Zn(e,u,G[be+257]),u+=R[be+257],be>7&&(as(e,u,r[C]>>>23&31),u+=ec[be]);var le=31&r[C];Zn(e,u,z[le]),u+=re[le],le>3&&(Zn(e,u,r[C]>>>5&8191),u+=tc[le])}else Zn(e,u,G[r[C]]),u+=R[r[C]];return Zn(e,u,G[256]),u+R[256]},Aw=new $n([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pw=function(){for(var t=new $n(256),e=0;e<256;++e){for(var s=e,r=9;--r;)s=(1&s&&3988292384)^s>>>1;t[e]=s}return t}(),Rw=function(){var t=4294967295;return{p:function(e){for(var s=t,r=0;r<e.length;++r)s=Pw[255&s^e[r]]^s>>>8;t=s},d:function(){return 4294967295^t}}},Iw=function(t,e,s,r,a){return function(i,o,l,c,d,u){var h=i.length,m=new Ft(c+h+5*(1+Math.floor(h/7e3))+d),p=m.subarray(c,m.length-d),g=0;if(!o||h<8)for(var x=0;x<=h;x+=65535){var b=x+65535;b<h?g=Bo(p,g,i.subarray(x,b)):(p[x]=u,g=Bo(p,g,i.subarray(x,h)))}else{for(var y=Aw[o-1],v=y>>>13,j=8191&y,S=(1<<l)-1,w=new wt(32768),_=new wt(S+1),N=Math.ceil(l/3),C=2*N,P=function(ys){return(i[ys]^i[ys+1]<<N^i[ys+2]<<C)&S},O=new $n(25e3),B=new wt(288),U=new wt(32),G=0,R=0,z=(x=0,0),re=0,A=0;x<h;++x){var F=P(x),ee=32767&x,D=_[F];if(w[ee]=D,_[F]=ee,re<=x){var Z=h-x;if((G>7e3||z>24576)&&Z>423){g=fu(i,p,0,O,B,U,R,z,A,x-A,g),z=G=R=0,A=x;for(var me=0;me<286;++me)B[me]=0;for(me=0;me<30;++me)U[me]=0}var fe=2,be=0,le=j,$=ee-D&32767;if(Z>2&&F==P(x-$))for(var M=Math.min(v,Z)-1,k=Math.min(32767,x),E=Math.min(258,Z);$<=k&&--le&&ee!=D;){if(i[x+fe]==i[x+fe-$]){for(var q=0;q<E&&i[x+q]==i[x+q-$];++q);if(q>fe){if(fe=q,be=$,q>M)break;var ie=Math.min($,q-2),je=0;for(me=0;me<ie;++me){var Ce=x-$+me+32768&32767,ut=Ce-w[Ce]+32768&32767;ut>je&&(je=ut,D=Ce)}}}$+=(ee=D)-(D=w[ee])+32768&32767}if(be){O[z++]=268435456|zo[fe]<<18|mu[be];var rs=31&zo[fe],Vs=31&mu[be];R+=ec[rs]+tc[Vs],++B[257+rs],++U[Vs],re=x+fe,++G}else O[z++]=i[x],++B[i[x]]}}g=fu(i,p,u,O,B,U,R,z,A,x-A,g)}return yf(m,0,c+vf(g)+d)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,s,r,!0)},Ho=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},Fw=function(t,e){var s=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Ho(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),s){t[3]=8;for(var r=0;r<=s.length;++r)t[r+10]=s.charCodeAt(r)}},Dw=function(t){return 10+(t.filename&&t.filename.length+1||0)};function bf(t,e){e===void 0&&(e={});var s=Rw(),r=t.length;s.p(t);var a=Iw(t,e,Dw(e),8),i=a.length;return Fw(a,e),Ho(a,i-8,s.d()),Ho(a,i-4,r),a}function jf(t,e){var s=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var r=new Ft(t.length+(t.length>>>1)),a=0,i=function(d){r[a++]=d},o=0;o<s;++o){if(a+5>r.length){var l=new Ft(a+8+(s-o<<1));l.set(r),r=l}var c=t.charCodeAt(o);c<128||e?i(c):c<2048?(i(192|c>>>6),i(128|63&c)):c>55295&&c<57344?(i(240|(c=65536+(1047552&c)|1023&t.charCodeAt(++o))>>>18),i(128|c>>>12&63),i(128|c>>>6&63),i(128|63&c)):(i(224|c>>>12),i(128|c>>>6&63),i(128|63&c))}return yf(r,0,a)}function Ow(t,e){return function(s){for(var r=0,a=0;a<s.length;a++)r=(r<<5)-r+s.charCodeAt(a),r|=0;return Math.abs(r)}(t)%100<Tt(100*e,0,100)}var Is="disabled",sc="sampled",La="active",un="buffering",nc="paused",rc="trigger",es=rc+"_activated",ct=rc+"_pending",ss=rc+"_"+Is;function gu(t,e){return e.some(s=>s.matching==="regex"&&new RegExp(s.url).test(t))}class _f{constructor(e){this.kt=e}triggerStatus(e){var s=this.kt.map(r=>r.triggerStatus(e));return s.includes(es)?es:s.includes(ct)?ct:ss}stop(){this.kt.forEach(e=>e.stop())}}class wf{constructor(e){this.kt=e}triggerStatus(e){var s=new Set;for(var r of this.kt)s.add(r.triggerStatus(e));switch(s.delete(ss),s.size){case 0:return ss;case 1:return Array.from(s)[0];default:return ct}}stop(){this.kt.forEach(e=>e.stop())}}class Lw{triggerStatus(){return ct}stop(){}}class $w{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var s,r;this.Et=((s=e.sessionRecording)==null?void 0:s.urlTriggers)||[],this.It=((r=e.sessionRecording)==null?void 0:r.urlBlocklist)||[]}Pt(e){var s;return this.Et.length===0?ss:((s=this._instance)==null?void 0:s.get_property(Eo))===e?es:ct}triggerStatus(e){var s=this.Pt(e),r=s===es?es:s===ct?ct:ss;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:r}),r}checkUrlTriggerConditions(e,s,r){if(I!==void 0&&I.location.href){var a=I.location.href,i=this.urlBlocked,o=gu(a,this.It);i&&o||(o&&!i?e():!o&&i&&s(),gu(a,this.Et)&&r("url"))}}stop(){}}class Vw{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ct;return _e(this.linkedFlag)&&(e=ss),this.linkedFlagSeen&&(e=es),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,s){var r;if(this.linkedFlag=((r=e.sessionRecording)==null?void 0:r.linkedFlag)||null,!_e(this.linkedFlag)&&!this.linkedFlagSeen){var a=$e(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,i=$e(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,l)=>{var c=!1;if(Le(l)&&a in l){var d=l[a];c=Kt(d)?d===!0:i?d===i:!!d}this.linkedFlagSeen=c,c&&s(a,i)})}}stop(){this.Rt()}}class zw{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var s;this.Tt=((s=e.sessionRecording)==null?void 0:s.eventTriggers)||[]}Mt(e){var s;return this.Tt.length===0?ss:((s=this._instance)==null?void 0:s.get_property(To))===e?es:ct}triggerStatus(e){var s=this.Mt(e),r=s===es?es:s===ct?ct:ss;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:r}),r}stop(){}}function Uw(t){return t.isRecordingEnabled?un:Is}function Bw(t){if(!t.receivedFlags)return un;if(!t.isRecordingEnabled)return Is;if(t.urlTriggerMatching.urlBlocked)return nc;var e=t.isSampled===!0,s=new _f([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?sc:s===es?La:s===ct?un:t.isSampled===!1?Is:La}function Hw(t){if(!t.receivedFlags)return un;if(!t.isRecordingEnabled)return Is;if(t.urlTriggerMatching.urlBlocked)return nc;var e=new wf([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),s=e!==ss,r=Kt(t.isSampled);return s&&e===ct?un:s&&e===ss||r&&!t.isSampled?Is:t.isSampled===!0?sc:La}var or="[SessionRecording]",at=Xe(or);function ia(){var t;return ge==null||(t=ge.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var qw=3e5,Ww=[$t.MouseMove,$t.MouseInteraction,$t.Scroll,$t.ViewportResize,$t.Input,$t.TouchMove,$t.MediaInteraction,$t.Drag],xu=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Hs(t){return function(e,s){for(var r="",a=0;a<e.length;){var i=e[a++];r+=String.fromCharCode(i)}return r}(bf(jf(JSON.stringify(t))))}function vu(t){return t.type===os.Custom&&t.data.tag==="sessionIdle"}class Gw{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(or+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,s;return this.Lt.triggerStatus(this.sessionId)===ct?6e4:(e=(s=this._instance.config.session_recording)==null?void 0:s.full_snapshot_interval_millis)!==null&&e!==void 0?e:qw}get jt(){var e=this._instance.get_property(rr);return Kt(e)?e:null}get Nt(){var e,s,r=(e=this.C)==null?void 0:e.data[((s=this.C)==null?void 0:s.data.length)-1],{sessionStartTimestamp:a}=this.At.checkAndGetSessionAndWindowId(!0);return r?r.timestamp-a:null}get zt(){var e=!!this._instance.get_property(Co),s=!this._instance.config.disable_session_recording;return I&&e&&s}get Ut(){var e=!!this._instance.get_property(Wd),s=this._instance.config.enable_recording_console_log;return s??e}get qt(){var e,s,r,a,i,o,l=this._instance.config.session_recording.captureCanvas,c=this._instance.get_property(Yd),d=(e=(s=l==null?void 0:l.recordCanvas)!==null&&s!==void 0?s:c==null?void 0:c.enabled)!==null&&e!==void 0&&e,u=(r=(a=l==null?void 0:l.canvasFps)!==null&&a!==void 0?a:c==null?void 0:c.fps)!==null&&r!==void 0?r:4,h=(i=(o=l==null?void 0:l.canvasQuality)!==null&&o!==void 0?o:c==null?void 0:c.quality)!==null&&i!==void 0?i:.4;if(typeof h=="string"){var m=parseFloat(h);h=isNaN(m)?.4:m}return{enabled:d,fps:Tt(u,0,12,"canvas recording fps",4),quality:Tt(h,0,1,"canvas recording quality",.4)}}get Bt(){var e,s,r=this._instance.get_property(Gd),a={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(s=this._instance.config.session_recording)==null?void 0:s.recordBody},i=(a==null?void 0:a.recordHeaders)||(r==null?void 0:r.recordHeaders),o=(a==null?void 0:a.recordBody)||(r==null?void 0:r.recordBody),l=Le(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,c=!!(Kt(l)?l:r!=null&&r.capturePerformance);return i||o||c?{recordHeaders:i,recordBody:o,recordPerformance:c}:void 0}get Ht(){var e,s,r,a,i,o,l=this._instance.get_property(Kd),c={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(s=this._instance.config.session_recording)==null?void 0:s.maskTextSelector,blockSelector:(r=this._instance.config.session_recording)==null?void 0:r.blockSelector},d=(a=c==null?void 0:c.maskAllInputs)!==null&&a!==void 0?a:l==null?void 0:l.maskAllInputs,u=(i=c==null?void 0:c.maskTextSelector)!==null&&i!==void 0?i:l==null?void 0:l.maskTextSelector,h=(o=c==null?void 0:c.blockSelector)!==null&&o!==void 0?o:l==null?void 0:l.blockSelector;return J(d)&&J(u)&&J(h)?void 0:{maskAllInputs:d==null||d,maskTextSelector:u,blockSelector:h}}get Wt(){var e=this._instance.get_property(Jd);return lt(e)?e:null}get Gt(){var e=this._instance.get_property(Xd);return lt(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):un}constructor(e){if(this.Vt=Uw,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new Lw,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(ne!=null&&ne.visibilityState){var a="window "+ne.visibilityState;this.ui(a,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw at.error("started without valid sessionManager"),new Error(or+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(or+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new Vw(this._instance),this.Kt=new $w(this._instance),this.Yt=new zw(this._instance);var{sessionId:s,windowId:r}=this.At.checkAndGetSessionAndWindowId();this.Ct=s,this.fi=r,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&at.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Fe(I,"beforeunload",this.oi),Fe(I,"offline",this.li),Fe(I,"online",this.hi),Fe(I,"visibilitychange",this.di),this.mi(),this.bi(),_e(this.ii)&&(this.ii=this._instance.on("eventCaptured",s=>{try{if(s.event==="$pageview"){var r=s!=null&&s.properties.$current_url?this.yi(s==null?void 0:s.properties.$current_url):"";if(!r)return;this.ui("$pageview",{href:r})}}catch(a){at.error("Could not add $pageview to rrweb session",a)}})),this.ei||(this.ei=this.At.onSessionId((s,r,a)=>{var i,o;a&&(this.ui("$session_id_change",{sessionId:s,windowId:r,changeReason:a}),(i=this._instance)==null||(i=i.persistence)==null||i.unregister(To),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(Eo))}))):this.stopRecording()}stopRecording(){var e,s,r,a;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,I==null||I.removeEventListener("beforeunload",this.oi),I==null||I.removeEventListener("offline",this.li),I==null||I.removeEventListener("online",this.hi),I==null||I.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(s=this.ni)==null||s.call(this),this.ni=void 0,(r=this.ei)==null||r.call(this),this.ei=void 0,(a=this.si)==null||a.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),at.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(rr)}$i(e){var s,r=this.Ct!==e,a=this.Wt;if(lt(a)){var i=this.jt,o=r||!Kt(i),l=o?Ow(e,a):i;o&&(l?this.xi(sc):at.warn("Sample rate ("+a+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:a,isSampled:l})),(s=this._instance.persistence)==null||s.register({[rr]:l})}else this.Si()}onRemoteConfig(e){var s,r,a,i;this.ui("$remote_config_received",e),this.ki(e),(s=e.sessionRecording)!=null&&s.endpoint&&(this.vi=(i=e.sessionRecording)==null?void 0:i.endpoint),this.mi(),((r=e.sessionRecording)==null?void 0:r.triggerMatchType)==="any"?(this.Vt=Bw,this.Lt=new _f([this.Yt,this.Kt])):(this.Vt=Hw,this.Lt=new wf([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(a=e.sessionRecording)==null?void 0:a.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,l)=>{this.xi("linked_flag_matched",{flag:o,variant:l})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){lt(this.Wt)&&_e(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}ki(e){if(this._instance.persistence){var s,r=this._instance.persistence,a=()=>{var i,o,l,c,d,u,h,m,p,g=(i=e.sessionRecording)==null?void 0:i.sampleRate,x=_e(g)?null:parseFloat(g);_e(x)&&this.Si();var b=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;r.register({[Co]:!!e.sessionRecording,[Wd]:(l=e.sessionRecording)==null?void 0:l.consoleLogRecordingEnabled,[Gd]:te({capturePerformance:e.capturePerformance},(c=e.sessionRecording)==null?void 0:c.networkPayloadCapture),[Kd]:(d=e.sessionRecording)==null?void 0:d.masking,[Yd]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(h=e.sessionRecording)==null?void 0:h.canvasFps,quality:(m=e.sessionRecording)==null?void 0:m.canvasQuality},[Jd]:x,[Xd]:J(b)?null:b,[Zd]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};a(),(s=this.ri)==null||s.call(this),this.ri=this.At.onSessionId(a)}}log(e,s){var r;s===void 0&&(s="log"),(r=this._instance.sessionRecording)==null||r.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:s,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!J(Object.assign)&&!J(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var s;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),ia()?this.Ei():(s=ge.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,this.Ii,r=>{if(r)return at.error("could not load recorder",r);this.Ei()}),at.info("starting"),this.status===La&&this.xi(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(Zd))==null?void 0:e.script)||"recorder"}Pi(e){var s;return e.type===3&&Ww.indexOf((s=e.data)==null?void 0:s.source)!==-1}Ri(e){var s=this.Pi(e);s||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var r=!1;if(s&&(this.ti=e.timestamp,this.Zt)){var a=this.Zt==="unknown";this.Zt=!1,a||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),r=!0)}if(!this.Zt){var{windowId:i,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!s,e.timestamp),l=this.Ct!==o,c=this.fi!==i;this.fi=i,this.Ct=o,l||c?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):r&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(s){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):at.warn("could not emit queued rrweb event.",s,e),!1}}ui(e,s){return this.Mi(xu(()=>ia().addCustomEvent(e,s)))}Ci(){return this.Mi(xu(()=>ia().takeFullSnapshot()))}Ei(){var e,s,r,a,i={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[l,c]of Object.entries(o||{}))l in i&&(l==="maskInputOptions"?i.maskInputOptions=te({password:!0},c):i[l]=c);this.qt&&this.qt.enabled&&(i.recordCanvas=!0,i.sampling={canvas:this.qt.fps},i.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(i.maskAllInputs=(s=this.Ht.maskAllInputs)===null||s===void 0||s,i.maskTextSelector=(r=this.Ht.maskTextSelector)!==null&&r!==void 0?r:void 0,i.blockSelector=(a=this.Ht.blockSelector)!==null&&a!==void 0?a:void 0);var d=ia();if(d){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new Cw(d,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(h,m)=>{var p="Too many mutations on node '"+h+"'. Rate limiting. This could be due to SVG animations or something similar";at.info(p,{node:m}),this.log(or+" "+p,"warn")}});var u=this.Oi();this.ci=d(te({emit:h=>{this.onRRwebEmit(h)},plugins:u},i)),this.ti=Date.now(),this.Zt=Kt(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:i,activePlugins:u.map(h=>h==null?void 0:h.name)}),this.ui("$posthog_config",{config:this._instance.config})}else at.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,s,r=[],a=(e=ge.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;a&&this.Ut&&r.push(a());var i=(s=ge.__PosthogExtensions__)==null||(s=s.rrwebPlugins)==null?void 0:s.getRecordNetworkPlugin;return this.Bt&&It(i)&&(!W_.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(i(Sw(this._instance.config,this.Bt))):at.info("NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var s;if(this.Ai(),e&&Le(e)){if(e.type===os.Meta){var r=this.yi(e.data.href);if(this.Di=r,!r)return;e.data.href=r}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),m=>this.zi(m)),!this.Kt.urlBlocked||(a=e).type===os.Custom&&a.data.tag==="recording paused"){var a;e.type===os.FullSnapshot&&this.Ti(),e.type===os.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ct&&this.pi();var i=this.Fi?this.Fi.throttleMutations(e):e;if(i){var o=function(m){var p=m;if(p&&Le(p)&&p.type===6&&Le(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var g=[],x=0;x<p.data.payload.payload.length;x++)p.data.payload.payload[x]&&p.data.payload.payload[x].length>2e3?g.push(p.data.payload.payload[x].slice(0,2e3)+"...[truncated]"):g.push(p.data.payload.payload[x]);return p.data.payload.payload=g,m}return m}(i);if(this.Ri(o),this.Zt!==!0||vu(o)){if(vu(o)){var l=o.data.payload;if(l){var c=l.lastActivityTimestamp,d=l.threshold;o.timestamp=c+d}}var u=(s=this._instance.config.session_recording.compress_events)===null||s===void 0||s?function(m){if(Da(m)<1024)return m;try{if(m.type===os.FullSnapshot)return te({},m,{data:Hs(m.data),cv:"2024-10"});if(m.type===os.IncrementalSnapshot&&m.data.source===$t.Mutation)return te({},m,{cv:"2024-10",data:te({},m.data,{texts:Hs(m.data.texts),attributes:Hs(m.data.attributes),removes:Hs(m.data.removes),adds:Hs(m.data.adds)})});if(m.type===os.IncrementalSnapshot&&m.data.source===$t.StyleSheetRule)return te({},m,{cv:"2024-10",data:te({},m.data,{adds:m.data.adds?Hs(m.data.adds):void 0,removes:m.data.removes?Hs(m.data.removes):void 0})})}catch(p){at.error("could not compress event - will use uncompressed event",p)}return m}(o):o,h={$snapshot_bytes:Da(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Is?this.Ui(h):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&I){var e=this.yi(I.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(s=>{Date.now()-s.enqueuedAt<=2e3&&this.Mi(s)})}}yi(e){var s=this._instance.config.session_recording;if(s.maskNetworkRequestFn){var r,a={url:e};return(r=a=s.maskNetworkRequestFn(a))==null?void 0:r.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,s=this.Nt,r=lt(s)&&s>=0,a=lt(e)&&r&&s<e;return this.status===un||this.status===nc||this.status===Is||a?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&Lo(this.C).forEach(i=>{this.Bi({$snapshot_bytes:i.size,$snapshot_data:i.data,$session_id:i.sessionId,$window_id:i.windowId,$lib:"web",$lib_version:ls.LIB_VERSION})}),this.pi())}Ui(e){var s,r=2+(((s=this.C)==null?void 0:s.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+r>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var s;this.Lt.triggerStatus(this.sessionId)===ct&&((s=this._instance)==null||(s=s.persistence)==null||s.register({[e==="url"?Eo:To]:this.Ct}),this.ai(),this.xi(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),at.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),at.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&_e(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(s){at.error("Could not activate event trigger",s)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.xi("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[rr]:!0}),this.Ci(),this.xi("sampling_overridden")}overrideTrigger(e){this.zi(e)}xi(e,s){this._instance.register_for_session({$session_recording_start_reason:e}),at.info(e.replace("_"," "),s),ve(["recording_initialized","session_id_changed"],e)||this.ui(e,s)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Oi=Xe("[SegmentIntegration]");function Kw(t,e){var s=t.config.segment;if(!s)return e();(function(r,a){var i=r.config.segment;if(!i)return a();var o=c=>{var d=()=>c.anonymousId()||Cs();r.config.get_device_id=d,c.id()&&(r.register({distinct_id:c.id(),$device_id:d()}),r.persistence.set_property(is,"identified")),a()},l=i.user();"then"in l&&It(l.then)?l.then(c=>o(c)):o(l)})(t,()=>{s.register((r=>{Promise&&Promise.resolve||Oi.warn("This browser does not have Promise support, and can not use the segment integration");var a=(i,o)=>{if(!o)return i;i.event.userId||i.event.anonymousId===r.get_distinct_id()||(Oi.info("No userId set, resetting PostHog"),r.reset()),i.event.userId&&i.event.userId!==r.get_distinct_id()&&(Oi.info("UserId set, identifying with PostHog"),r.identify(i.event.userId));var l=r.calculateEventProperties(o,i.event.properties);return i.event.properties=Object.assign({},l,i.event.properties),i};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:i=>a(i,i.event.event),page:i=>a(i,"$pageview"),identify:i=>a(i,"$identify"),screen:i=>a(i,"$screen")}})(t)).then(()=>{e()})})}var Nf="posthog-js";function kf(t,e){var{organization:s,projectId:r,prefix:a,severityAllowList:i=["error"]}=e===void 0?{}:e;return o=>{var l,c,d,u,h;if(!(i==="*"||i.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var m=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=m,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((l=o.exception)==null?void 0:l.values)||[],g=p.map(b=>te({},b,{stacktrace:b.stacktrace?te({},b.stacktrace,{type:"raw",frames:(b.stacktrace.frames||[]).map(y=>te({},y,{platform:"web:javascript"}))}):void 0})),x={$exception_message:((c=p[0])==null?void 0:c.value)||o.message,$exception_type:(d=p[0])==null?void 0:d.type,$exception_personURL:m,$exception_level:o.level,$exception_list:g,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(h=p[0])==null?void 0:h.type,$sentry_tags:o.tags};return s&&r&&(x.$sentry_url=(a||"https://sentry.io/organizations/")+s+"/issues/?project="+r+"&query="+o.event_id),t.exceptions.sendExceptionEvent(x),o}}class Yw{constructor(e,s,r,a,i){this.name=Nf,this.setupOnce=function(o){o(kf(e,{organization:s,projectId:r,prefix:a,severityAllowList:i}))}}}var Jw=I!=null&&I.location?Ia(I.location.hash,"__posthog")||Ia(location.hash,"state"):null,yu="_postHogToolbarParams",bu=Xe("[Toolbar]"),ks=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(ks||{});class Xw{constructor(e){this.instance=e}Hi(e){ge.ph_toolbar_state=e}Wi(){var e;return(e=ge.ph_toolbar_state)!==null&&e!==void 0?e:ks.UNINITIALIZED}maybeLoadToolbar(e,s,r){if(e===void 0&&(e=void 0),s===void 0&&(s=void 0),r===void 0&&(r=void 0),!I||!ne)return!1;e=e??I.location,r=r??I.history;try{if(!s){try{I.localStorage.setItem("test","test"),I.localStorage.removeItem("test")}catch{return!1}s=I==null?void 0:I.localStorage}var a,i=Jw||Ia(e.hash,"__posthog")||Ia(e.hash,"state"),o=i?Vd(()=>JSON.parse(atob(decodeURIComponent(i))))||Vd(()=>JSON.parse(decodeURIComponent(i))):null;return o&&o.action==="ph_authorize"?((a=o).source="url",a&&Object.keys(a).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((a=JSON.parse(s.getItem(yu)||"{}")).source="localstorage",delete a.userIntent),!(!a.token||this.instance.config.token!==a.token)&&(this.loadToolbar(a),!0)}catch{return!1}}Gi(e){var s=ge.ph_load_toolbar||ge.ph_load_editor;!_e(s)&&It(s)?s(e,this.instance):bu.warn("No toolbar load function found")}loadToolbar(e){var s=!(ne==null||!ne.getElementById(Yp));if(!I||s)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,a=te({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(I.localStorage.setItem(yu,JSON.stringify(te({},a,{source:void 0}))),this.Wi()===ks.LOADED)this.Gi(a);else if(this.Wi()===ks.UNINITIALIZED){var i;this.Hi(ks.LOADING),(i=ge.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return bu.error("[Toolbar] Failed to load",o),void this.Hi(ks.UNINITIALIZED);this.Hi(ks.LOADED),this.Gi(a)}),Fe(I,"turbolinks:load",()=>{this.Hi(ks.UNINITIALIZED),this.loadToolbar(a)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,s,r){return e===void 0&&(e=void 0),s===void 0&&(s=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,s,r)}}var Zw=Xe("[TracingHeaders]");class Qw{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var s,r;J(this.Vi)&&((s=ge.__PosthogExtensions__)==null||(s=s.tracingHeadersPatchFns)==null||s._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),J(this.Ki)&&((r=ge.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var s,r;(s=ge.__PosthogExtensions__)!=null&&s.tracingHeadersPatchFns&&e(),(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",a=>{if(a)return Zw.error("failed to load script",a);e()})}startIfEnabledOrStop(){var e,s;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(s=this.Ki)==null||s.call(this),this.Vi=void 0,this.Ki=void 0)}}var _s=Xe("[Web Vitals]"),ju=9e5;class e2{constructor(e){var s;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((r,a)=>te({},r,{["$web_vitals_"+a.name+"_event"]:te({},a),["$web_vitals_"+a.name+"_value"]:a.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=r=>{var a,i=(a=this._instance.sessionManager)==null?void 0:a.checkAndGetSessionAndWindowId(!0);if(J(i))_s.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();J(o)||(_e(r==null?void 0:r.name)||_e(r==null?void 0:r.value)?_s.error("Invalid metric received",r):this.ie&&r.value>=this.ie?_s.error("Ignoring metric with value >= "+this.ie,r):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),J(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=J(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.C.metrics.push(te({},r,{$current_url:o,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var r,a,i,o,l=ge.__PosthogExtensions__;J(l)||J(l.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:a,onFCP:i,onINP:o}=l.postHogWebVitalsCallbacks),r&&a&&i&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&a(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):_s.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((s=this._instance.persistence)==null||!s.props[Hd]),this.startIfEnabled()}get allowedMetrics(){var e,s,r=Le(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return J(r)?((s=this._instance.persistence)==null?void 0:s.props[qd])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Le(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=Le(this._instance.config.capture_performance)&&lt(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:ju;return 0<e&&e<=6e4?ju:e}get isEnabled(){var e=vt==null?void 0:vt.protocol;if(e!=="http:"&&e!=="https:")return _s.info("Web Vitals are disabled on non-http/https protocols"),!1;var s=Le(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Kt(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Kt(s)?s:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(_s.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var s=Le(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Le(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[Hd]:s}),this._instance.persistence.register({[qd]:r})),this.Yi=s,this.startIfEnabled()}J(e){var s,r;(s=ge.__PosthogExtensions__)!=null&&s.postHogWebVitalsCallbacks&&e(),(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",a=>{a?_s.error("failed to load script",a):e()})}te(){var e=I?I.location.href:void 0;return e||_s.error("Could not determine current URL"),e}}var t2=Xe("[Heatmaps]");function _u(t){return Le(t)&&"clientX"in t&&"clientY"in t&&lt(t.clientX)&&lt(t.clientY)}class s2{constructor(e){var s;this.rageclicks=new of,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((s=this.instance.persistence)==null||!s.props[ko])}get flushIntervalMilliseconds(){var e=5e3;return Le(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return J(this.instance.config.capture_heatmaps)?J(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;t2.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,s;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(s=this.ne)==null||s.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var s=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[ko]:s}),this.Yi=s,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){I&&ne&&(Fe(I,"beforeunload",this.se.bind(this)),Fe(ne,"click",e=>this.ae(e||(I==null?void 0:I.event)),{capture:!0}),Fe(ne,"mousemove",e=>this.le(e||(I==null?void 0:I.event)),{capture:!0}),this.ne=new cf(this.instance,iw,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,s){var r=this.instance.scrollManager.scrollY(),a=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),o=function(l,c,d){for(var u=l;u&&ai(u)&&!Ts(u,"body");){if(u===d)return!1;if(ve(c,I==null?void 0:I.getComputedStyle(u).position))return!0;u=ef(u)}return!1}(Qp(e),["fixed","sticky"],i);return{x:e.clientX+(o?0:a),y:e.clientY+(o?0:r),target_fixed:o,type:s}}ae(e,s){var r;if(s===void 0&&(s="click"),!Qd(e.target)&&_u(e)){var a=this.ue(e,s);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(te({},a,{type:"rageclick"})),this.he(a)}}le(e){!Qd(e.target)&&_u(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(I){var s=I.location.href;this.C=this.C||{},this.C[s]||(this.C[s]=[]),this.C[s].push(e)}}se(){this.C&&!En(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class n2{constructor(e){this._instance=e}doPageView(e,s){var r,a=this.ve(e,s);return this.ce={pathname:(r=I==null?void 0:I.location.pathname)!==null&&r!==void 0?r:"",pageViewId:s,timestamp:e},this._instance.scrollManager.resetContext(),a}doPageLeave(e){var s;return this.ve(e,(s=this.ce)==null?void 0:s.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,s){var r=this.ce;if(!r)return{$pageview_id:s};var a={$pageview_id:s,$prev_pageview_id:r.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:l,maxScrollY:c,maxContentHeight:d,lastContentY:u,maxContentY:h}=i;if(!(J(o)||J(l)||J(c)||J(d)||J(u)||J(h))){o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),d=Math.ceil(d),u=Math.ceil(u),h=Math.ceil(h);var m=o<=1?1:Tt(l/o,0,1),p=o<=1?1:Tt(c/o,0,1),g=d<=1?1:Tt(u/d,0,1),x=d<=1?1:Tt(h/d,0,1);a=Ue(a,{$prev_pageview_last_scroll:l,$prev_pageview_last_scroll_percentage:m,$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:g,$prev_pageview_max_content:h,$prev_pageview_max_content_percentage:x})}}return r.pathname&&(a.$prev_pageview_pathname=r.pathname),r.timestamp&&(a.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),a}}var r2=function(t){var e,s,r,a,i="";for(e=s=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,a=0;a<r;a++){var o=t.charCodeAt(a),l=null;o<128?s++:l=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Ls(l)||(s>e&&(i+=t.substring(e,s)),i+=l,e=s=a+1)}return s>e&&(i+=t.substring(e,t.length)),i},a2=!!_o||!!jo,wu="text/plain",$a=(t,e)=>{var[s,r]=t.split("?"),a=te({},e);r==null||r.split("&").forEach(o=>{var[l]=o.split("=");delete a[l]});var i=G_(a);return s+"?"+(i=i?(r?r+"&":"")+i:r)},lr=(t,e)=>JSON.stringify(t,(s,r)=>typeof r=="bigint"?r.toString():r,e),Li=t=>{var{data:e,compression:s}=t;if(e){if(s===cs.GZipJS){var r=bf(jf(lr(e)),{mtime:0}),a=new Blob([r],{type:wu});return{contentType:wu,body:a,estimatedSize:a.size}}if(s===cs.Base64){var i=function(c){var d,u,h,m,p,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x=0,b=0,y="",v=[];if(!c)return c;c=r2(c);do d=(p=c.charCodeAt(x++)<<16|c.charCodeAt(x++)<<8|c.charCodeAt(x++))>>18&63,u=p>>12&63,h=p>>6&63,m=63&p,v[b++]=g.charAt(d)+g.charAt(u)+g.charAt(h)+g.charAt(m);while(x<c.length);switch(y=v.join(""),c.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"="}return y}(lr(e)),o=(c=>"data="+encodeURIComponent(typeof c=="string"?c:lr(c)))(i);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var l=lr(e);return{contentType:"application/json",body:l,estimatedSize:new Blob([l]).size}}},vr=[];jo&&vr.push({transport:"fetch",method:t=>{var e,s,{contentType:r,body:a,estimatedSize:i}=(e=Li(t))!==null&&e!==void 0?e:{},o=new Headers;Se(t.headers,function(u,h){o.append(h,u)}),r&&o.append("Content-Type",r);var l=t.url,c=null;if(Ld){var d=new Ld;c={signal:d.signal,timeout:setTimeout(()=>d.abort(),t.timeout)}}jo(l,te({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(i||0)<52428.8,body:a,signal:(s=c)==null?void 0:s.signal},t.fetchOptions)).then(u=>u.text().then(h=>{var m={statusCode:u.status,text:h};if(u.status===200)try{m.json=JSON.parse(h)}catch(p){ae.error(p)}t.callback==null||t.callback(m)})).catch(u=>{ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>c?clearTimeout(c.timeout):null)}}),_o&&vr.push({transport:"XHR",method:t=>{var e,s=new _o;s.open(t.method||"GET",t.url,!0);var{contentType:r,body:a}=(e=Li(t))!==null&&e!==void 0?e:{};Se(t.headers,function(i,o){s.setRequestHeader(o,i)}),r&&s.setRequestHeader("Content-Type",r),t.timeout&&(s.timeout=t.timeout),s.withCredentials=!0,s.onreadystatechange=()=>{if(s.readyState===4){var i={statusCode:s.status,text:s.responseText};if(s.status===200)try{i.json=JSON.parse(s.responseText)}catch{}t.callback==null||t.callback(i)}},s.send(a)}}),Et!=null&&Et.sendBeacon&&vr.push({transport:"sendBeacon",method:t=>{var e=$a(t.url,{beacon:"1"});try{var s,{contentType:r,body:a}=(s=Li(t))!==null&&s!==void 0?s:{},i=typeof a=="string"?new Blob([a],{type:r}):a;Et.sendBeacon(e,i)}catch{}}});var Vn=function(t,e){if(!function(s){try{new RegExp(s)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function Nu(t,e,s){return lr({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:s})}var i2={exact:(t,e)=>e.some(s=>t.some(r=>s===r)),is_not:(t,e)=>e.every(s=>t.every(r=>s!==r)),regex:(t,e)=>e.some(s=>t.some(r=>Vn(s,r))),not_regex:(t,e)=>e.every(s=>t.every(r=>!Vn(s,r))),icontains:(t,e)=>e.map(oa).some(s=>t.map(oa).some(r=>s.includes(r))),not_icontains:(t,e)=>e.map(oa).every(s=>t.map(oa).every(r=>!s.includes(r)))},oa=t=>t.toLowerCase(),ku=Xe("[Error tracking]");class o2{constructor(e){var s,r;this.fe=[],this._instance=e,this.fe=(s=(r=this._instance.persistence)==null?void 0:r.get_property(So))!==null&&s!==void 0?s:[]}onRemoteConfig(e){var s,r,a,i=(s=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&s!==void 0?s:[],o=(a=e.errorTracking)==null?void 0:a.captureExtensionExceptions;this.fe=i,this._instance.persistence&&this._instance.persistence.register({[So]:this.fe,[Bd]:o})}get pe(){var e,s=!!this._instance.get_property(Bd),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??s)!==null&&e!==void 0&&e}sendExceptionEvent(e){if(this.ge(e))ku.info("Skipping exception capture because a suppression rule matched");else{if(this.pe||!this._e(e))return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"});ku.info("Skipping exception capture because it was thrown by an extension")}}ge(e){var s=e.$exception_list;if(!s||!Me(s)||s.length===0)return!1;var r=s.reduce((a,i)=>{var{type:o,value:l}=i;return $e(o)&&o.length>0&&a.$exception_types.push(o),$e(l)&&l.length>0&&a.$exception_values.push(l),a},{$exception_types:[],$exception_values:[]});return this.fe.some(a=>{var i=a.values.map(o=>{var l,c=i2[o.operator],d=Me(o.value)?o.value:[o.value],u=(l=r[o.key])!==null&&l!==void 0?l:[];return d.length>0&&c(d,u)});return a.type==="OR"?i.some(Boolean):i.every(Boolean)})}_e(e){var s=e.$exception_list;return!(!s||!Me(s))&&s.flatMap(r=>{var a,i;return(a=(i=r.stacktrace)==null?void 0:i.frames)!==null&&a!==void 0?a:[]}).some(r=>r.filename&&r.filename.startsWith("chrome-extension://"))}}var Dt="Mobile",Va="iOS",Yt="Android",Rr="Tablet",Sf=Yt+" "+Rr,Cf="iPad",Ef="Apple",Tf=Ef+" Watch",Ir="Safari",zn="BlackBerry",Mf="Samsung",Af=Mf+"Browser",Pf=Mf+" Internet",hn="Chrome",l2=hn+" OS",Rf=hn+" "+Va,ac="Internet Explorer",If=ac+" "+Dt,ic="Opera",c2=ic+" Mini",oc="Edge",Ff="Microsoft "+oc,Pn="Firefox",Df=Pn+" "+Va,Fr="Nintendo",Dr="PlayStation",Rn="Xbox",Of=Yt+" "+Dt,Lf=Dt+" "+Ir,cr="Windows",qo=cr+" Phone",Su="Nokia",Wo="Ouya",$f="Generic",d2=$f+" "+Dt.toLowerCase(),Vf=$f+" "+Rr.toLowerCase(),Go="Konqueror",ht="(\\d+(\\.\\d+)?)",$i=new RegExp("Version/"+ht),u2=new RegExp(Rn,"i"),h2=new RegExp(Dr+" \\w+","i"),m2=new RegExp(Fr+" \\w+","i"),lc=new RegExp(zn+"|PlayBook|BB10","i"),p2={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},f2=(t,e)=>e&&ve(e,Ef)||function(s){return ve(s,Ir)&&!ve(s,hn)&&!ve(s,Yt)}(t),zf=function(t,e){return e=e||"",ve(t," OPR/")&&ve(t,"Mini")?c2:ve(t," OPR/")?ic:lc.test(t)?zn:ve(t,"IE"+Dt)||ve(t,"WPDesktop")?If:ve(t,Af)?Pf:ve(t,oc)||ve(t,"Edg/")?Ff:ve(t,"FBIOS")?"Facebook "+Dt:ve(t,"UCWEB")||ve(t,"UCBrowser")?"UC Browser":ve(t,"CriOS")?Rf:ve(t,"CrMo")||ve(t,hn)?hn:ve(t,Yt)&&ve(t,Ir)?Of:ve(t,"FxiOS")?Df:ve(t.toLowerCase(),Go.toLowerCase())?Go:f2(t,e)?ve(t,Dt)?Lf:Ir:ve(t,Pn)?Pn:ve(t,"MSIE")||ve(t,"Trident/")?ac:ve(t,"Gecko")?Pn:""},g2={[If]:[new RegExp("rv:"+ht)],[Ff]:[new RegExp(oc+"?\\/"+ht)],[hn]:[new RegExp("("+hn+"|CrMo)\\/"+ht)],[Rf]:[new RegExp("CriOS\\/"+ht)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+ht)],[Ir]:[$i],[Lf]:[$i],[ic]:[new RegExp("(Opera|OPR)\\/"+ht)],[Pn]:[new RegExp(Pn+"\\/"+ht)],[Df]:[new RegExp("FxiOS\\/"+ht)],[Go]:[new RegExp("Konqueror[:/]?"+ht,"i")],[zn]:[new RegExp(zn+" "+ht),$i],[Of]:[new RegExp("android\\s"+ht,"i")],[Pf]:[new RegExp(Af+"\\/"+ht)],[ac]:[new RegExp("(rv:|MSIE )"+ht)],Mozilla:[new RegExp("rv:"+ht)]},x2=function(t,e){var s=zf(t,e),r=g2[s];if(J(r))return null;for(var a=0;a<r.length;a++){var i=r[a],o=t.match(i);if(o)return parseFloat(o[o.length-2])}return null},Cu=[[new RegExp(Rn+"; "+Rn+" (.*?)[);]","i"),t=>[Rn,t&&t[1]||""]],[new RegExp(Fr,"i"),[Fr,""]],[new RegExp(Dr,"i"),[Dr,""]],[lc,[zn,""]],[new RegExp(cr,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[qo,""];if(new RegExp(Dt).test(e)&&!/IEMobile\b/.test(e))return[cr+" "+Dt,""];var s=/Windows NT ([0-9.]+)/i.exec(e);if(s&&s[1]){var r=s[1],a=p2[r]||"";return/arm/i.test(e)&&(a="RT"),[cr,a]}return[cr,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[Va,e.join(".")]}return[Va,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=J(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Yt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Yt+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Yt,e.join(".")]}return[Yt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var s=[t[1],t[2],t[3]||"0"];e[1]=s.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[l2,""]],[/Linux|debian/i,["Linux",""]]],Eu=function(t){return m2.test(t)?Fr:h2.test(t)?Dr:u2.test(t)?Rn:new RegExp(Wo,"i").test(t)?Wo:new RegExp("("+qo+"|WPDesktop)","i").test(t)?qo:/iPad/.test(t)?Cf:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?Tf:lc.test(t)?zn:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(Su,"i").test(t)?Su:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Dt).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Yt:Sf:Yt:new RegExp("(pda|"+Dt+")","i").test(t)?d2:new RegExp(Rr,"i").test(t)&&!new RegExp(Rr+" pc","i").test(t)?Vf:""},la="https?://(.*)",oi=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],v2=ri(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],oi),cc="<masked>",y2=["li_fat_id"];function Uf(t,e,s){if(!ne)return{};var r,a=e?ri([],oi,s||[]):[],i=Bf(Zl(ne.URL,a,cc),t),o=(r={},Se(y2,function(l){var c=Qt.D(l);r[l]=c||null}),r);return Ue(o,i)}function Bf(t,e){var s=v2.concat(e||[]),r={};return Se(s,function(a){var i=Ra(t,a);r[a]=i||null}),r}function Hf(t){var e=function(i){return i?i.search(la+"google.([^/?]*)")===0?"google":i.search(la+"bing.com")===0?"bing":i.search(la+"yahoo.com")===0?"yahoo":i.search(la+"duckduckgo.com")===0?"duckduckgo":null:null}(t),s=e!="yahoo"?"q":"p",r={};if(!Ls(e)){r.$search_engine=e;var a=ne?Ra(ne.referrer,s):"";a.length&&(r.ph_keyword=a)}return r}function Tu(){return navigator.language||navigator.userLanguage}function qf(){return(ne==null?void 0:ne.referrer)||"$direct"}function Wf(t,e){var s=t?ri([],oi,e||[]):[],r=vt==null?void 0:vt.href.substring(0,1e3);return{r:qf().substring(0,1e3),u:r?Zl(r,s,cc):void 0}}function Gf(t){var e,{r:s,u:r}=t,a={$referrer:s,$referring_domain:s==null?void 0:s=="$direct"?"$direct":(e=Ln(s))==null?void 0:e.host};if(r){a.$current_url=r;var i=Ln(r);a.$host=i==null?void 0:i.host,a.$pathname=i==null?void 0:i.pathname;var o=Bf(r);Ue(a,o)}if(s){var l=Hf(s);Ue(a,l)}return a}function Kf(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function b2(){try{return new Date().getTimezoneOffset()}catch{return}}function j2(t,e){if(!xt)return{};var s,r,a,i=t?ri([],oi,e||[]):[],[o,l]=function(c){for(var d=0;d<Cu.length;d++){var[u,h]=Cu[d],m=u.exec(c),p=m&&(It(h)?h(m,c):h);if(p)return p}return["",""]}(xt);return Ue(Jl({$os:o,$os_version:l,$browser:zf(xt,navigator.vendor),$device:Eu(xt),$device_type:(r=xt,a=Eu(r),a===Cf||a===Sf||a==="Kobo"||a==="Kindle Fire"||a===Vf?Rr:a===Fr||a===Rn||a===Dr||a===Wo?"Console":a===Tf?"Wearable":a?Dt:"Desktop"),$timezone:Kf(),$timezone_offset:b2()}),{$current_url:Zl(vt==null?void 0:vt.href,i,cc),$host:vt==null?void 0:vt.host,$pathname:vt==null?void 0:vt.pathname,$raw_user_agent:xt.length>1e3?xt.substring(0,997)+"...":xt,$browser_version:x2(xt,navigator.vendor),$browser_language:Tu(),$browser_language_prefix:(s=Tu(),typeof s=="string"?s.split("-")[0]:void 0),$screen_height:I==null?void 0:I.screen.height,$screen_width:I==null?void 0:I.screen.width,$viewport_height:I==null?void 0:I.innerHeight,$viewport_width:I==null?void 0:I.innerWidth,$lib:"web",$lib_version:ls.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Ht=Xe("[FeatureFlags]"),Vi="$active_feature_flags",bn="$override_feature_flags",Mu="$feature_flag_payloads",er="$override_feature_flag_payloads",Au="$feature_flag_request_id",Pu=t=>{var e={};for(var[s,r]of ga(t||{}))r&&(e[s]=r);return e},_2=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(s=>{var r;return[s,(r=e[s].variant)!==null&&r!==void 0?r:e[s].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(s=>e[s].enabled).filter(s=>{var r;return(r=e[s].metadata)==null?void 0:r.payload}).map(s=>{var r;return[s,(r=e[s].metadata)==null?void 0:r.payload]}))):Ht.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},w2=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({});class N2{constructor(e){this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.$e=!0;else{var e=!this.ke&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.Ee({disableFlags:e})}}get hasLoadedFlags(){return this.be}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Mo),s=this._instance.get_property(bn),r=this._instance.get_property(er);if(!r&&!s)return e||{};var a=Ue({},e||{}),i=[...new Set([...Object.keys(r||{}),...Object.keys(s||{})])];for(var o of i){var l,c,d=a[o],u=s==null?void 0:s[o],h=J(u)?(l=d==null?void 0:d.enabled)!==null&&l!==void 0&&l:!!u,m=J(u)?d.variant:typeof u=="string"?u:void 0,p=r==null?void 0:r[o],g=te({},d,{enabled:h,variant:h?m??(d==null?void 0:d.variant):void 0});h!==(d==null?void 0:d.enabled)&&(g.original_enabled=d==null?void 0:d.enabled),m!==(d==null?void 0:d.variant)&&(g.original_variant=d==null?void 0:d.variant),p&&(g.metadata=te({},d==null?void 0:d.metadata,{payload:p,original_payload:d==null||(c=d.metadata)==null?void 0:c.payload})),a[o]=g}return this.me||(Ht.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:a}),this.me=!0),a}getFlagVariants(){var e=this._instance.get_property(Tn),s=this._instance.get_property(bn);if(!s)return e||{};for(var r=Ue({},e),a=Object.keys(s),i=0;i<a.length;i++)r[a[i]]=s[a[i]];return this.me||(Ht.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:s,finalFlags:r}),this.me=!0),r}getFlagPayloads(){var e=this._instance.get_property(Mu),s=this._instance.get_property(er);if(!s)return e||{};for(var r=Ue({},e||{}),a=Object.keys(s),i=0;i<a.length;i++)r[a[i]]=s[a[i]];return this.me||(Ht.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:s,finalPayloads:r}),this.me=!0),r}reloadFeatureFlags(){this.we||this._instance.config.advanced_disable_feature_flags||this.ke||(this.ke=setTimeout(()=>{this.Ee()},5))}Ie(){clearTimeout(this.ke),this.ke=void 0}ensureFlagsLoaded(){this.be||this.ye||this.ke||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.we=e}Ee(e){var s;if(this.Ie(),!this._instance.I())if(this.ye)this.Se=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:te({},((s=this._instance.persistence)==null?void 0:s.get_initial_props())||{},this._instance.get_property(ir)||{}),group_properties:this._instance.get_property(Gs)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var a=this._instance.config.__preview_remote_config,i=a?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",l=this._instance.requestRouter.endpointFor("api",i+o);a&&(r.timezone=Kf()),this.ye=!0,this._instance.Pe({method:"POST",url:l,data:r,compression:this._instance.config.disable_compression?void 0:cs.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var d,u,h=!0;if(c.statusCode===200&&(this.Se||(this.$anon_distinct_id=void 0),h=!1),this.ye=!1,this.$e||(this.$e=!0,this._instance.Re((u=c.json)!==null&&u!==void 0?u:{})),!r.disable_flags||this.Se)if(this.xe=!h,c.json&&(d=c.json.quotaLimited)!=null&&d.includes(w2.FeatureFlags))Ht.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var m;r.disable_flags||this.receivedFeatureFlags((m=c.json)!==null&&m!==void 0?m:{},h),this.Se&&(this.Se=!1,this.Ee())}}})}}getFeatureFlag(e,s){if(s===void 0&&(s={}),this.be||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],a=""+r,i=this._instance.get_property(Au)||void 0,o=this._instance.get_property(Ta)||{};if((s.send_event||!("send_event"in s))&&(!(e in o)||!o[e].includes(a))){var l,c,d,u,h,m,p,g,x;Me(o[e])?o[e].push(a):o[e]=[a],(l=this._instance.persistence)==null||l.register({[Ta]:o});var b=this.getFeatureFlagDetails(e),y={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_bootstrapped_response:((c=this._instance.config.bootstrap)==null||(c=c.featureFlags)==null?void 0:c[e])||null,$feature_flag_bootstrapped_payload:((d=this._instance.config.bootstrap)==null||(d=d.featureFlagPayloads)==null?void 0:d[e])||null,$used_bootstrap_value:!this.xe};J(b==null||(u=b.metadata)==null?void 0:u.version)||(y.$feature_flag_version=b.metadata.version);var v,j=(h=b==null||(m=b.reason)==null?void 0:m.description)!==null&&h!==void 0?h:b==null||(p=b.reason)==null?void 0:p.code;j&&(y.$feature_flag_reason=j),b!=null&&(g=b.metadata)!=null&&g.id&&(y.$feature_flag_id=b.metadata.id),J(b==null?void 0:b.original_variant)&&J(b==null?void 0:b.original_enabled)||(y.$feature_flag_original_response=J(b.original_variant)?b.original_enabled:b.original_variant),b!=null&&(x=b.metadata)!=null&&x.original_payload&&(y.$feature_flag_original_payload=b==null||(v=b.metadata)==null?void 0:v.original_payload),this._instance.capture("$feature_flag_called",y)}return r}Ht.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,s){var r=this._instance.config.token;this._instance.Pe({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:r},compression:this._instance.config.disable_compression?void 0:cs.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:a=>{var i,o=(i=a.json)==null?void 0:i.featureFlagPayloads;s((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,s){if(s===void 0&&(s={}),this.be||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,s);Ht.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(s=>s!==e)}receivedFeatureFlags(e,s){if(this._instance.persistence){this.be=!0;var r=this.getFlagVariants(),a=this.getFlagPayloads(),i=this.getFlagsWithDetails();(function(o,l,c,d,u){c===void 0&&(c={}),d===void 0&&(d={}),u===void 0&&(u={});var h=_2(o),m=h.flags,p=h.featureFlags,g=h.featureFlagPayloads;if(p){var x=o.requestId;if(Me(p)){Ht.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var b={};if(p)for(var y=0;y<p.length;y++)b[p[y]]=!0;l&&l.register({[Vi]:p,[Tn]:b})}else{var v=p,j=g,S=m;o.errorsWhileComputingFlags&&(v=te({},c,v),j=te({},d,j),S=te({},u,S)),l&&l.register(te({[Vi]:Object.keys(Pu(v)),[Tn]:v||{},[Mu]:j||{},[Mo]:S||{}},x?{[Au]:x}:{}))}}})(e,this._instance.persistence,r,a,i),this.Te(s)}}override(e,s){s===void 0&&(s=!1),Ht.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:s})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Ht.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(bn),this._instance.persistence.unregister(er),void this.Te();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var s,r=e;if(this.me=!!((s=r.suppressWarning)!==null&&s!==void 0&&s),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(bn);else if(r.flags)if(Me(r.flags)){for(var a={},i=0;i<r.flags.length;i++)a[r.flags[i]]=!0;this._instance.persistence.register({[bn]:a})}else this._instance.persistence.register({[bn]:r.flags})}return"payloads"in r&&(r.payloads===!1?this._instance.persistence.unregister(er):r.payloads&&this._instance.persistence.register({[er]:r.payloads})),void this.Te()}this.Te()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.be){var{flags:s,flagVariants:r}=this.Me();e(s,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,s,r){var a,i=(this._instance.get_property(ar)||[]).find(d=>d.flagKey===e),o={["$feature_enrollment/"+e]:s},l={$feature_flag:e,$feature_enrollment:s,$set:o};i&&(l.$early_access_feature_name=i.name),r&&(l.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",l),this.setPersonPropertiesForFlags(o,!1);var c=te({},this.getFlagVariants(),{[e]:s});(a=this._instance.persistence)==null||a.register({[Vi]:Object.keys(Pu(c)),[Tn]:c}),this.Te()}getEarlyAccessFeatures(e,s,r){s===void 0&&(s=!1);var a=this._instance.get_property(ar),i=r?"&"+r.map(o=>"stage="+o).join("&"):"";if(a&&!s)return e(a);this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:o=>{var l,c;if(o.json){var d=o.json.earlyAccessFeatures;return(l=this._instance.persistence)==null||l.unregister(ar),(c=this._instance.persistence)==null||c.register({[ar]:d}),e(d)}}})}Me(){var e=this.getFlags(),s=this.getFlagVariants();return{flags:e.filter(r=>s[r]),flagVariants:Object.keys(s).filter(r=>s[r]).reduce((r,a)=>(r[a]=s[a],r),{})}}Te(e){var{flags:s,flagVariants:r}=this.Me();this.featureFlagEventHandlers.forEach(a=>a(s,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,s){s===void 0&&(s=!0);var r=this._instance.get_property(ir)||{};this._instance.register({[ir]:te({},r,e)}),s&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(ir)}setGroupPropertiesForFlags(e,s){s===void 0&&(s=!0);var r=this._instance.get_property(Gs)||{};Object.keys(r).length!==0&&Object.keys(r).forEach(a=>{r[a]=te({},r[a],e[a]),delete e[a]}),this._instance.register({[Gs]:te({},r,e)}),s&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var s=this._instance.get_property(Gs)||{};this._instance.register({[Gs]:te({},s,{[e]:{}})})}else this._instance.unregister(Gs)}reset(){this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this.$anon_distinct_id=void 0,this.Ie(),this.me=!1}}var k2=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class zi{constructor(e,s){this.S=e,this.props={},this.Ce=!1,this.Fe=(r=>{var a="";return r.token&&(a=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+a+"_posthog"})(e),this.B=this.Oe(e),this.load(),e.debug&&ae.info("Persistence loaded",e.persistence,te({},this.props)),this.update_config(e,e,s),this.save()}isDisabled(){return!!this.Ae}Oe(e){k2.indexOf(e.persistence.toLowerCase())===-1&&(ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var s=e.persistence.toLowerCase();return s==="localstorage"&&Ge.O()?Ge:s==="localstorage+cookie"&&ea.O()?ea:s==="sessionstorage"&&tt.O()?tt:s==="memory"?rw:s==="cookie"?Qt:ea.O()?ea:Qt}properties(){var e={};return Se(this.props,function(s,r){if(r===Tn&&Le(s))for(var a=Object.keys(s),i=0;i<a.length;i++)e["$feature/"+a[i]]=s[a[i]];else l=r,c=!1,(Ls(o=L_)?c:Od&&o.indexOf===Od?o.indexOf(l)!=-1:(Se(o,function(d){if(c||(c=d===l))return Ca}),c))||(e[r]=s);var o,l,c}),e}load(){if(!this.Ae){var e=this.B.L(this.Fe);e&&(this.props=Ue({},e))}}save(){this.Ae||this.B.j(this.Fe,this.props,this.De,this.Le,this.je,this.S.debug)}remove(){this.B.N(this.Fe,!1),this.B.N(this.Fe,!0)}clear(){this.remove(),this.props={}}register_once(e,s,r){if(Le(e)){J(s)&&(s="None"),this.De=J(r)?this.Ne:r;var a=!1;if(Se(e,(i,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==s||(this.props[o]=i,a=!0)}),a)return this.save(),!0}return!1}register(e,s){if(Le(e)){this.De=J(s)?this.Ne:s;var r=!1;if(Se(e,(a,i)=>{e.hasOwnProperty(i)&&this.props[i]!==a&&(this.props[i]=a,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Ce){var e=Uf(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);En(Jl(e))||this.register(e),this.Ce=!0}}update_search_keyword(){var e;this.register((e=ne==null?void 0:ne.referrer)?Hf(e):{})}update_referrer_info(){var e;this.register_once({$referrer:qf(),$referring_domain:ne!=null&&ne.referrer&&((e=Ln(ne.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Io]||this.props[Fo]||this.register_once({[Ma]:Wf(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Se([Fo,Io],o=>{var l=this.props[o];l&&Se(l,function(c,d){e["$initial_"+wo(d)]=c})});var s,r,a=this.props[Ma];if(a){var i=(s=Gf(a),r={},Se(s,function(o,l){r["$initial_"+wo(l)]=o}),r);Ue(e,i)}return e}safe_merge(e){return Se(this.props,function(s,r){r in e||(e[r]=s)}),e}update_config(e,s,r){if(this.Ne=this.De=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==s.persistence){var a=this.Oe(e),i=this.props;this.clear(),this.B=a,this.props=i,this.save()}}set_disabled(e){this.Ae=e,this.Ae?this.remove():this.save()}set_cross_subdomain(e){e!==this.Le&&(this.Le=e,this.remove(),this.save())}set_secure(e){e!==this.je&&(this.je=e,this.remove(),this.save())}set_event_timer(e,s){var r=this.props[nr]||{};r[e]=s,this.props[nr]=r,this.save()}remove_event_timer(e){var s=(this.props[nr]||{})[e];return J(s)||(delete this.props[nr][e],this.save()),s}get_property(e){return this.props[e]}set_property(e,s){this.props[e]=s,this.save()}}class Yf{constructor(){this.ze={},this.ze={}}on(e,s){return this.ze[e]||(this.ze[e]=[]),this.ze[e].push(s),()=>{this.ze[e]=this.ze[e].filter(r=>r!==s)}}emit(e,s){for(var r of this.ze[e]||[])r(s);for(var a of this.ze["*"]||[])a(e,s)}}class Ys{constructor(e){this.Ue=new Yf,this.qe=(s,r)=>this.Be(s,r)&&this.He(s,r)&&this.We(s,r),this.Be=(s,r)=>r==null||!r.event||(s==null?void 0:s.event)===(r==null?void 0:r.event),this._instance=e,this.Ge=new Set,this.Je=new Set}init(){var e;if(!J((e=this._instance)==null?void 0:e.Ve)){var s;(s=this._instance)==null||s.Ve((r,a)=>{this.on(r,a)})}}register(e){var s,r;if(!J((s=this._instance)==null?void 0:s.Ve)&&(e.forEach(o=>{var l,c;(l=this.Je)==null||l.add(o),(c=o.steps)==null||c.forEach(d=>{var u;(u=this.Ge)==null||u.add((d==null?void 0:d.event)||"")})}),(r=this._instance)!=null&&r.autocapture)){var a,i=new Set;e.forEach(o=>{var l;(l=o.steps)==null||l.forEach(c=>{c!=null&&c.selector&&i.add(c==null?void 0:c.selector)})}),(a=this._instance)==null||a.autocapture.setElementSelectors(i)}}on(e,s){var r;s!=null&&e.length!=0&&(this.Ge.has(e)||this.Ge.has(s==null?void 0:s.event))&&this.Je&&((r=this.Je)==null?void 0:r.size)>0&&this.Je.forEach(a=>{this.Ke(s,a)&&this.Ue.emit("actionCaptured",a.name)})}Ye(e){this.onAction("actionCaptured",s=>e(s))}Ke(e,s){if((s==null?void 0:s.steps)==null)return!1;for(var r of s.steps)if(this.qe(e,r))return!0;return!1}onAction(e,s){return this.Ue.on(e,s)}He(e,s){if(s!=null&&s.url){var r,a=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!a||typeof a!="string"||!Ys.Xe(a,s==null?void 0:s.url,(s==null?void 0:s.url_matching)||"contains"))return!1}return!0}static Xe(e,s,r){switch(r){case"regex":return!!I&&Vn(e,s);case"exact":return s===e;case"contains":var a=Ys.Qe(s).replace(/_/g,".").replace(/%/g,".*");return Vn(e,a);default:return!1}}static Qe(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}We(e,s){if((s!=null&&s.href||s!=null&&s.tag_name||s!=null&&s.text)&&!this.Ze(e).some(i=>!(s!=null&&s.href&&!Ys.Xe(i.href||"",s==null?void 0:s.href,(s==null?void 0:s.href_matching)||"exact"))&&(s==null||!s.tag_name||i.tag_name===(s==null?void 0:s.tag_name))&&!(s!=null&&s.text&&!Ys.Xe(i.text||"",s==null?void 0:s.text,(s==null?void 0:s.text_matching)||"exact")&&!Ys.Xe(i.$el_text||"",s==null?void 0:s.text,(s==null?void 0:s.text_matching)||"exact"))))return!1;if(s!=null&&s.selector){var r,a=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(!a||!a.includes(s==null?void 0:s.selector))return!1}return!0}Ze(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});var Ui=function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t.ExternalSurvey="external_survey",t}({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Bi=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),Ru=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),We=Xe("[Surveys]"),Ko="seenSurvey_",S2=(t,e)=>{var s="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(s="$survey_"+e+"/"+t.id+"/"+t.current_iteration),s},C2=[Ui.Popover,Ui.Widget,Ui.API];class E2{constructor(e){this._instance=e,this.tr=new Map,this.ir=new Map}register(e){var s;J((s=this._instance)==null?void 0:s.Ve)||(this.er(e),this.rr(e))}rr(e){var s=e.filter(r=>{var a,i;return((a=r.conditions)==null?void 0:a.actions)&&((i=r.conditions)==null||(i=i.actions)==null||(i=i.values)==null?void 0:i.length)>0});s.length!==0&&(this.sr==null&&(this.sr=new Ys(this._instance),this.sr.init(),this.sr.Ye(r=>{this.onAction(r)})),s.forEach(r=>{var a,i,o,l,c;r.conditions&&(a=r.conditions)!=null&&a.actions&&(i=r.conditions)!=null&&(i=i.actions)!=null&&i.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((l=this.sr)==null||l.register(r.conditions.actions.values),(c=r.conditions)==null||(c=c.actions)==null||(c=c.values)==null||c.forEach(d=>{if(d&&d.name){var u=this.ir.get(d.name);u&&u.push(r.id),this.ir.set(d.name,u||[r.id])}}))}))}er(e){var s;e.filter(r=>{var a,i;return((a=r.conditions)==null?void 0:a.events)&&((i=r.conditions)==null||(i=i.events)==null||(i=i.values)==null?void 0:i.length)>0}).length!==0&&((s=this._instance)==null||s.Ve((r,a)=>{this.onEvent(r,a)}),e.forEach(r=>{var a;(a=r.conditions)==null||(a=a.events)==null||(a=a.values)==null||a.forEach(i=>{if(i&&i.name){var o=this.tr.get(i.name);o&&o.push(r.id),this.tr.set(i.name,o||[r.id])}})}))}onEvent(e,s){var r,a=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[Zr])||[];if(e==="survey shown"&&s&&a.length>0){var i;We.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:s,existingActivatedSurveys:a});var o=s==null||(i=s.properties)==null?void 0:i.$survey_id;if(o){var l=a.indexOf(o);l>=0&&(a.splice(l,1),this.nr(a))}}else this.tr.has(e)&&(We.info("survey event matched, updating activated surveys",{event:e,surveys:this.tr.get(e)}),this.nr(a.concat(this.tr.get(e)||[])))}onAction(e){var s,r=((s=this._instance)==null||(s=s.persistence)==null?void 0:s.props[Zr])||[];this.ir.has(e)&&this.nr(r.concat(this.ir.get(e)||[]))}nr(e){var s;(s=this._instance)==null||(s=s.persistence)==null||s.register({[Zr]:[...new Set(e)]})}getSurveys(){var e,s=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Zr];return s||[]}getEventToSurveys(){return this.tr}ar(){return this.sr}}class T2{constructor(e){this.lr=void 0,this._surveyManager=null,this.ur=!1,this.hr=!1,this.dr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var s=e.surveys;if(_e(s))return We.warn("Flags not loaded yet. Not loading surveys.");var r=Me(s);this.lr=r?s.length>0:s,We.info("flags response received, isSurveysEnabled: "+this.lr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],s=0;s<localStorage.length;s++){var r=localStorage.key(s);(r!=null&&r.startsWith(Ko)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(a=>localStorage.removeItem(a))}loadIfEnabled(){if(!this._surveyManager)if(this.hr)We.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)We.info("Disabled. Not loading surveys.");else{var e=ge==null?void 0:ge.__PosthogExtensions__;if(e){var s=this.lr;if(!J(s)){this.hr=!0;try{var r=e.generateSurveys;if(r)return void this.vr(r,s);var a=e.loadExternalDependency;if(!a)return void this.cr("PostHog loadExternalDependency extension not found.");a(this._instance,"surveys",i=>{i||!e.generateSurveys?this.cr("Could not load surveys script",i):this.vr(e.generateSurveys,s)})}catch(i){throw this.cr("Error initializing surveys",i),i}finally{this.hr=!1}}}else We.error("PostHog Extensions not found.")}}vr(e,s){this._surveyManager=e(this._instance,s),this._surveyEventReceiver=new E2(this._instance),We.info("Surveys loaded successfully"),this.pr({isLoaded:!0})}cr(e,s){We.error(e,s),this.pr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.dr.push(e),this._surveyManager&&this.pr({isLoaded:!0}),()=>{this.dr=this.dr.filter(s=>s!==e)}}getSurveys(e,s){if(s===void 0&&(s=!1),this._instance.config.disable_surveys)return We.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Ao);if(r&&!s)return e(r,{isLoaded:!0});if(this.ur)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.ur=!0,this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:a=>{var i;this.ur=!1;var o=a.statusCode;if(o!==200||!a.json){var l="Surveys API could not be loaded, status: "+o;return We.error(l),e([],{isLoaded:!1,error:l})}var c,d=a.json.surveys||[],u=d.filter(h=>function(m){return!(!m.start_date||m.end_date)}(h)&&(function(m){var p;return!((p=m.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(h)||function(m){var p;return!((p=m.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(h)));return u.length>0&&((c=this._surveyEventReceiver)==null||c.register(u)),(i=this._instance.persistence)==null||i.register({[Ao]:d}),e(d,{isLoaded:!0})}})}catch(a){throw this.ur=!1,a}}pr(e){for(var s of this.dr)try{e.isLoaded?this.getSurveys(s):s([],e)}catch(r){We.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,s){if(s===void 0&&(s=!1),!_e(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,s);We.warn("init was not called")}gr(e){var s=null;return this.getSurveys(r=>{var a;s=(a=r.find(i=>i.id===e))!==null&&a!==void 0?a:null}),s}_r(e){if(_e(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var s=typeof e=="string"?this.gr(e):e;return s?this._surveyManager.checkSurveyEligibility(s):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(_e(this._surveyManager))return We.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var s=this._r(e);return{visible:s.eligible,disabledReason:s.reason}}canRenderSurveyAsync(e,s){return _e(this._surveyManager)?(We.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(a=>{var i,o=(i=a.find(c=>c.id===e))!==null&&i!==void 0?i:null;if(o){var l=this._r(o);r({visible:l.eligible,disabledReason:l.reason})}else r({visible:!1,disabledReason:"Survey not found"})},s)})}renderSurvey(e,s){if(_e(this._surveyManager))We.warn("init was not called");else{var r=this.gr(e);if(r)if(C2.includes(r.type)){var a=ne==null?void 0:ne.querySelector(s);a?this._surveyManager.renderSurvey(r,a):We.warn("Survey element not found")}else We.warn("Surveys of type "+r.type+" cannot be rendered in the app");else We.warn("Survey not found")}}}var Iu=Xe("[RateLimiter]");class M2{constructor(e){var s,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=a=>{var i=a.text;if(i&&i.length)try{(JSON.parse(i).quota_limited||[]).forEach(o=>{Iu.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void Iu.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:i})}},this.instance=e,this.captureEventsPerSecond=((s=e.config.rate_limiting)==null?void 0:s.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var s,r,a;e===void 0&&(e=!1);var i=new Date().getTime(),o=(s=(r=this.instance.persistence)==null?void 0:r.get_property(Ro))!==null&&s!==void 0?s:{tokens:this.captureEventsBurstLimit,last:i};o.tokens+=(i-o.last)/1e3*this.captureEventsPerSecond,o.last=i,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var l=o.tokens<1;return l||e||(o.tokens=Math.max(0,o.tokens-1)),!l||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=l,(a=this.instance.persistence)==null||a.set_property(Ro,o),{isRateLimited:l,remainingTokens:o.tokens}}isServerRateLimited(e){var s=this.serverLimits[e||"events"]||!1;return s!==!1&&new Date().getTime()<s}}var qs=Xe("[RemoteConfig]");class A2{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=ge._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}mr(e){var s,r;(s=ge.__PosthogExtensions__)!=null&&s.loadExternalDependency?(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(qs.error("PostHog Extensions not found. Cannot load remote config."),e())}br(e){this._instance.Pe({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:s=>{e(s.json)}})}load(){try{if(this.remoteConfig)return qs.info("Using preloaded remote config",this.remoteConfig),void this.Re(this.remoteConfig);if(this._instance.I())return void qs.warn("Remote config is disabled. Falling back to local config.");this.mr(e=>{if(!e)return qs.info("No config found after loading remote JS config. Falling back to JSON."),void this.br(s=>{this.Re(s)});this.Re(e)})}catch(e){qs.error("Error loading remote config",e)}}Re(e){e?this._instance.config.__preview_remote_config?(this._instance.Re(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):qs.info("__preview_remote_config is disabled. Logging config instead",e):qs.error("Failed to fetch remote config from PostHog.")}}var Yo=3e3;class P2{constructor(e,s){this.yr=!0,this.wr=[],this.Sr=Tt((s==null?void 0:s.flush_interval_ms)||Yo,250,5e3,"flush interval",Yo),this.$r=e}enqueue(e){this.wr.push(e),this.kr||this.Er()}unload(){this.Ir();var e=this.wr.length>0?this.Pr():{},s=Object.values(e);[...s.filter(r=>r.url.indexOf("/e")===0),...s.filter(r=>r.url.indexOf("/e")!==0)].map(r=>{this.$r(te({},r,{transport:"sendBeacon"}))})}enable(){this.yr=!1,this.Er()}Er(){var e=this;this.yr||(this.kr=setTimeout(()=>{if(this.Ir(),this.wr.length>0){var s=this.Pr(),r=function(){var i=s[a],o=new Date().getTime();i.data&&Me(i.data)&&Se(i.data,l=>{l.offset=Math.abs(l.timestamp-o),delete l.timestamp}),e.$r(i)};for(var a in s)r()}},this.Sr))}Ir(){clearTimeout(this.kr),this.kr=void 0}Pr(){var e={};return Se(this.wr,s=>{var r,a=s,i=(a?a.batchKey:null)||a.url;J(e[i])&&(e[i]=te({},a,{data:[]})),(r=e[i].data)==null||r.push(a.data)}),this.wr=[],e}}var R2=["retriesPerformedSoFar"];class I2{constructor(e){this.Rr=!1,this.Tr=3e3,this.wr=[],this._instance=e,this.wr=[],this.Mr=!0,!J(I)&&"onLine"in I.navigator&&(this.Mr=I.navigator.onLine,Fe(I,"online",()=>{this.Mr=!0,this.se()}),Fe(I,"offline",()=>{this.Mr=!1}))}get length(){return this.wr.length}retriableRequest(e){var{retriesPerformedSoFar:s}=e,r=qp(e,R2);lt(s)&&s>0&&(r.url=$a(r.url,{retry_count:s})),this._instance.Pe(te({},r,{callback:a=>{a.statusCode!==200&&(a.statusCode<400||a.statusCode>=500)&&(s??0)<10?this.Cr(te({retriesPerformedSoFar:s},r)):r.callback==null||r.callback(a)}}))}Cr(e){var s=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=s+1;var r=function(o){var l=3e3*Math.pow(2,o),c=l/2,d=Math.min(18e5,l),u=(Math.random()-.5)*(d-c);return Math.ceil(d+u)}(s),a=Date.now()+r;this.wr.push({retryAt:a,requestOptions:e});var i="Enqueued failed request for retry in "+r;navigator.onLine||(i+=" (Browser is offline)"),ae.warn(i),this.Rr||(this.Rr=!0,this.Fr())}Fr(){this.Or&&clearTimeout(this.Or),this.Or=setTimeout(()=>{this.Mr&&this.wr.length>0&&this.se(),this.Fr()},this.Tr)}se(){var e=Date.now(),s=[],r=this.wr.filter(i=>i.retryAt<e||(s.push(i),!1));if(this.wr=s,r.length>0)for(var{requestOptions:a}of r)this.retriableRequest(a)}unload(){for(var{requestOptions:e}of(this.Or&&(clearTimeout(this.Or),this.Or=void 0),this.wr))try{this._instance.Pe(te({},e,{transport:"sendBeacon"}))}catch(s){ae.error(s)}this.wr=[]}}class F2{constructor(e){this.Ar=()=>{var s,r,a,i;this.Dr||(this.Dr={});var o=this.scrollElement(),l=this.scrollY(),c=o?Math.max(0,o.scrollHeight-o.clientHeight):0,d=l+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Dr.lastScrollY=Math.ceil(l),this.Dr.maxScrollY=Math.max(l,(s=this.Dr.maxScrollY)!==null&&s!==void 0?s:0),this.Dr.maxScrollHeight=Math.max(c,(r=this.Dr.maxScrollHeight)!==null&&r!==void 0?r:0),this.Dr.lastContentY=d,this.Dr.maxContentY=Math.max(d,(a=this.Dr.maxContentY)!==null&&a!==void 0?a:0),this.Dr.maxContentHeight=Math.max(u,(i=this.Dr.maxContentHeight)!==null&&i!==void 0?i:0)},this._instance=e}getContext(){return this.Dr}resetContext(){var e=this.Dr;return setTimeout(this.Ar,0),e}startMeasuringScrollPosition(){Fe(I,"scroll",this.Ar,{capture:!0}),Fe(I,"scrollend",this.Ar,{capture:!0}),Fe(I,"resize",this.Ar)}scrollElement(){if(!this._instance.config.scroll_root_selector)return I==null?void 0:I.document.documentElement;var e=Me(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var s of e){var r=I==null?void 0:I.document.querySelector(s);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return I&&(I.scrollY||I.pageYOffset||I.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return I&&(I.scrollX||I.pageXOffset||I.document.documentElement.scrollLeft)||0}}var D2=t=>Wf(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class O2{constructor(e,s,r,a){this.Lr=i=>{var o=this.jr();if(!o||o.sessionId!==i){var l={sessionId:i,props:this.Nr(this._instance)};this.zr.register({[Po]:l})}},this._instance=e,this.Ur=s,this.zr=r,this.Nr=a||D2,this.Ur.onSessionId(this.Lr)}jr(){return this.zr.props[Po]}getSetOnceProps(){var e,s=(e=this.jr())==null?void 0:e.props;return s?"r"in s?Gf(s):{$referring_domain:s.referringDomain,$pathname:s.initialPathName,utm_source:s.utm_source,utm_campaign:s.utm_campaign,utm_medium:s.utm_medium,utm_content:s.utm_content,utm_term:s.utm_term}:{}}getSessionProps(){var e={};return Se(Jl(this.getSetOnceProps()),(s,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+wo(r)]=s}),e}}var Fu=Xe("[SessionId]");class L2{constructor(e,s,r){var a;if(this.qr=[],this.Br=(u,h)=>Math.abs(u-h)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.zr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Hr=s||Cs,this.Wr=r||Cs;var i=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Tt(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Gr(),this.Jr="ph_"+i+"_window_id",this.Vr="ph_"+i+"_primary_window_exists",this.Kr()){var l=tt.L(this.Jr),c=tt.L(this.Vr);l&&!c?this.fi=l:tt.N(this.Jr),tt.j(this.Vr,!0)}if((a=this.S.bootstrap)!=null&&a.sessionID)try{var d=(u=>{var h=u.replace(/-/g,"");if(h.length!==32)throw new Error("Not a valid UUID");if(h[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(h.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Yr(this.S.bootstrap.sessionID,new Date().getTime(),d)}catch(u){Fu.error("Invalid sessionID in bootstrap",u)}this.Xr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return J(this.qr)&&(this.qr=[]),this.qr.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.qr=this.qr.filter(s=>s!==e)}}Kr(){return this.S.persistence!=="memory"&&!this.zr.Ae&&tt.O()}Qr(e){e!==this.fi&&(this.fi=e,this.Kr()&&tt.j(this.Jr,e))}Zr(){return this.fi?this.fi:this.Kr()?tt.L(this.Jr):null}Yr(e,s,r){e===this.Ct&&s===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=s,this.Ct=e,this.zr.register({[Ea]:[s,e,r]}))}ts(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.zr.props[Ea];return Me(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Yr(null,null,null)}Xr(){Fe(I,"beforeunload",()=>{this.Kr()&&tt.N(this.Vr)},{capture:!1})}checkAndGetSessionAndWindowId(e,s){if(e===void 0&&(e=!1),s===void 0&&(s=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var r=s||new Date().getTime(),[a,i,o]=this.ts(),l=this.Zr(),c=lt(o)&&o>0&&Math.abs(r-o)>864e5,d=!1,u=!i,h=!e&&this.Br(r,a);u||h||c?(i=this.Hr(),l=this.Wr(),Fu.info("new session ID generated",{sessionId:i,windowId:l,changeReason:{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:c}}),o=r,d=!0):l||(l=this.Wr(),d=!0);var m=a===0||!e||c?r:a,p=o===0?new Date().getTime():o;return this.Qr(l),this.Yr(i,m,p),e||this.Gr(),d&&this.qr.forEach(g=>g(i,l,d?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:c}:void 0)),{sessionId:i,windowId:l,sessionStartTimestamp:p,changeReason:d?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:c}:void 0,lastActivityTimestamp:a}}Gr(){clearTimeout(this.es),this.es=setTimeout(()=>{var[e]=this.ts();this.Br(new Date().getTime(),e)&&this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var $2=["$set_once","$set"],ws=Xe("[SiteApps]");class V2{constructor(e){this._instance=e,this.rs=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}ss(e,s){if(s){var r=this.globalsForEvent(s);this.rs.push(r),this.rs.length>1e3&&(this.rs=this.rs.slice(10))}}get siteAppLoaders(){var e;return(e=ge._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ve(this.ss.bind(this));this.ns=()=>{e(),this.rs=[],this.ns=void 0}}}globalsForEvent(e){var s,r,a,i,o,l,c;if(!e)throw new Error("Event payload is required");var d={},u=this._instance.get_property("$groups")||[],h=this._instance.get_property("$stored_group_properties")||{};for(var[m,p]of Object.entries(h))d[m]={id:u[m],type:m,properties:p};var{$set_once:g,$set:x}=e;return{event:te({},qp(e,$2),{properties:te({},e.properties,x?{$set:te({},(s=(r=e.properties)==null?void 0:r.$set)!==null&&s!==void 0?s:{},x)}:{},g?{$set_once:te({},(a=(i=e.properties)==null?void 0:i.$set_once)!==null&&a!==void 0?a:{},g)}:{}),elements_chain:(o=(l=e.properties)==null?void 0:l.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(c=e.properties)==null?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:d}}setupSiteApp(e){var s=this.apps[e.id],r=()=>{var l;!s.errored&&this.rs.length&&(ws.info("Processing "+this.rs.length+" events for site app with id "+e.id),this.rs.forEach(c=>s.processEvent==null?void 0:s.processEvent(c)),s.processedBuffer=!0),Object.values(this.apps).every(c=>c.processedBuffer||c.errored)&&((l=this.ns)==null||l.call(this))},a=!1,i=l=>{s.errored=!l,s.loaded=!0,ws.info("Site app with id "+e.id+" "+(l?"loaded":"errored")),a&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:l=>{i(l)}});o&&(s.processEvent=o),a=!0}catch(l){ws.error("Error while initializing PostHog app with config id "+e.id,l),i(!1)}if(a&&s.loaded)try{r()}catch(l){ws.error("Error while processing buffered events PostHog app with config id "+e.id,l),s.errored=!0}}os(){var e=this.siteAppLoaders||[];for(var s of e)this.apps[s.id]={id:s.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ls(e){if(Object.keys(this.apps).length!==0){var s=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(s)}catch(a){ws.error("Error while processing event "+e.event+" for site app "+r.id,a)}}}onRemoteConfig(e){var s,r,a,i=this;if((s=this.siteAppLoaders)!=null&&s.length)return this.isEnabled?(this.os(),void this._instance.on("eventCaptured",d=>this.ls(d))):void ws.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.ns)==null||r.call(this),(a=e.siteApps)!=null&&a.length)if(this.isEnabled){var o=function(d){var u;ge["__$$ph_site_app_"+d]=i._instance,(u=ge.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(i._instance,c,h=>{if(h)return ws.error("Error while initializing PostHog app with config id "+d,h)})};for(var{id:l,url:c}of e.siteApps)o(l)}else ws.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var z2=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Du=function(t,e){if(!t)return!1;var s=t.toLowerCase();return z2.concat(e||[]).some(r=>{var a=r.toLowerCase();return s.indexOf(a)!==-1})},Jf=function(t,e){if(!t)return!1;var s=t.userAgent;if(s&&Du(s,e))return!0;try{var r=t==null?void 0:t.userAgentData;if(r!=null&&r.brands&&r.brands.some(a=>Du(a==null?void 0:a.brand,e)))return!0}catch{}return!!t.webdriver},dr=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),Ou="i.posthog.com";class U2{constructor(e){this.us={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,s=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return s||(s=this.apiHost.replace("."+Ou,".posthog.com")),s==="https://app.posthog.com"?"https://us.posthog.com":s}get region(){return this.us[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=dr.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=dr.EU:this.us[this.apiHost]=dr.CUSTOM),this.us[this.apiHost]}endpointFor(e,s){if(s===void 0&&(s=""),s&&(s=s[0]==="/"?s:"/"+s),e==="ui")return this.uiHost+s;if(this.region===dr.CUSTOM)return this.apiHost+s;var r=Ou+s;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var B2={icontains:(t,e)=>!!I&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!I&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!I&&Vn(e.href,t),not_regex:(t,e)=>!!I&&!Vn(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class ot{constructor(e){var s=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),s.getWebExperiments(a=>{ot.hs("retrieved web experiments from the server"),s.ds=new Map,a.forEach(i=>{if(i.feature_flag_key){var o;s.ds&&(ot.hs("setting flag key ",i.feature_flag_key," to web experiment ",i),(o=s.ds)==null||o.set(i.feature_flag_key,i));var l=s._instance.getFeatureFlag(i.feature_flag_key);$e(l)&&i.variants[l]&&s.vs(i.name,l,i.variants[l].transforms)}else if(i.variants)for(var c in i.variants){var d=i.variants[c];ot.cs(d)&&s.vs(i.name,c,d.transforms)}})},r)},this._instance=e,this._instance.onFeatureFlags(r=>{this.onFeatureFlags(r)})}onFeatureFlags(e){if(this._is_bot())ot.hs("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(_e(this.ds))return this.ds=new Map,this.loadIfEnabled(),void this.previewWebExperiment();ot.hs("applying feature flags",e),e.forEach(s=>{var r;if(this.ds&&(r=this.ds)!=null&&r.has(s)){var a,i=this._instance.getFeatureFlag(s),o=(a=this.ds)==null?void 0:a.get(s);i&&o!=null&&o.variants[i]&&this.vs(o.name,i,o.variants[i].transforms)}})}}previewWebExperiment(){var e=ot.getWindowLocation();if(e!=null&&e.search){var s=Ra(e==null?void 0:e.search,"__experiment_id"),r=Ra(e==null?void 0:e.search,"__experiment_variant");s&&r&&(ot.hs("previewing web experiments "+s+" && "+r),this.getWebExperiments(a=>{this.fs(parseInt(s),r,a)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,s,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var a=this._instance.get_property("$web_experiments");if(a&&!s)return e(a);this._instance.Pe({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:i=>{if(i.statusCode!==200||!i.json)return e([]);var o=i.json.experiments||[];return e(o)}})}fs(e,s,r){var a=r.filter(i=>i.id===e);a&&a.length>0&&(ot.hs("Previewing web experiment ["+a[0].name+"] with variant ["+s+"]"),this.vs(a[0].name,s,a[0].variants[s].transforms))}static cs(e){return!_e(e.conditions)&&ot.ps(e)&&ot.gs(e)}static ps(e){var s;if(_e(e.conditions)||_e((s=e.conditions)==null?void 0:s.url))return!0;var r,a,i,o=ot.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||B2[(a=(i=e.conditions)==null?void 0:i.urlMatchType)!==null&&a!==void 0?a:"icontains"](e.conditions.url,o))}static getWindowLocation(){return I==null?void 0:I.location}static gs(e){var s;if(_e(e.conditions)||_e((s=e.conditions)==null?void 0:s.utm))return!0;var r=Uf();if(r.utm_source){var a,i,o,l,c,d,u,h,m=(a=e.conditions)==null||(a=a.utm)==null||!a.utm_campaign||((i=e.conditions)==null||(i=i.utm)==null?void 0:i.utm_campaign)==r.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((l=e.conditions)==null||(l=l.utm)==null?void 0:l.utm_source)==r.utm_source,g=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_medium||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_medium)==r.utm_medium,x=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((h=e.conditions)==null||(h=h.utm)==null?void 0:h.utm_term)==r.utm_term;return m&&g&&x&&p}return!1}static hs(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];ae.info("[WebExperiments] "+e,r)}vs(e,s,r){this._is_bot()?ot.hs("Refusing to render web experiment since the viewer is a likely bot"):s!=="control"?r.forEach(a=>{if(a.selector){var i;ot.hs("applying transform of variant "+s+" for experiment "+e+" ",a);var o=(i=document)==null?void 0:i.querySelectorAll(a.selector);o==null||o.forEach(l=>{var c=l;a.html&&(c.innerHTML=a.html),a.css&&c.setAttribute("style",a.css)})}}):ot.hs("Control variants leave the page unmodified.")}_is_bot(){return Et&&this._instance?Jf(Et,this._instance.config.custom_blocked_useragents):void 0}}var H2=Xe("[PostHog ExternalIntegrations]"),q2={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class W2{constructor(e){this._instance=e}J(e,s){var r;(r=ge.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,a=>{if(a)return H2.error("failed to load script",a);s()})}startIfEnabledOrStop(){var e=this,s=function(o){var l,c,d;!a||(l=ge.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]||e.J(q2[o],()=>{var u;(u=ge.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!a&&(c=ge.__PosthogExtensions__)!=null&&(c=c.integrations)!=null&&c[o]&&((d=ge.__PosthogExtensions__)==null||(d=d.integrations)==null||(d=d[o])==null||d.stop())};for(var[r,a]of Object.entries((i=this._instance.config.integrations)!==null&&i!==void 0?i:{})){var i;s(r)}}}var yr={},Jo=()=>{},_n="posthog",Xf=!a2&&(xt==null?void 0:xt.indexOf("MSIE"))===-1&&(xt==null?void 0:xt.indexOf("Mozilla"))===-1,Lu=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:O_(ne==null?void 0:ne.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Jo,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:vt&&$e(vt==null?void 0:vt.search)&&vt.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(I==null||(e=I.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:s=>{var r="Bad HTTP status: "+s.statusCode+" "+s.text;ae.error(r)},get_device_id:s=>s,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Yo},error_tracking:{},_onCapture:Jo}},$u=t=>{var e={};J(t.process_person)||(e.person_profiles=t.process_person),J(t.xhr_headers)||(e.request_headers=t.xhr_headers),J(t.cookie_name)||(e.persistence_name=t.cookie_name),J(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),J(t.store_google)||(e.save_campaign_params=t.store_google),J(t.verbose)||(e.debug=t.verbose);var s=Ue({},e,t);return Me(t.property_blacklist)&&(J(t.property_denylist)?s.property_denylist=t.property_blacklist:Me(t.property_denylist)?s.property_denylist=[...t.property_blacklist,...t.property_denylist]:ae.error("Invalid value for property_denylist config: "+t.property_denylist)),s};class G2{constructor(){this.__forceAllowLocalhost=!1}get _s(){return this.__forceAllowLocalhost}set _s(e){ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class li{get decideEndpointWasHit(){var e,s;return(e=(s=this.featureFlags)==null?void 0:s.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,s;return(e=(s=this.featureFlags)==null?void 0:s.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new G2,this.bs=!1,this.version=ls.LIB_VERSION,this.ys=new Yf,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Lu(),this.SentryIntegration=Yw,this.sentryIntegration=e=>function(s,r){var a=kf(s,r);return{name:Nf,processEvent:i=>a(i)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.ws=!1,this.Ss=null,this.$s=null,this.xs=null,this.featureFlags=new N2(this),this.toolbar=new Xw(this),this.scrollManager=new F2(this),this.pageViewManager=new n2(this),this.surveys=new T2(this),this.experiments=new ot(this),this.exceptions=new o2(this),this.rateLimiter=new M2(this),this.requestRouter=new U2(this),this.consent=new aw(this),this.externalIntegrations=new W2(this),this.people={set:(e,s,r)=>{var a=$e(e)?{[e]:s}:e;this.setPersonProperties(a),r==null||r({})},set_once:(e,s,r)=>{var a=$e(e)?{[e]:s}:e;this.setPersonProperties(void 0,a),r==null||r({})}},this.on("eventCaptured",e=>ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,s,r){if(r&&r!==_n){var a,i=(a=yr[r])!==null&&a!==void 0?a:new li;return i._init(e,s,r),yr[r]=i,yr[_n][r]=i,i}return this._init(e,s,r)}_init(e,s,r){var a,i;if(s===void 0&&(s={}),J(e)||No(e))return ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.ks=s,this.Es=[],s.person_profiles&&(this.$s=s.person_profiles),this.set_config(Ue({},Lu(s.defaults),$u(s),{name:r,token:e})),this.config.on_xhr_error&&ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:cs.GZipJS;var o=this.Is();this.persistence=new zi(this.config,o),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new zi(te({},this.config,{persistence:"sessionStorage"}),o);var l=te({},this.persistence.props),c=te({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.Ps=new P2(v=>this.Rs(v),this.config.request_queue_config),this.Ts=new I2(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new L2(this),this.sessionPropsManager=new O2(this,this.sessionManager,this.persistence)),new Qw(this).startIfEnabledOrStop(),this.siteApps=new V2(this),(a=this.siteApps)==null||a.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Gw(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new X_(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new s2(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new e2(this),this.exceptionObserver=new lw(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new cf(this,ow),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new _w(this),this.historyAutocapture.startIfEnabled(),ls.DEBUG=ls.DEBUG||this.config.debug,ls.DEBUG&&ae.info("Starting in debug mode",{this:this,config:s,thisC:te({},this.config),p:l,s:c}),((i=s.bootstrap)==null?void 0:i.distinctID)!==void 0){var d,u,h=this.config.get_device_id(Cs()),m=(d=s.bootstrap)!=null&&d.isIdentifiedID?h:s.bootstrap.distinctID;this.persistence.set_property(is,(u=s.bootstrap)!=null&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:m})}if(this.Ms()){var p,g,x=Object.keys(((p=s.bootstrap)==null?void 0:p.featureFlags)||{}).filter(v=>{var j;return!((j=s.bootstrap)==null||(j=j.featureFlags)==null||!j[v])}).reduce((v,j)=>{var S;return v[j]=((S=s.bootstrap)==null||(S=S.featureFlags)==null?void 0:S[j])||!1,v},{}),b=Object.keys(((g=s.bootstrap)==null?void 0:g.featureFlagPayloads)||{}).filter(v=>x[v]).reduce((v,j)=>{var S,w;return(S=s.bootstrap)!=null&&(S=S.featureFlagPayloads)!=null&&S[j]&&(v[j]=(w=s.bootstrap)==null||(w=w.featureFlagPayloads)==null?void 0:w[j]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:x,featureFlagPayloads:b})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Qr,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(Cs());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(is,"anonymous")}return Fe(I,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),s.segment?Kw(this,()=>this.Cs()):this.Cs(),It(this.config._onCapture)&&this.config._onCapture!==Jo&&(ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Re(e){var s,r,a,i,o,l,c,d;if(!ne||!ne.body)return ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Re(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=ve(e.supportedCompression,cs.GZipJS)?cs.GZipJS:ve(e.supportedCompression,cs.Base64)?cs.Base64:void 0),(s=e.analytics)!=null&&s.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.$s?this.$s:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(a=this.sessionRecording)==null||a.onRemoteConfig(e),(i=this.autocapture)==null||i.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(l=this.webVitalsAutocapture)==null||l.onRemoteConfig(e),(c=this.exceptionObserver)==null||c.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(d=this.deadClicksAutocapture)==null||d.onRemoteConfig(e)}Cs(){try{this.config.loaded(this)}catch(e){ae.critical("`loaded` function failed",e)}this.Fs(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Os()},1),new A2(this).load(),this.featureFlags.flags()}Fs(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.Ps)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Es(this.__request_queue,e=>this.Rs(e)),this.__request_queue=[],this.Fs()}_handle_unload(){var e,s;this.config.request_batching?(this.As()&&this.capture("$pageleave"),(e=this.Ps)==null||e.unload(),(s=this.Ts)==null||s.unload()):this.As()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Pe(e){this.__loaded&&(Xf?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=$a(e.url,{ip:this.config.ip?1:0}),e.headers=te({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(s=>{var r,a,i,o=te({},s);o.timeout=o.timeout||6e4,o.url=$a(o.url,{_:new Date().getTime().toString(),ver:ls.LIB_VERSION,compression:o.compression});var l=(r=o.transport)!==null&&r!==void 0?r:"fetch",c=(a=(i=Wp(vr,d=>d.transport===l))==null?void 0:i.method)!==null&&a!==void 0?a:vr[0].method;if(!c)throw new Error("No available transport method");c(o)})(te({},e,{callback:s=>{var r,a;this.rateLimiter.checkForLimiting(s),s.statusCode>=400&&((r=(a=this.config).on_request_error)==null||r.call(a,s)),e.callback==null||e.callback(s)}}))))}Rs(e){this.Ts?this.Ts.retriableRequest(e):this.Pe(e)}_execute_array(e){var s,r=[],a=[],i=[];Es(e,l=>{l&&(s=l[0],Me(s)?i.push(l):It(l)?l.call(this):Me(l)&&s==="alias"?r.push(l):Me(l)&&s.indexOf("capture")!==-1&&It(this[s])?i.push(l):a.push(l))});var o=function(l,c){Es(l,function(d){if(Me(d[0])){var u=c;Se(d,function(h){u=u[h[0]].apply(u,h.slice(1))})}else this[d[0]].apply(this,d.slice(1))},c)};o(r,this),o(a,this),o(i,this)}Ms(){var e,s;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((s=this.config.bootstrap)==null?void 0:s.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,s,r){var a;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Ps){if(!this.consent.isOptedOut())if(!J(e)&&$e(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var i=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(i==null||!i.isRateLimited){s!=null&&s.$current_url&&!$e(s==null?void 0:s.$current_url)&&(ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),s==null||delete s.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,l=(r==null?void 0:r.timestamp)||o,c=Cs(),d={uuid:c,event:e,properties:this.calculateEventProperties(e,s||{},l,c)};i&&(d.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),r!=null&&r.$set&&(d.$set=r==null?void 0:r.$set);var u,h,m=this.Ds(r==null?void 0:r.$set_once);if(m&&(d.$set_once=m),(d=F_(d,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=l,J(r==null?void 0:r.timestamp)||(d.properties.$event_time_override_provided=!0,d.properties.$event_time_override_system_time=o),e===Bi.DISMISSED||e===Bi.SENT){var p=s==null?void 0:s[Ru.SURVEY_ID],g=s==null?void 0:s[Ru.SURVEY_ITERATION];localStorage.setItem((h=""+Ko+(u={id:p,current_iteration:g}).id,u.current_iteration&&u.current_iteration>0&&(h=""+Ko+u.id+"_"+u.current_iteration),h),"true"),d.$set=te({},d.$set,{[S2({id:p,current_iteration:g},e===Bi.SENT?"responded":"dismissed")]:!0})}var x=te({},d.properties.$set,d.$set);if(En(x)||this.setPersonPropertiesForFlags(x),!_e(this.config.before_send)){var b=this.Ls(d);if(!b)return;d=b}this.ys.emit("eventCaptured",d);var y={method:"POST",url:(a=r==null?void 0:r._url)!==null&&a!==void 0?a:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:d,compression:"best-available",batchKey:r==null?void 0:r._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Rs(y):this.Ps.enqueue(y),d}ae.critical("This capture call is ignored due to client rate limiting.")}}else ae.error("No event name provided to posthog.capture")}else ae.uninitializedWarning("posthog.capture")}Ve(e){return this.on("eventCaptured",s=>e(s.event,s))}calculateEventProperties(e,s,r,a,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return s;var o=i?void 0:this.persistence.remove_event_timer(e),l=te({},s);if(l.token=this.config.token,l.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(l.$cookieless_mode=!0),e==="$snapshot"){var c=te({},this.persistence.properties(),this.sessionPersistence.properties());return l.distinct_id=c.distinct_id,(!$e(l.distinct_id)&&!lt(l.distinct_id)||No(l.distinct_id))&&ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),l}var d,u=j2(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:h,windowId:m}=this.sessionManager.checkAndGetSessionAndWindowId(i,r.getTime());l.$session_id=h,l.$window_id=m}this.sessionPropsManager&&Ue(l,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&Ue(l,this.sessionRecording.sdkDebugProperties),l.$sdk_debug_retry_queue_size=(p=this.Ts)==null?void 0:p.length}catch(y){l.$sdk_debug_error_capturing_properties=String(y)}if(this.requestRouter.region===dr.CUSTOM&&(l.$lib_custom_api_host=this.config.api_host),d=e!=="$pageview"||i?e!=="$pageleave"||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,a),l=Ue(l,d),e==="$pageview"&&ne&&(l.title=ne.title),!J(o)){var g=r.getTime()-o;l.$duration=parseFloat((g/1e3).toFixed(3))}xt&&this.config.opt_out_useragent_filter&&(l.$browser_type=this._is_bot()?"bot":"browser"),(l=Ue({},u,this.persistence.properties(),this.sessionPersistence.properties(),l)).$is_identified=this._isIdentified(),Me(this.config.property_denylist)?Se(this.config.property_denylist,function(y){delete l[y]}):ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var x=this.config.sanitize_properties;x&&(ae.error("sanitize_properties is deprecated. Use before_send instead"),l=x(l,e));var b=this.js();return l.$process_person_profile=b,b&&!i&&this.Ns("_calculate_event_properties"),l}Ds(e){var s;if(!this.persistence||!this.js()||this.bs)return e;var r=this.persistence.get_initial_props(),a=(s=this.sessionPropsManager)==null?void 0:s.getSetOnceProps(),i=Ue({},r,a||{},e||{}),o=this.config.sanitize_properties;return o&&(ae.error("sanitize_properties is deprecated. Use before_send instead"),i=o(i,"$set_once")),this.bs=!0,En(i)?void 0:i}register(e,s){var r;(r=this.persistence)==null||r.register(e,s)}register_once(e,s,r){var a;(a=this.persistence)==null||a.register_once(e,s,r)}register_for_session(e){var s;(s=this.sessionPersistence)==null||s.register(e)}unregister(e){var s;(s=this.persistence)==null||s.unregister(e)}unregister_for_session(e){var s;(s=this.sessionPersistence)==null||s.unregister(e)}zs(e,s){this.register({[e]:s})}getFeatureFlag(e,s){return this.featureFlags.getFeatureFlag(e,s)}getFeatureFlagPayload(e){var s=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(s)}catch{return s}}isFeatureEnabled(e,s){return this.featureFlags.isFeatureEnabled(e,s)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,s,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,s,r)}getEarlyAccessFeatures(e,s,r){return s===void 0&&(s=!1),this.featureFlags.getEarlyAccessFeatures(e,s,r)}on(e,s){return this.ys.on(e,s)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var s,r;return(s=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&s!==void 0?s:()=>{}}getSurveys(e,s){s===void 0&&(s=!1),this.surveys.getSurveys(e,s)}getActiveMatchingSurveys(e,s){s===void 0&&(s=!1),this.surveys.getActiveMatchingSurveys(e,s)}renderSurvey(e,s){this.surveys.renderSurvey(e,s)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,s){return s===void 0&&(s=!1),this.surveys.canRenderSurveyAsync(e,s)}identify(e,s,r){if(!this.__loaded||!this.persistence)return ae.uninitializedWarning("posthog.identify");if(lt(e)&&(e=e.toString(),ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Qr){if(this.Ns("posthog.identify")){var a=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=a;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==a&&e!==this.get_property(sr)&&(this.unregister(sr),this.register({distinct_id:e}));var o=(this.persistence.get_property(is)||"anonymous")==="anonymous";e!==a&&o?(this.persistence.set_property(is,"identified"),this.setPersonPropertiesForFlags(te({},r||{},s||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:a},{$set:s||{},$set_once:r||{}}),this.xs=Nu(e,s,r),this.featureFlags.setAnonymousDistinctId(a)):(s||r)&&this.setPersonProperties(s,r),e!==a&&(this.reloadFeatureFlags(),this.unregister(Ta))}}else ae.critical('The string "'+Qr+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,s){if((e||s)&&this.Ns("posthog.setPersonProperties")){var r=Nu(this.get_distinct_id(),e,s);this.xs!==r?(this.setPersonPropertiesForFlags(te({},s||{},e||{})),this.capture("$set",{$set:e||{},$set_once:s||{}}),this.xs=r):ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,s,r){if(e&&s){if(this.Ns("posthog.group")){var a=this.getGroups();a[e]!==s&&this.resetGroupPropertiesForFlags(e),this.register({$groups:te({},a,{[e]:s})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:s,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),a[e]===s||r||this.reloadFeatureFlags()}}else ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,s){s===void 0&&(s=!0),this.featureFlags.setPersonPropertiesForFlags(e,s)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,s){s===void 0&&(s=!0),this.Ns("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,s)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var s,r,a,i;if(ae.info("reset"),!this.__loaded)return ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(s=this.persistence)==null||s.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(a=this.persistence)==null||a.set_property(is,"anonymous"),(i=this.sessionManager)==null||i.resetSessionId(),this.xs=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:Qr,$device_id:null},"");else{var l=this.config.get_device_id(Cs());this.register_once({distinct_id:l,$device_id:e?l:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,s;return(e=(s=this.sessionManager)==null?void 0:s.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:s,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),a=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+s);if(e!=null&&e.withTimestamp&&r){var i,o=(i=e.timestampLookBack)!==null&&i!==void 0?i:10;if(!r)return a;a+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return a}alias(e,s){return e===this.get_property(Gp)?(ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ns("posthog.alias")?(J(s)&&(s=this.get_distinct_id()),e!==s?(this.zs(sr,e),this.capture("$create_alias",{alias:e,distinct_id:s})):(ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var s=te({},this.config);if(Le(e)){var r,a,i,o,l;Ue(this.config,$u(e));var c=this.Is();(r=this.persistence)==null||r.update_config(this.config,s,c),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new zi(te({},this.config,{persistence:"sessionStorage"}),c),Ge.O()&&Ge.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(ls.DEBUG=!0,ae.info("set_config",{config:e,oldConfig:s,newConfig:te({},this.config)})),(a=this.sessionRecording)==null||a.startIfEnabledOrStop(),(i=this.autocapture)==null||i.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this.Us(),(l=this.externalIntegrations)==null||l.startIfEnabledOrStop()}}startSessionRecording(e){var s=e===!0,r={sampling:s||!(e==null||!e.sampling),linked_flag:s||!(e==null||!e.linked_flag),url_trigger:s||!(e==null||!e.url_trigger),event_trigger:s||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var a,i,o,l,c;(a=this.sessionManager)==null||a.checkAndGetSessionAndWindowId(),r.sampling&&((i=this.sessionRecording)==null||i.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("url")),r.event_trigger&&((c=this.sessionRecording)==null||c.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,s){var r=new Error("PostHog syntheticException");return this.exceptions.sendExceptionEvent(te({},jw((a=>a instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:r}),s))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var s;return(s=this.persistence)==null?void 0:s.props[e]}getSessionProperty(e){var s;return(s=this.sessionPersistence)==null?void 0:s.props[e]}toString(){var e,s=(e=this.config.name)!==null&&e!==void 0?e:_n;return s!==_n&&(s=_n+"."+s),s}_isIdentified(){var e,s;return((e=this.persistence)==null?void 0:e.get_property(is))==="identified"||((s=this.sessionPersistence)==null?void 0:s.get_property(is))==="identified"}js(){var e,s;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&En(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[sr])&&((s=this.persistence)==null||(s=s.props)==null||!s[Aa]))}As(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.js()||this.Ns("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ns(e){return this.config.person_profiles==="never"?(ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.zs(Aa,!0),!0)}Is(){var e=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default;return this.config.disable_persistence||e&&!!s}Us(){var e,s,r,a,i=this.Is();return((e=this.persistence)==null?void 0:e.Ae)!==i&&((r=this.persistence)==null||r.set_disabled(i)),((s=this.sessionPersistence)==null?void 0:s.Ae)!==i&&((a=this.sessionPersistence)==null||a.set_disabled(i)),i}opt_in_capturing(e){var s;this.consent.optInOut(!0),this.Us(),(J(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((s=e==null?void 0:e.captureEventName)!==null&&s!==void 0?s:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Os()}opt_out_capturing(){this.consent.optInOut(!1),this.Us()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Us()}_is_bot(){return Et?Jf(Et,this.config.custom_blocked_useragents):void 0}Os(){ne&&(ne.visibilityState==="visible"?this.ws||(this.ws=!0,this.capture("$pageview",{title:ne.title},{send_instantly:!0}),this.Ss&&(ne.removeEventListener("visibilitychange",this.Ss),this.Ss=null)):this.Ss||(this.Ss=this.Os.bind(this),Fe(ne,"visibilitychange",this.Ss)))}debug(e){e===!1?(I==null||I.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(I==null||I.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,s,r,a,i,o,l,c=this.ks||{};return"advanced_disable_flags"in c?!!c.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",a=!1,i=ae,o=(s="advanced_disable_flags")in(e=c)&&!J(e[s]),l=r in e&&!J(e[r]),o?e[s]:l?(i&&i.warn("Config field '"+r+"' is deprecated. Please use '"+s+"' instead. The old field will be removed in a future major version."),e[r]):a)}Ls(e){if(_e(this.config.before_send))return e;var s=Me(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var a of s){if(r=a(r),_e(r)){var i="Event '"+e.event+"' was rejected in beforeSend function";return P_(e.event)?ae.warn(i+". This can cause unexpected behavior."):ae.info(i),null}r.properties&&!En(r.properties)||ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,s){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:s})}captureTraceMetric(e,s,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:s,$ai_metric_value:String(r)})}}(function(t,e){for(var s=0;s<e.length;s++)t.prototype[e[s]]=I_(t.prototype[e[s]])})(li,["identify"]);var Vu,Pe=(Vu=yr[_n]=new li,function(){function t(){t.done||(t.done=!0,Xf=!1,Se(yr,function(e){e._dom_loaded()}))}ne!=null&&ne.addEventListener?ne.readyState==="complete"?t():Fe(ne,"DOMContentLoaded",t,{capture:!1}):I&&ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Vu);const Hi="opcode-analytics-settings",Js=class Js{constructor(){Qe(this,"settings",null)}static getInstance(){return Js.instance||(Js.instance=new Js),Js.instance}async initialize(){try{const e=localStorage.getItem(Hi);return e?this.settings=JSON.parse(e):this.settings={enabled:!0,hasConsented:!0},this.settings&&!this.settings.userId&&(this.settings.userId=this.generateAnonymousId(),await this.saveSettings()),this.settings&&(this.settings.sessionId=this.generateSessionId()),this.settings||{enabled:!0,hasConsented:!0}}catch(e){return console.error("Failed to initialize consent manager:",e),{enabled:!0,hasConsented:!0}}}async grantConsent(){this.settings||await this.initialize(),this.settings.enabled=!0,this.settings.hasConsented=!0,this.settings.consentDate=new Date().toISOString(),await this.saveSettings()}async revokeConsent(){this.settings||await this.initialize(),this.settings.enabled=!1,await this.saveSettings()}async deleteAllData(){localStorage.removeItem(Hi),this.settings={enabled:!0,hasConsented:!0,userId:this.generateAnonymousId(),sessionId:this.generateSessionId()},await this.saveSettings()}getSettings(){return this.settings}hasConsented(){var e;return((e=this.settings)==null?void 0:e.hasConsented)||!1}isEnabled(){var e;return((e=this.settings)==null?void 0:e.enabled)||!1}getUserId(){var e;return((e=this.settings)==null?void 0:e.userId)||this.generateAnonymousId()}getSessionId(){var e;return((e=this.settings)==null?void 0:e.sessionId)||this.generateSessionId()}async saveSettings(){if(this.settings)try{localStorage.setItem(Hi,JSON.stringify(this.settings))}catch(e){console.error("Failed to save analytics settings:",e)}}generateAnonymousId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const s=Math.random()*16|0;return(e==="x"?s:s&3|8).toString(16)})}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}};Qe(Js,"instance");let Xo=Js;const oe={SESSION_CREATED:"session_created",SESSION_COMPLETED:"session_completed",SESSION_RESUMED:"session_resumed",PROMPT_SUBMITTED:"prompt_submitted",SESSION_STOPPED:"session_stopped",CHECKPOINT_CREATED:"checkpoint_created",CHECKPOINT_RESTORED:"checkpoint_restored",TOOL_EXECUTED:"tool_executed",FEATURE_USED:"feature_used",MODEL_SELECTED:"model_selected",TAB_CREATED:"tab_created",TAB_CLOSED:"tab_closed",FILE_OPENED:"file_opened",FILE_EDITED:"file_edited",FILE_SAVED:"file_saved",AGENT_EXECUTED:"agent_executed",AGENT_STARTED:"agent_started",AGENT_PROGRESS:"agent_progress",AGENT_ERROR:"agent_error",MCP_SERVER_CONNECTED:"mcp_server_connected",MCP_SERVER_DISCONNECTED:"mcp_server_disconnected",MCP_SERVER_ADDED:"mcp_server_added",MCP_SERVER_REMOVED:"mcp_server_removed",MCP_TOOL_INVOKED:"mcp_tool_invoked",MCP_CONNECTION_ERROR:"mcp_connection_error",SLASH_COMMAND_USED:"slash_command_used",SLASH_COMMAND_SELECTED:"slash_command_selected",SLASH_COMMAND_EXECUTED:"slash_command_executed",SLASH_COMMAND_CREATED:"slash_command_created",SETTINGS_CHANGED:"settings_changed",APP_STARTED:"app_started",APP_CLOSED:"app_closed",ERROR_OCCURRED:"error_occurred",API_ERROR:"api_error",UI_ERROR:"ui_error",PERFORMANCE_BOTTLENECK:"performance_bottleneck",MEMORY_WARNING:"memory_warning",JOURNEY_MILESTONE:"journey_milestone",AI_INTERACTION:"ai_interaction",PROMPT_PATTERN:"prompt_pattern",OUTPUT_REGENERATED:"output_regenerated",CONVERSATION_ABANDONED:"conversation_abandoned",SUGGESTION_ACCEPTED:"suggestion_accepted",SUGGESTION_REJECTED:"suggestion_rejected",WORKFLOW_STARTED:"workflow_started",WORKFLOW_COMPLETED:"workflow_completed",WORKFLOW_ABANDONED:"workflow_abandoned",FEATURE_DISCOVERED:"feature_discovered",FEATURE_ADOPTED:"feature_adopted",FEATURE_COMBINATION:"feature_combination",RESOURCE_USAGE_HIGH:"resource_usage_high",RESOURCE_USAGE_SAMPLED:"resource_usage_sampled",NETWORK_PERFORMANCE:"network_performance",NETWORK_FAILURE:"network_failure",SESSION_ENGAGEMENT:"session_engagement"},de={session:t=>({event:oe.SESSION_CREATED,properties:{category:"session",...t}}),feature:(t,e,s)=>({event:oe.FEATURE_USED,properties:{category:"feature",feature:t,subfeature:e,...s}}),error:(t,e,s)=>({event:oe.ERROR_OCCURRED,properties:{category:"error",error_type:t,error_code:e,context:s}}),model:(t,e,s)=>({event:oe.MODEL_SELECTED,properties:{category:"model",new_model:t,previous_model:e,source:s}}),agent:(t,e,s,r)=>({event:oe.AGENT_EXECUTED,properties:{category:"agent",agent_type:t,agent_name:s,success:e,duration_ms:r}}),mcp:(t,e,s)=>({event:oe.MCP_SERVER_CONNECTED,properties:{category:"mcp",server_name:t,server_type:s,success:e}}),slashCommand:(t,e)=>({event:oe.SLASH_COMMAND_USED,properties:{category:"slash_command",command:t,success:e}}),performance:t=>({event:oe.FEATURE_USED,properties:{category:"performance",feature:"system_metrics",...t}}),promptSubmitted:t=>({event:oe.PROMPT_SUBMITTED,properties:{category:"session",...t}}),sessionStopped:t=>({event:oe.SESSION_STOPPED,properties:{category:"session",...t}}),enhancedSessionStopped:t=>({event:oe.SESSION_STOPPED,properties:{category:"session",duration_ms:t.duration_ms,messages_count:t.messages_count,reason:t.reason,time_to_first_message_ms:t.time_to_first_message_ms,average_response_time_ms:t.average_response_time_ms,idle_time_ms:t.idle_time_ms,prompts_sent:t.prompts_sent,tools_executed:t.tools_executed,tools_failed:t.tools_failed,files_created:t.files_created,files_modified:t.files_modified,files_deleted:t.files_deleted,total_tokens_used:t.total_tokens_used,code_blocks_generated:t.code_blocks_generated,errors_encountered:t.errors_encountered,model:t.model,has_checkpoints:t.has_checkpoints,checkpoint_count:t.checkpoint_count,was_resumed:t.was_resumed,agent_type:t.agent_type,agent_name:t.agent_name?Je.sanitizeAgentName(t.agent_name):void 0,agent_success:t.agent_success,stop_source:t.stop_source,final_state:t.final_state,has_pending_prompts:t.has_pending_prompts,pending_prompts_count:t.pending_prompts_count}}),checkpointCreated:t=>({event:oe.CHECKPOINT_CREATED,properties:{category:"session",...t}}),checkpointRestored:t=>({event:oe.CHECKPOINT_RESTORED,properties:{category:"session",...t}}),toolExecuted:t=>({event:oe.TOOL_EXECUTED,properties:{category:"session",tool_name:Je.sanitizeToolName(t.tool_name),execution_time_ms:t.execution_time_ms,success:t.success,error_message:t.error_message?Je.sanitizeErrorMessage(t.error_message):void 0}}),agentStarted:t=>({event:oe.AGENT_STARTED,properties:{category:"agent",agent_type:t.agent_type,agent_name:t.agent_name?Je.sanitizeAgentName(t.agent_name):void 0,has_custom_prompt:t.has_custom_prompt}}),agentProgress:t=>({event:oe.AGENT_PROGRESS,properties:{category:"agent",...t}}),agentError:t=>({event:oe.AGENT_ERROR,properties:{category:"agent",...t}}),mcpServerAdded:t=>({event:oe.MCP_SERVER_ADDED,properties:{category:"mcp",...t}}),mcpServerRemoved:t=>({event:oe.MCP_SERVER_REMOVED,properties:{category:"mcp",server_name:Je.sanitizeServerName(t.server_name),was_connected:t.was_connected}}),mcpToolInvoked:t=>({event:oe.MCP_TOOL_INVOKED,properties:{category:"mcp",server_name:Je.sanitizeServerName(t.server_name),tool_name:Je.sanitizeToolName(t.tool_name),invocation_source:t.invocation_source}}),mcpConnectionError:t=>({event:oe.MCP_CONNECTION_ERROR,properties:{category:"mcp",server_name:Je.sanitizeServerName(t.server_name),error_type:t.error_type,retry_attempt:t.retry_attempt}}),slashCommandSelected:t=>({event:oe.SLASH_COMMAND_SELECTED,properties:{category:"slash_command",command_name:Je.sanitizeCommandName(t.command_name),selection_method:t.selection_method}}),slashCommandExecuted:t=>({event:oe.SLASH_COMMAND_EXECUTED,properties:{category:"slash_command",command_name:Je.sanitizeCommandName(t.command_name),parameters_count:t.parameters_count,execution_time_ms:t.execution_time_ms}}),slashCommandCreated:t=>({event:oe.SLASH_COMMAND_CREATED,properties:{category:"slash_command",...t}}),apiError:t=>({event:oe.API_ERROR,properties:{category:"error",endpoint:Je.sanitizeEndpoint(t.endpoint),error_code:t.error_code,retry_count:t.retry_count,response_time_ms:t.response_time_ms}}),uiError:t=>({event:oe.UI_ERROR,properties:{category:"error",...t}}),performanceBottleneck:t=>({event:oe.PERFORMANCE_BOTTLENECK,properties:{category:"performance",...t}}),memoryWarning:t=>({event:oe.MEMORY_WARNING,properties:{category:"performance",...t}}),journeyMilestone:t=>({event:oe.JOURNEY_MILESTONE,properties:{category:"user_journey",...t}}),enhancedPromptSubmitted:t=>({event:oe.PROMPT_SUBMITTED,properties:{category:"session",prompt_length:t.prompt_length,model:t.model,has_attachments:t.has_attachments,source:t.source,word_count:t.word_count,conversation_depth:t.conversation_depth,prompt_complexity:t.prompt_complexity,contains_code:t.contains_code,language_detected:t.language_detected,session_age_ms:t.session_age_ms}}),enhancedToolExecuted:t=>({event:oe.TOOL_EXECUTED,properties:{category:"session",tool_name:Je.sanitizeToolName(t.tool_name),execution_time_ms:t.execution_time_ms,success:t.success,error_message:t.error_message?Je.sanitizeErrorMessage(t.error_message):void 0,tool_category:t.tool_category,consecutive_failures:t.consecutive_failures,retry_attempted:t.retry_attempted,input_size_bytes:t.input_size_bytes,output_size_bytes:t.output_size_bytes}}),enhancedError:t=>({event:oe.ERROR_OCCURRED,properties:{category:"error",error_type:t.error_type,error_code:t.error_code,error_message:t.error_message?Je.sanitizeErrorMessage(t.error_message):void 0,context:t.context,user_action_before_error:t.user_action_before_error,recovery_attempted:t.recovery_attempted,recovery_successful:t.recovery_successful,error_frequency:t.error_frequency,stack_trace_hash:t.stack_trace_hash}}),sessionEngagement:t=>({event:oe.SESSION_ENGAGEMENT,properties:{category:"engagement",...t}}),featureDiscovered:t=>({event:oe.FEATURE_DISCOVERED,properties:{category:"feature_adoption",...t}}),outputRegenerated:t=>({event:oe.OUTPUT_REGENERATED,properties:{category:"quality",...t}}),conversationAbandoned:(t,e)=>({event:oe.CONVERSATION_ABANDONED,properties:{category:"quality",reason:t,messages_count:e}}),suggestionAccepted:t=>({event:oe.SUGGESTION_ACCEPTED,properties:{category:"quality",...t}}),suggestionRejected:t=>({event:oe.SUGGESTION_REJECTED,properties:{category:"quality",...t}}),resourceUsageHigh:t=>({event:oe.RESOURCE_USAGE_HIGH,properties:{category:"performance",...t}}),resourceUsageSampled:t=>({event:oe.RESOURCE_USAGE_SAMPLED,properties:{category:"performance",...t}}),featureAdopted:t=>({event:oe.FEATURE_ADOPTED,properties:{category:"feature_adoption",...t}}),featureCombination:t=>({event:oe.FEATURE_COMBINATION,properties:{category:"feature_adoption",...t}}),aiInteraction:t=>({event:oe.AI_INTERACTION,properties:{category:"ai",...t}}),promptPattern:t=>({event:oe.PROMPT_PATTERN,properties:{category:"ai",...t}}),workflowStarted:t=>({event:oe.WORKFLOW_STARTED,properties:{category:"workflow",...t}}),workflowCompleted:t=>({event:oe.WORKFLOW_COMPLETED,properties:{category:"workflow",...t}}),workflowAbandoned:t=>({event:oe.WORKFLOW_ABANDONED,properties:{category:"workflow",...t}}),networkPerformance:t=>({event:oe.NETWORK_PERFORMANCE,properties:{category:"network",endpoint_type:t.endpoint_type,latency_ms:t.latency_ms,payload_size_bytes:t.payload_size_bytes,connection_quality:t.connection_quality,retry_count:t.retry_count,circuit_breaker_triggered:t.circuit_breaker_triggered}}),networkFailure:t=>({event:oe.NETWORK_FAILURE,properties:{category:"network",endpoint_type:t.endpoint_type,latency_ms:t.latency_ms,payload_size_bytes:t.payload_size_bytes,connection_quality:t.connection_quality,retry_count:t.retry_count,circuit_breaker_triggered:t.circuit_breaker_triggered}})},Je={sanitizeFilePath:t=>{const e=t.split(".").pop();return e?`*.${e}`:"unknown"},sanitizeProjectPath:t=>"project",sanitizeErrorMessage:t=>(t=t.replace(/\/[\w\-\/\.]+/g,"/***"),t=t.replace(/[a-zA-Z0-9]{20,}/g,"***"),t=t.replace(/[\w\.-]+@[\w\.-]+\.\w+/g,"***@***.***"),t),sanitizeAgentName:t=>t.split("-")[0]||"custom",sanitizeToolName:t=>t.replace(/\/[\w\-\/\.]+/g,"").toLowerCase(),sanitizeServerName:t=>t.split(/[\-_]/)[0]||"custom",sanitizeCommandName:t=>t.replace(/^custom-/,"").split("-")[0]||"custom",sanitizeEndpoint:t=>t.replace(/\/\d+/g,"/:id").replace(/\/[\w\-]{20,}/g,"/:id")},Xs=class Xs{constructor(){Qe(this,"monitoringInterval",null);Qe(this,"isMonitoring",!1);Qe(this,"sampleCount",0);Qe(this,"highUsageThresholds",{memory:500,cpu:80,networkRequests:50})}static getInstance(){return Xs.instance||(Xs.instance=new Xs),Xs.instance}startMonitoring(e=6e4){if(this.isMonitoring){console.warn("Resource monitoring is already active");return}this.isMonitoring=!0,this.sampleCount=0,this.collectAndReportMetrics(),this.monitoringInterval=setInterval(()=>{this.collectAndReportMetrics()},e),console.log(`Resource monitoring started with ${e}ms interval`)}stopMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null),this.isMonitoring=!1,console.log("Resource monitoring stopped")}collectResourceMetrics(){const e={memory_usage_mb:this.getMemoryUsage(),network_requests_count:this.getNetworkRequestsCount(),active_connections:this.getActiveConnections()},s=this.getCPUUsage();s!==null&&(e.cpu_usage_percent=s);const r=this.getCacheHitRate();return r!==null&&(e.cache_hit_rate=r),e}collectAndReportMetrics(){try{const e=this.collectResourceMetrics();if(this.sampleCount++,this.sampleCount%10===0){const r=de.resourceUsageSampled(e);Q.track(r.event,r.properties)}if(e.memory_usage_mb>this.highUsageThresholds.memory||e.cpu_usage_percent&&e.cpu_usage_percent>this.highUsageThresholds.cpu||e.network_requests_count>this.highUsageThresholds.networkRequests){const r=de.resourceUsageHigh(e);Q.track(r.event,r.properties)}}catch(e){console.error("Failed to collect resource metrics:",e)}}getMemoryUsage(){return"memory"in performance&&performance.memory?performance.memory.usedJSHeapSize/(1024*1024):0}getCPUUsage(){return null}getNetworkRequestsCount(){return"PerformanceObserver"in window?performance.getEntriesByType("resource").filter(r=>r.startTime>performance.now()-6e4).length:0}getActiveConnections(){return 0}getCacheHitRate(){return null}setThresholds(e){this.highUsageThresholds={...this.highUsageThresholds,...e}}getThresholds(){return{...this.highUsageThresholds}}collectOnce(){const e=this.collectResourceMetrics();if(e.memory_usage_mb>this.highUsageThresholds.memory||e.cpu_usage_percent&&e.cpu_usage_percent>this.highUsageThresholds.cpu||e.network_requests_count>this.highUsageThresholds.networkRequests){const r=de.resourceUsageHigh(e);Q.track(r.event,r.properties)}return e}};Qe(Xs,"instance");let Zo=Xs;const K2=Zo.getInstance(),Zs=class Zs{constructor(){Qe(this,"initialized",!1);Qe(this,"consentManager");Qe(this,"config");Qe(this,"eventQueue",[]);Qe(this,"flushInterval",null);Qe(this,"currentScreen","app_start");this.consentManager=Xo.getInstance(),this.config={apiKey:"phc_6seRe1SJkFckJU2qQWeeIy62kaSoaUbCsdVCm1TQZg8",apiHost:"https://us.i.posthog.com",persistence:"localStorage",autocapture:!1,disable_session_recording:!0,opt_out_capturing_by_default:!1}}static getInstance(){return Zs.instance||(Zs.instance=new Zs),Zs.instance}async initialize(){if(!this.initialized)try{const e=await this.consentManager.initialize();e.hasConsented&&e.enabled&&this.initializePostHog(e),this.startFlushInterval(),this.initialized=!0}catch(e){console.error("Failed to initialize analytics:",e)}}initializePostHog(e){try{Pe.init(this.config.apiKey,{api_host:this.config.apiHost,capture_pageview:!1,capture_pageleave:!1,bootstrap:{distinctID:e.userId},persistence:this.config.persistence,autocapture:this.config.autocapture,disable_session_recording:this.config.disable_session_recording,opt_out_capturing_by_default:this.config.opt_out_capturing_by_default,loaded:s=>{s.identify(e.userId,{anonymous:!0,consent_date:e.consentDate,app_type:"desktop",app_name:"opcode"}),s.capture("$screen",{$screen_name:"app_start"}),s.opt_in_capturing(),this.config.loaded&&this.config.loaded(s)}})}catch(s){console.error("Failed to initialize PostHog:",s)}}async enable(){await this.consentManager.grantConsent();const e=this.consentManager.getSettings();e&&this.initializePostHog(e)}async disable(){await this.consentManager.revokeConsent(),typeof Pe<"u"&&Pe.opt_out_capturing&&Pe.opt_out_capturing()}async deleteAllData(){await this.consentManager.deleteAllData(),typeof Pe<"u"&&Pe.reset&&Pe.reset()}setScreen(e){this.currentScreen=e,typeof Pe<"u"&&typeof Pe.capture=="function"&&Pe.capture("$screen",{$screen_name:e})}track(e,s){if(!this.consentManager.isEnabled())return;const a={...this.sanitizeProperties(s||{}),screen_name:this.currentScreen,app_context:"opcode_desktop"},i={event:e,properties:a,timestamp:Date.now(),sessionId:this.consentManager.getSessionId(),userId:this.consentManager.getUserId()};this.eventQueue.push(i),typeof Pe<"u"&&typeof Pe.capture=="function"&&this.flushEvents()}identify(e){if(!this.consentManager.isEnabled())return;const s=this.consentManager.getUserId(),r=this.sanitizeProperties(e||{});typeof Pe<"u"&&Pe.identify&&Pe.identify(s,{...r,anonymous:!0})}sanitizeProperties(e){const s={};for(const[r,a]of Object.entries(e))if(a!=null)if(r.includes("path")||r.includes("file"))s[r]=typeof a=="string"?Je.sanitizeFilePath(a):a;else if(r.includes("project"))s[r]=typeof a=="string"?Je.sanitizeProjectPath(a):a;else if(r.includes("error")||r.includes("message"))s[r]=typeof a=="string"?Je.sanitizeErrorMessage(a):a;else if(r.includes("agent_name"))s[r]=typeof a=="string"?Je.sanitizeAgentName(a):a;else if(typeof a=="string"){let i=a.replace(/\/[\w\-\/\.]+/g,"/***");i=i.replace(/[a-zA-Z0-9]{32,}/g,"***"),i=i.replace(/[\w\.-]+@[\w\.-]+\.\w+/g,"***@***.***"),s[r]=i}else s[r]=a;return s}flushEvents(){if(this.eventQueue.length===0)return;const e=[...this.eventQueue];this.eventQueue=[],e.forEach(s=>{var r;typeof Pe<"u"&&Pe.capture&&Pe.capture(s.event,{...s.properties,$session_id:s.sessionId,timestamp:s.timestamp,$current_url:`opcode://${((r=s.properties)==null?void 0:r.screen_name)||"unknown"}`})})}startFlushInterval(){this.flushInterval=setInterval(()=>{this.consentManager.isEnabled()&&this.flushEvents()},5e3)}shutdown(){this.flushInterval&&(clearInterval(this.flushInterval),this.flushInterval=null),this.flushEvents()}isEnabled(){return this.consentManager.isEnabled()}hasConsented(){return this.consentManager.hasConsented()}getSettings(){return this.consentManager.getSettings()}};Qe(Zs,"instance");let Qo=Zs;const Q=Qo.getInstance(),Y2={chat:"chat_session",agent:"agent_view",projects:"projects_list",usage:"usage_dashboard",mcp:"mcp_manager",settings:"settings","claude-md":"markdown_editor","claude-file":"file_editor","agent-execution":"agent_execution","create-agent":"create_agent","import-agent":"import_agent"};function vs(){return{sessionCreated:(t,e)=>{const s=de.session({model:t,source:e});Q.track(s.event,s.properties)},sessionCompleted:()=>{Q.track(oe.SESSION_COMPLETED)},sessionResumed:t=>{const e=de.session({resumed:!0,checkpoint_id:t});Q.track(oe.SESSION_RESUMED,e.properties)},featureUsed:(t,e,s)=>{const r=de.feature(t,e,s);Q.track(r.event,r.properties)},modelSelected:(t,e,s)=>{const r=de.model(t,e,s);Q.track(r.event,r.properties)},tabCreated:t=>{Q.track(oe.TAB_CREATED,{tab_type:t})},tabClosed:t=>{Q.track(oe.TAB_CLOSED,{tab_type:t})},fileOpened:t=>{Q.track(oe.FILE_OPENED,{file_type:t})},fileEdited:t=>{Q.track(oe.FILE_EDITED,{file_type:t})},fileSaved:t=>{Q.track(oe.FILE_SAVED,{file_type:t})},agentExecuted:(t,e,s,r)=>{const a=de.agent(t,e,s,r);Q.track(a.event,a.properties)},mcpServerConnected:(t,e,s)=>{const r=de.mcp(t,e,s);Q.track(r.event,r.properties)},mcpServerDisconnected:t=>{Q.track(oe.MCP_SERVER_DISCONNECTED,{server_name:t})},slashCommandUsed:(t,e)=>{const s=de.slashCommand(t,e);Q.track(s.event,s.properties)},settingsChanged:(t,e)=>{Q.track(oe.SETTINGS_CHANGED,{setting:t,value:e})},errorOccurred:(t,e,s)=>{const r=de.error(t,e,s);Q.track(r.event,r.properties)},performanceMetrics:t=>{const e=de.performance(t);Q.track(e.event,e.properties)},promptSubmitted:t=>{const e=de.promptSubmitted(t);Q.track(e.event,e.properties)},sessionStopped:t=>{const e=de.sessionStopped(t);Q.track(e.event,e.properties)},enhancedSessionStopped:t=>{const e=de.enhancedSessionStopped(t);Q.track(e.event,e.properties)},checkpointCreated:t=>{const e=de.checkpointCreated(t);Q.track(e.event,e.properties)},checkpointRestored:t=>{const e=de.checkpointRestored(t);Q.track(e.event,e.properties)},toolExecuted:t=>{const e=de.toolExecuted(t);Q.track(e.event,e.properties)},agentStarted:t=>{const e=de.agentStarted(t);Q.track(e.event,e.properties)},agentProgress:t=>{const e=de.agentProgress(t);Q.track(e.event,e.properties)},agentError:t=>{const e=de.agentError(t);Q.track(e.event,e.properties)},mcpServerAdded:t=>{const e=de.mcpServerAdded(t);Q.track(e.event,e.properties)},mcpServerRemoved:t=>{const e=de.mcpServerRemoved(t);Q.track(e.event,e.properties)},mcpToolInvoked:t=>{const e=de.mcpToolInvoked(t);Q.track(e.event,e.properties)},mcpConnectionError:t=>{const e=de.mcpConnectionError(t);Q.track(e.event,e.properties)},slashCommandSelected:t=>{const e=de.slashCommandSelected(t);Q.track(e.event,e.properties)},slashCommandExecuted:t=>{const e=de.slashCommandExecuted(t);Q.track(e.event,e.properties)},slashCommandCreated:t=>{const e=de.slashCommandCreated(t);Q.track(e.event,e.properties)},apiError:t=>{const e=de.apiError(t);Q.track(e.event,e.properties)},uiError:t=>{const e=de.uiError(t);Q.track(e.event,e.properties)},performanceBottleneck:t=>{const e=de.performanceBottleneck(t);Q.track(e.event,e.properties)},memoryWarning:t=>{const e=de.memoryWarning(t);Q.track(e.event,e.properties)},journeyMilestone:t=>{const e=de.journeyMilestone(t);Q.track(e.event,e.properties)},enhancedPromptSubmitted:t=>{const e=de.enhancedPromptSubmitted(t);Q.track(e.event,e.properties)},enhancedToolExecuted:t=>{const e=de.enhancedToolExecuted(t);Q.track(e.event,e.properties)},enhancedError:t=>{const e=de.enhancedError(t);Q.track(e.event,e.properties)},sessionEngagement:t=>{const e=de.sessionEngagement(t);Q.track(e.event,e.properties)},featureDiscovered:t=>{const e=de.featureDiscovered(t);Q.track(e.event,e.properties)},featureAdopted:t=>{const e=de.featureAdopted(t);Q.track(e.event,e.properties)},featureCombination:t=>{const e=de.featureCombination(t);Q.track(e.event,e.properties)},outputRegenerated:t=>{const e=de.outputRegenerated(t);Q.track(e.event,e.properties)},conversationAbandoned:(t,e)=>{const s=de.conversationAbandoned(t,e);Q.track(s.event,s.properties)},suggestionAccepted:t=>{const e=de.suggestionAccepted(t);Q.track(e.event,e.properties)},suggestionRejected:t=>{const e=de.suggestionRejected(t);Q.track(e.event,e.properties)},aiInteraction:t=>{const e=de.aiInteraction(t);Q.track(e.event,e.properties)},promptPattern:t=>{const e=de.promptPattern(t);Q.track(e.event,e.properties)},workflowStarted:t=>{const e=de.workflowStarted(t);Q.track(e.event,e.properties)},workflowCompleted:t=>{const e=de.workflowCompleted(t);Q.track(e.event,e.properties)},workflowAbandoned:t=>{const e=de.workflowAbandoned(t);Q.track(e.event,e.properties)},networkPerformance:t=>{const e=de.networkPerformance(t);Q.track(e.event,e.properties)},networkFailure:t=>{const e=de.networkFailure(t);Q.track(e.event,e.properties)},resourceUsageHigh:t=>{const e=de.resourceUsageHigh(t);Q.track(e.event,e.properties)},resourceUsageSampled:t=>{const e=de.resourceUsageSampled(t);Q.track(e.event,e.properties)}}}function J2(){f.useEffect(()=>{Q.track(oe.APP_STARTED);const t=()=>{Q.track(oe.APP_CLOSED),Q.shutdown()};return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)},[])}function X2(t){const e=f.useRef(Date.now()),s=f.useRef(0);f.useEffect(()=>{s.current+=1}),f.useEffect(()=>()=>{const r=Date.now()-e.current;Q.track("component_metrics",{component:t,lifetime_ms:r,render_count:s.current})},[t])}function Z2(t,e){f.useEffect(()=>{if(t){const s=Y2[t]||t,r=e?`${s}/${e.substring(0,8)}`:s;Q.setScreen(r)}},[t,e])}function Q2(t){const e=f.useRef(Date.now()),s=f.useRef(0),r=vs();return{trackUsage:f.useCallback(()=>{if(s.current+=1,s.current===1&&r.featureDiscovered({feature_name:t,discovery_method:"organic",time_to_first_use_ms:Date.now()-e.current,initial_success:!0}),s.current===5){const i=(Date.now()-e.current)/864e5;r.featureAdopted({feature:t,adoption_stage:"adopted",usage_count:s.current,days_since_first_use:i,usage_trend:"increasing"})}},[t,r]),usageCount:s.current}}function tS(t){const e=f.useRef(null),s=f.useRef(0),r=f.useRef(new Set),a=f.useRef(0),i=vs(),o=f.useCallback(u=>{e.current=Date.now(),s.current=0,r.current.clear(),a.current=0,i.workflowStarted({workflow_type:t,steps_completed:0,total_steps:u,duration_ms:0,interruptions:0,completion_rate:0,tools_used:[]})},[t,i]),l=f.useCallback(u=>{s.current+=1,u&&r.current.add(u)},[]),c=f.useCallback(()=>{a.current+=1},[]),d=f.useCallback((u,h=!0)=>{if(!e.current)return;const m=Date.now()-e.current,p=s.current/u,g={workflow_type:t,steps_completed:s.current,total_steps:u,duration_ms:m,interruptions:a.current,completion_rate:p,tools_used:Array.from(r.current)};h?i.workflowCompleted(g):i.workflowAbandoned(g),e.current=null},[t,i]);return{startWorkflow:o,trackStep:l,trackInterruption:c,completeWorkflow:d}}const eN=[{name:"review",description:"Review code for best practices",content:`Review the following code for best practices, potential issues, and improvements:

@$ARGUMENTS`,allowedTools:["Read","Grep"]},{name:"explain",description:"Explain how something works",content:"Explain how $ARGUMENTS works in detail, including its purpose, implementation, and usage examples.",allowedTools:["Read","Grep","WebSearch"]},{name:"fix-issue",description:"Fix a specific issue",content:"Fix issue #$ARGUMENTS following our coding standards and best practices.",allowedTools:["Read","Edit","MultiEdit","Write"]},{name:"test",description:"Write tests for code",content:`Write comprehensive tests for:

@$ARGUMENTS

Include unit tests, edge cases, and integration tests where appropriate.`,allowedTools:["Read","Write","Edit"]}],tN=t=>t.has_bash_commands?dt:t.has_file_references?tn:t.accepts_arguments?on:t.scope==="project"?Mt:t.scope==="user"?Vt:Ya,Zf=({projectPath:t,className:e,scopeFilter:s="all"})=>{const[r,a]=f.useState([]),[i,o]=f.useState(!0),[l,c]=f.useState(!1),[d,u]=f.useState(null),[h,m]=f.useState(""),[p,g]=f.useState(s==="all"?"all":s),[x,b]=f.useState(new Set),[y,v]=f.useState(!1),[j,S]=f.useState(null),[w,_]=f.useState({name:"",namespace:"",content:"",description:"",allowedTools:[],scope:"user"}),[N,C]=f.useState(!1),[P,O]=f.useState(null),[B,U]=f.useState(!1),G=vs();f.useEffect(()=>{R()},[t]);const R=async()=>{try{o(!0),u(null);const $=await X.slashCommandsList(t);a($)}catch($){console.error("Failed to load slash commands:",$),u("Failed to load commands")}finally{o(!1)}},z=()=>{S(null),_({name:"",namespace:"",content:"",description:"",allowedTools:[],scope:s!=="all"?s:t?"project":"user"}),v(!0)},re=$=>{S($),_({name:$.name,namespace:$.namespace||"",content:$.content,description:$.description||"",allowedTools:$.allowed_tools,scope:$.scope}),v(!0)},A=async()=>{try{c(!0),u(null),await X.slashCommandSave(w.scope,w.name,w.namespace||void 0,w.content,w.description||void 0,w.allowedTools,w.scope==="project"?t:void 0),G.slashCommandCreated({command_type:"custom",has_parameters:w.content.includes("$ARGUMENTS")}),v(!1),await R()}catch($){console.error("Failed to save command:",$),u($ instanceof Error?$.message:"Failed to save command")}finally{c(!1)}},F=$=>{O($),C(!0)},ee=async()=>{if(P)try{U(!0),u(null),await X.slashCommandDelete(P.id,t),C(!1),O(null),await R()}catch($){console.error("Failed to delete command:",$);const M=$ instanceof Error?$.message:"Failed to delete command";u(M)}finally{U(!1)}},D=()=>{C(!1),O(null)},Z=$=>{b(M=>{const k=new Set(M);return k.has($)?k.delete($):k.add($),k})},me=$=>{_(M=>({...M,allowedTools:M.allowedTools.includes($)?M.allowedTools.filter(k=>k!==$):[...M.allowedTools,$]}))},fe=$=>{_(M=>({...M,name:$.name,description:$.description,content:$.content,allowedTools:$.allowedTools}))},be=r.filter($=>{if($.scope==="default"||s!=="all"&&$.scope!==s||p!=="all"&&$.scope!==p)return!1;if(h){const M=h.toLowerCase();return $.name.toLowerCase().includes(M)||$.full_command.toLowerCase().includes(M)||$.description&&$.description.toLowerCase().includes(M)||$.namespace&&$.namespace.toLowerCase().includes(M)}return!0}),le=be.reduce(($,M)=>{const k=M.namespace?`${M.namespace} (${M.scope})`:`${M.scope==="project"?"Project":"User"} Commands`;return $[k]||($[k]=[]),$[k].push(M),$},{});return n.jsxs("div",{className:V("space-y-4",e),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:s==="project"?"Project Slash Commands":"Slash Commands"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s==="project"?"Create custom commands for this project":"Create custom commands to streamline your workflow"})]}),n.jsxs(L,{onClick:z,size:"sm",className:"gap-2",children:[n.jsx(nt,{className:"h-4 w-4"}),"New Command"]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{placeholder:"Search commands...",value:h,onChange:$=>m($.target.value),className:"pl-9"})]})}),s==="all"&&n.jsxs(ln,{value:p,onValueChange:$=>g($),children:[n.jsx(Ps,{className:"w-[150px]",children:n.jsx(cn,{})}),n.jsxs(Rs,{children:[n.jsx(St,{value:"all",children:"All Commands"}),n.jsx(St,{value:"project",children:"Project"}),n.jsx(St,{value:"user",children:"User"})]})]})]}),d&&n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-destructive/10 text-destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:d})]}),i?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(ye,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):be.length===0?n.jsx(se,{className:"p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ya,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h?"No commands found":s==="project"?"No project commands created yet":"No commands created yet"}),!h&&n.jsx(L,{onClick:z,variant:"outline",size:"sm",className:"mt-4",children:s==="project"?"Create your first project command":"Create your first command"})]})}):n.jsx("div",{className:"space-y-4",children:Object.entries(le).map(([$,M])=>n.jsxs(se,{className:"overflow-hidden",children:[n.jsx("div",{className:"p-4 bg-muted/50 border-b",children:n.jsx("h4",{className:"text-sm font-medium",children:$})}),n.jsx("div",{className:"divide-y",children:M.map(k=>{const E=tN(k),q=x.has(k.id);return n.jsx("div",{children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(E,{className:"h-5 w-5 mt-0.5 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("code",{className:"text-sm font-mono text-primary",children:k.full_command}),k.accepts_arguments&&n.jsx(Ee,{variant:"secondary",className:"text-xs",children:"Arguments"})]}),k.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:k.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[k.allowed_tools.length>0&&n.jsxs("span",{className:"text-muted-foreground",children:[k.allowed_tools.length," tool",k.allowed_tools.length===1?"":"s"]}),k.has_bash_commands&&n.jsx(Ee,{variant:"outline",className:"text-xs",children:"Bash"}),k.has_file_references&&n.jsx(Ee,{variant:"outline",className:"text-xs",children:"Files"}),n.jsx("button",{onClick:()=>Z(k.id),className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:q?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"h-3 w-3"}),"Hide content"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:"h-3 w-3"}),"Show content"]})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>re(k),className:"h-8 w-8",children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>F(k),className:"h-8 w-8 text-destructive hover:text-destructive",children:n.jsx(Nt,{className:"h-4 w-4"})})]})]}),n.jsx(Te,{children:q&&n.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:n.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-md",children:n.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:k.content})})})})]})},k.id)})})]},$))}),n.jsx(yt,{open:y,onOpenChange:v,children:n.jsxs(mt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(bt,{children:n.jsx(pt,{children:j?"Edit Command":"Create New Command"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Scope"}),n.jsxs(ln,{value:w.scope,onValueChange:$=>_(M=>({...M,scope:$})),disabled:s!=="all"||!t&&w.scope==="project",children:[n.jsx(Ps,{children:n.jsx(cn,{})}),n.jsxs(Rs,{children:[(s==="all"||s==="user")&&n.jsx(St,{value:"user",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-4 w-4"}),"User (Global)"]})}),(s==="all"||s==="project")&&n.jsx(St,{value:"project",disabled:!t,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4"}),"Project"]})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:w.scope==="user"?"Available across all projects":"Only available in this project"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Command Name*"}),n.jsx(xe,{placeholder:"e.g., review, fix-issue",value:w.name,onChange:$=>_(M=>({...M,name:$.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Namespace (Optional)"}),n.jsx(xe,{placeholder:"e.g., frontend, backend",value:w.namespace,onChange:$=>_(M=>({...M,namespace:$.target.value}))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Description (Optional)"}),n.jsx(xe,{placeholder:"Brief description of what this command does",value:w.description,onChange:$=>_(M=>({...M,description:$.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Command Content*"}),n.jsx(Ar,{placeholder:"Enter the prompt content. Use $ARGUMENTS for dynamic values.",value:w.content,onChange:$=>_(M=>({...M,content:$.target.value})),className:"min-h-[150px] font-mono text-sm"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use ",n.jsx("code",{children:"$ARGUMENTS"})," for user input, ",n.jsx("code",{children:"@filename"})," for files, and ",n.jsx("code",{children:"!`command`"})," for bash commands"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Allowed Tools"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Vp.map($=>n.jsx(L,{variant:w.allowedTools.includes($)?"default":"outline",size:"sm",onClick:()=>me($),type:"button",children:$},$))}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select which tools Claude can use with this command"})]}),!j&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Examples"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:eN.map($=>n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>fe($),className:"justify-start",children:[n.jsx(Ka,{className:"h-4 w-4 mr-2"}),$.name]},$.name))})]}),w.name&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Preview"}),n.jsx("div",{className:"p-3 bg-muted rounded-md",children:n.jsxs("code",{className:"text-sm",children:["/",w.namespace&&`${w.namespace}:`,w.name,w.content.includes("$ARGUMENTS")&&" [arguments]"]})})]})]}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),n.jsx(L,{onClick:A,disabled:!w.name||!w.content||l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fn,{className:"h-4 w-4 mr-2"}),"Save"]})})]})]})}),n.jsx(yt,{open:N,onOpenChange:C,children:n.jsxs(mt,{className:"max-w-md",children:[n.jsx(bt,{children:n.jsx(pt,{children:"Delete Command"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{children:"Are you sure you want to delete this command?"}),P&&n.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[n.jsx("code",{className:"text-sm font-mono",children:P.full_command}),P.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:P.description})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. The command file will be permanently deleted."})]}),n.jsxs(Wt,{children:[n.jsx(L,{variant:"outline",onClick:D,disabled:B,children:"Cancel"}),n.jsx(L,{variant:"destructive",onClick:ee,disabled:B,children:B?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})})]})};function sN({setToast:t,onChange:e}){const[s,r]=f.useState({http_proxy:null,https_proxy:null,no_proxy:null,all_proxy:null,enabled:!1}),[a,i]=f.useState({http_proxy:null,https_proxy:null,no_proxy:null,all_proxy:null,enabled:!1});f.useEffect(()=>{l()},[]);const o=async()=>{try{await jr("save_proxy_settings",{settings:s}),i(s),t({message:"Proxy settings saved and applied successfully.",type:"success"})}catch(d){throw console.error("Failed to save proxy settings:",d),t({message:"Failed to save proxy settings",type:"error"}),d}};f.useEffect(()=>{if(e){const d=JSON.stringify(s)!==JSON.stringify(a);e(d,()=>s,o)}},[s,a,e]);const l=async()=>{try{const d=await jr("get_proxy_settings");r(d),i(d)}catch(d){console.error("Failed to load proxy settings:",d),t({message:"Failed to load proxy settings",type:"error"})}},c=(d,u)=>{r(h=>({...h,[d]:u||null}))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-medium",children:"Proxy Settings"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure proxy settings for Claude API requests"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(ce,{htmlFor:"proxy-enabled",children:"Enable Proxy"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Use proxy for all Claude API requests"})]}),n.jsx(Ks,{id:"proxy-enabled",checked:s.enabled,onCheckedChange:d=>r(u=>({...u,enabled:d}))})]}),n.jsxs("div",{className:"space-y-4",style:{opacity:s.enabled?1:.5},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"http-proxy",children:"HTTP Proxy"}),n.jsx(xe,{id:"http-proxy",placeholder:"http://proxy.example.com:8080",value:s.http_proxy||"",onChange:d=>c("http_proxy",d.target.value),disabled:!s.enabled})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"https-proxy",children:"HTTPS Proxy"}),n.jsx(xe,{id:"https-proxy",placeholder:"http://proxy.example.com:8080",value:s.https_proxy||"",onChange:d=>c("https_proxy",d.target.value),disabled:!s.enabled})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"no-proxy",children:"No Proxy"}),n.jsx(xe,{id:"no-proxy",placeholder:"localhost,127.0.0.1,.example.com",value:s.no_proxy||"",onChange:d=>c("no_proxy",d.target.value),disabled:!s.enabled}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of hosts that should bypass the proxy"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"all-proxy",children:"All Proxy (Optional)"}),n.jsx(xe,{id:"all-proxy",placeholder:"socks5://proxy.example.com:1080",value:s.all_proxy||"",onChange:d=>c("all_proxy",d.target.value),disabled:!s.enabled}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Proxy URL to use for all protocols if protocol-specific proxies are not set"})]})]})]})]})}const Qf=({className:t})=>{const[e,s]=f.useState(null),[r,a]=f.useState(!0),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState("general"),[h,m]=f.useState(null),[p,g]=f.useState(null),[x,b]=f.useState(!1),[y,v]=f.useState(null),[j,S]=f.useState([]),[w,_]=f.useState([]),[N,C]=f.useState([]),[P,O]=f.useState(!1),B=He.useRef(null),{theme:U,setTheme:G,customColors:R,setCustomColors:z}=Os(),[re,A]=f.useState(!1),F=He.useRef(null),[ee,D]=f.useState(!1),Z=vs(),[me,fe]=f.useState(!0),[be,le]=f.useState(!0);f.useEffect(()=>{k(),M(),$(),fe(Ss.isEnabled()),(async()=>{const H=await X.getSetting("startup_intro_enabled");le(H===null?!0:H==="true")})()},[]);const $=async()=>{const H=Q.getSettings();H&&D(H.enabled)},M=async()=>{try{const H=await X.getClaudeBinaryPath();m(H)}catch(H){console.error("Failed to load Claude binary path:",H)}},k=async()=>{try{a(!0),c(null);const H=await X.getClaudeSettings();if(!H||typeof H!="object"){console.warn("Loaded settings is not an object:",H),s({});return}s(H),H.permissions&&typeof H.permissions=="object"&&(Array.isArray(H.permissions.allow)&&S(H.permissions.allow.map((ue,we)=>({id:`allow-${we}`,value:ue}))),Array.isArray(H.permissions.deny)&&_(H.permissions.deny.map((ue,we)=>({id:`deny-${we}`,value:ue})))),H.env&&typeof H.env=="object"&&!Array.isArray(H.env)&&C(Object.entries(H.env).map(([ue,we],Ze)=>({id:`env-${Ze}`,key:ue,value:we})))}catch(H){console.error("Failed to load settings:",H),c("Failed to load settings. Please ensure ~/.claude directory exists."),s({})}finally{a(!1)}},E=async()=>{try{o(!0),c(null),v(null);const H={...e,permissions:{allow:j.map(ue=>ue.value).filter(ue=>ue&&String(ue).trim()),deny:w.map(ue=>ue.value).filter(ue=>ue&&String(ue).trim())},env:N.reduce((ue,{key:we,value:Ze})=>(we&&String(we).trim()&&Ze&&String(Ze).trim()&&(ue[we]=String(Ze)),ue),{})};if(await X.saveClaudeSettings(H),s(H),x&&p&&(await X.setClaudeBinaryPath(p.path),m(p.path),b(!1)),P&&B.current){const ue=B.current();await X.updateHooksConfig("user",ue),O(!1)}re&&F.current&&(await F.current(),A(!1)),v({message:"Settings saved successfully!",type:"success"})}catch(H){console.error("Failed to save settings:",H),c("Failed to save settings."),v({message:"Failed to save settings",type:"error"})}finally{o(!1)}},q=(H,ue)=>{s(we=>({...we,[H]:ue}))},ie=H=>{const ue={id:`${H}-${Date.now()}`,value:""};H==="allow"?S(we=>[...we,ue]):_(we=>[...we,ue])},je=(H,ue,we)=>{H==="allow"?S(Ze=>Ze.map(kt=>kt.id===ue?{...kt,value:we}:kt)):_(Ze=>Ze.map(kt=>kt.id===ue?{...kt,value:we}:kt))},Ce=(H,ue)=>{H==="allow"?S(we=>we.filter(Ze=>Ze.id!==ue)):_(we=>we.filter(Ze=>Ze.id!==ue))},ut=()=>{const H={id:`env-${Date.now()}`,key:"",value:""};C(ue=>[...ue,H])},rs=(H,ue,we)=>{C(Ze=>Ze.map(kt=>kt.id===H?{...kt,[ue]:we}:kt))},Vs=H=>{C(ue=>ue.filter(we=>we.id!==H))},ys=H=>{g(H),b(H.path!==h)};return n.jsxs("div",{className:V("h-full overflow-y-auto",t),children:[n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:"Settings"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:"Configure Claude Code preferences"})]}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{onClick:E,disabled:i||r,size:"default",children:i?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fn,{className:"mr-2 h-4 w-4"}),"Save Settings"]})})})]})}),n.jsx(Te,{children:l&&n.jsxs(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.15},className:"mx-4 mt-4 p-3 rounded-lg bg-destructive/10 border border-destructive/50 flex items-center gap-2 text-body-small text-destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),l]})}),r?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs(Ds,{value:d,onValueChange:u,className:"w-full",children:[n.jsxs(xs,{className:"grid grid-cols-8 w-full mb-6 h-auto p-1",children:[n.jsx(Ne,{value:"general",className:"py-2.5 px-3",children:"General"}),n.jsx(Ne,{value:"permissions",className:"py-2.5 px-3",children:"Permissions"}),n.jsx(Ne,{value:"environment",className:"py-2.5 px-3",children:"Environment"}),n.jsx(Ne,{value:"advanced",className:"py-2.5 px-3",children:"Advanced"}),n.jsx(Ne,{value:"hooks",className:"py-2.5 px-3",children:"Hooks"}),n.jsx(Ne,{value:"commands",className:"py-2.5 px-3",children:"Commands"}),n.jsx(Ne,{value:"storage",className:"py-2.5 px-3",children:"Storage"}),n.jsx(Ne,{value:"proxy",className:"py-2.5 px-3",children:"Proxy"})]}),n.jsx(ke,{value:"general",className:"space-y-6 mt-6",children:n.jsx(se,{className:"p-6 space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-heading-4 mb-4",children:"General Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(ce,{children:"Theme"}),n.jsx("p",{className:"text-caption text-muted-foreground mt-1",children:"Choose your preferred color theme"})]}),n.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted/30 rounded-lg",children:[n.jsxs("button",{onClick:()=>G("dark"),className:V("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-all",U==="dark"?"bg-background shadow-sm":"hover:bg-background/50"),children:[U==="dark"&&n.jsx(ds,{className:"h-3 w-3"}),"Dark"]}),n.jsxs("button",{onClick:()=>G("gray"),className:V("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-all",U==="gray"?"bg-background shadow-sm":"hover:bg-background/50"),children:[U==="gray"&&n.jsx(ds,{className:"h-3 w-3"}),"Gray"]}),n.jsxs("button",{onClick:()=>G("light"),className:V("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-all",U==="light"?"bg-background shadow-sm":"hover:bg-background/50"),children:[U==="light"&&n.jsx(ds,{className:"h-3 w-3"}),"Light"]}),n.jsxs("button",{onClick:()=>G("custom"),className:V("flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-all",U==="custom"?"bg-background shadow-sm":"hover:bg-background/50"),children:[U==="custom"&&n.jsx(ds,{className:"h-3 w-3"}),"Custom"]})]})]}),U==="custom"&&n.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[n.jsx("h4",{className:"text-label",children:"Custom Theme Colors"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-background",className:"text-caption",children:"Background"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-background",type:"text",value:R.background,onChange:H=>z({background:H.target.value}),placeholder:"oklch(0.12 0.01 240)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.background}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-foreground",className:"text-caption",children:"Foreground"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-foreground",type:"text",value:R.foreground,onChange:H=>z({foreground:H.target.value}),placeholder:"oklch(0.98 0.01 240)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.foreground}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-primary",className:"text-caption",children:"Primary"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-primary",type:"text",value:R.primary,onChange:H=>z({primary:H.target.value}),placeholder:"oklch(0.98 0.01 240)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.primary}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-card",className:"text-caption",children:"Card"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-card",type:"text",value:R.card,onChange:H=>z({card:H.target.value}),placeholder:"oklch(0.14 0.01 240)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.card}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-accent",className:"text-caption",children:"Accent"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-accent",type:"text",value:R.accent,onChange:H=>z({accent:H.target.value}),placeholder:"oklch(0.16 0.01 240)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.accent}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"color-destructive",className:"text-caption",children:"Destructive"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{id:"color-destructive",type:"text",value:R.destructive,onChange:H=>z({destructive:H.target.value}),placeholder:"oklch(0.6 0.2 25)",className:"font-mono text-xs"}),n.jsx("div",{className:"w-10 h-10 rounded border",style:{backgroundColor:R.destructive}})]})]})]}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Use CSS color values (hex, rgb, oklch, etc.). Changes apply immediately."})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsx(ce,{htmlFor:"coauthored",children:'Include "Co-authored by Claude"'}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Add Claude attribution to git commits and pull requests"})]}),n.jsx(Ks,{id:"coauthored",checked:(e==null?void 0:e.includeCoAuthoredBy)!==!1,onCheckedChange:H=>q("includeCoAuthoredBy",H)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsx(ce,{htmlFor:"verbose",children:"Verbose Output"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Show full bash and command outputs"})]}),n.jsx(Ks,{id:"verbose",checked:(e==null?void 0:e.verbose)===!0,onCheckedChange:H=>q("verbose",H)})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(ce,{htmlFor:"cleanup",children:"Chat Transcript Retention (days)"}),n.jsx("p",{className:"text-caption text-muted-foreground mt-1",children:"How long to retain chat transcripts locally (default: 30 days)"})]}),n.jsx(xe,{id:"cleanup",type:"number",min:"1",placeholder:"30",value:(e==null?void 0:e.cleanupPeriodDays)||"",onChange:H=>{const ue=H.target.value?parseInt(H.target.value):void 0;q("cleanupPeriodDays",ue)},className:"w-24"})]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Lp,{selectedPath:h,onSelect:ys,simplified:!0}),x&&n.jsxs("p",{className:"text-caption text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[n.jsx(qe,{className:"h-3 w-3"}),"Changes will be applied when you save settings."]})]}),n.jsx("div",{className:"border-t border-border pt-4 mt-6"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ce,{htmlFor:"analytics-enabled",children:"Enable Analytics"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Help improve opcode by sharing anonymous usage data"})]}),n.jsx(Ks,{id:"analytics-enabled",checked:ee,onCheckedChange:async H=>{H?(await Q.enable(),D(!0),Z.settingsChanged("analytics_enabled",!0),v({message:"Analytics enabled",type:"success"})):(await Q.disable(),D(!1),Z.settingsChanged("analytics_enabled",!1),v({message:"Analytics disabled",type:"success"}))}})]}),ee&&n.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ei,{className:"h-4 w-4 text-primary flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-medium text-foreground",children:"Your privacy is protected"}),n.jsxs("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:[n.jsx("li",{children:" No personal information or file contents collected"}),n.jsx("li",{children:" All data is anonymous with random IDs"}),n.jsx("li",{children:" You can disable analytics at any time"})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ce,{htmlFor:"tab-persistence",children:"Remember Open Tabs"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Restore your tabs when you restart the app"})]}),n.jsx(Ks,{id:"tab-persistence",checked:me,onCheckedChange:H=>{Ss.setEnabled(H),fe(H),Z.settingsChanged("tab_persistence_enabled",H),v({message:H?"Tab persistence enabled - your tabs will be restored on restart":"Tab persistence disabled - tabs will not be saved",type:"success"})}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(ce,{htmlFor:"startup-intro",children:"Show Welcome Intro on Startup"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Display a brief welcome animation when the app launches"})]}),n.jsx(Ks,{id:"startup-intro",checked:be,onCheckedChange:async H=>{le(H);try{await X.saveSetting("startup_intro_enabled",H?"true":"false"),Z.settingsChanged("startup_intro_enabled",H),v({message:H?"Welcome intro enabled":"Welcome intro disabled",type:"success"})}catch{v({message:"Failed to update preference",type:"error"})}}})]})]})]})})}),n.jsx(ke,{value:"permissions",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-heading-4 mb-2",children:"Permission Rules"}),n.jsx("p",{className:"text-body-small text-muted-foreground mb-4",children:"Control which tools Claude Code can use without manual approval"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-label text-green-500",children:"Allow Rules"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>ie("allow"),className:"gap-2 hover:border-green-500/50 hover:text-green-500",children:[n.jsx(nt,{className:"h-3 w-3"}),"Add Rule"]})]}),n.jsx("div",{className:"space-y-2",children:j.length===0?n.jsx("p",{className:"text-xs text-muted-foreground py-2",children:"No allow rules configured. Claude will ask for approval for all tools."}):j.map(H=>n.jsxs(K.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.15},className:"flex items-center gap-2",children:[n.jsx(xe,{placeholder:"e.g., Bash(npm run test:*)",value:H.value,onChange:ue=>je("allow",H.id,ue.target.value),className:"flex-1"}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>Ce("allow",H.id),className:"h-8 w-8",children:n.jsx(Nt,{className:"h-4 w-4"})})]},H.id))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-label text-red-500",children:"Deny Rules"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>ie("deny"),className:"gap-2 hover:border-red-500/50 hover:text-red-500",children:[n.jsx(nt,{className:"h-3 w-3"}),"Add Rule"]})]}),n.jsx("div",{className:"space-y-2",children:w.length===0?n.jsx("p",{className:"text-xs text-muted-foreground py-2",children:"No deny rules configured."}):w.map(H=>n.jsxs(K.div,{initial:{opacity:0,x:-8},animate:{opacity:1,x:0},transition:{duration:.15},className:"flex items-center gap-2",children:[n.jsx(xe,{placeholder:"e.g., Bash(curl:*)",value:H.value,onChange:ue=>je("deny",H.id,ue.target.value),className:"flex-1"}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>Ce("deny",H.id),className:"h-8 w-8",children:n.jsx(Nt,{className:"h-4 w-4"})})]},H.id))})]}),n.jsxs("div",{className:"pt-2 space-y-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:n.jsx("strong",{children:"Examples:"})}),n.jsxs("ul",{className:"text-caption text-muted-foreground space-y-1 ml-4",children:[n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400",children:"Bash"})," - Allow all bash commands"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400",children:"Bash(npm run build)"})," - Allow exact command"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400",children:"Bash(npm run test:*)"})," - Allow commands with prefix"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400",children:"Read(~/.zshrc)"})," - Allow reading specific file"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400",children:"Edit(docs/**)"})," - Allow editing files in docs directory"]})]})]})]})})}),n.jsx(ke,{value:"environment",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-heading-4",children:"Environment Variables"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Environment variables applied to every Claude Code session"})]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:ut,className:"gap-2",children:[n.jsx(nt,{className:"h-3 w-3"}),"Add Variable"]})]}),n.jsx("div",{className:"space-y-3",children:N.length===0?n.jsx("p",{className:"text-xs text-muted-foreground py-2",children:"No environment variables configured."}):N.map(H=>n.jsxs(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-2",children:[n.jsx(xe,{placeholder:"KEY",value:H.key,onChange:ue=>rs(H.id,"key",ue.target.value),className:"flex-1 font-mono text-sm"}),n.jsx("span",{className:"text-muted-foreground",children:"="}),n.jsx(xe,{placeholder:"value",value:H.value,onChange:ue=>rs(H.id,"value",ue.target.value),className:"flex-1 font-mono text-sm"}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>Vs(H.id),className:"h-8 w-8 hover:text-destructive",children:n.jsx(Nt,{className:"h-4 w-4"})})]},H.id))}),n.jsxs("div",{className:"pt-2 space-y-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:n.jsx("strong",{children:"Common variables:"})}),n.jsxs("ul",{className:"text-caption text-muted-foreground space-y-1 ml-4",children:[n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400",children:"CLAUDE_CODE_ENABLE_TELEMETRY"})," - Enable/disable telemetry (0 or 1)"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400",children:"ANTHROPIC_MODEL"})," - Custom model name"]}),n.jsxs("li",{children:[" ",n.jsx("code",{className:"px-1 py-0.5 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400",children:"DISABLE_COST_WARNINGS"})," - Disable cost warnings (1)"]})]})]})]})})}),n.jsx(ke,{value:"advanced",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold mb-4",children:"Advanced Settings"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Additional configuration options for advanced users"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"apiKeyHelper",children:"API Key Helper Script"}),n.jsx(xe,{id:"apiKeyHelper",placeholder:"/path/to/generate_api_key.sh",value:(e==null?void 0:e.apiKeyHelper)||"",onChange:H=>q("apiKeyHelper",H.target.value||void 0)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom script to generate auth values for API requests"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{children:"Raw Settings (JSON)"}),n.jsx("div",{className:"p-3 rounded-md bg-muted font-mono text-xs overflow-x-auto whitespace-pre-wrap",children:n.jsx("pre",{children:JSON.stringify(e,null,2)})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This shows the raw JSON that will be saved to ~/.claude/settings.json"})]})]})})}),n.jsx(ke,{value:"hooks",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold mb-2",children:"User Hooks"}),n.jsxs("p",{className:"text-body-small text-muted-foreground mb-4",children:["Configure hooks that apply to all Claude Code sessions for your user account. These are stored in ",n.jsx("code",{className:"mx-1 px-2 py-1 bg-muted rounded text-xs",children:"~/.claude/settings.json"})]})]}),n.jsx(Pr,{scope:"user",className:"border-0",hideActions:!0,onChange:(H,ue)=>{O(H),B.current=ue}},d)]})})}),n.jsx(ke,{value:"commands",children:n.jsx(se,{className:"p-6",children:n.jsx(Zf,{className:"p-0"})})}),n.jsx(ke,{value:"storage",children:n.jsx(k_,{})}),n.jsx(ke,{value:"proxy",children:n.jsx(se,{className:"p-6",children:n.jsx(sN,{setToast:v,onChange:(H,ue,we)=>{A(H),F.current=we}})})})]})})]}),n.jsx(gs,{children:y&&n.jsx(fs,{message:y.message,type:y.type,onDismiss:()=>v(null)})})]})},nN=Object.freeze(Object.defineProperty({__proto__:null,Settings:Qf},Symbol.toStringTag,{value:"Module"})),rN=Sg,aN=Cg,iN=f.forwardRef(({className:t,inset:e,children:s,...r},a)=>n.jsxs(ph,{ref:a,className:V("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[s,n.jsx(Ve,{className:"ml-auto h-4 w-4"})]}));iN.displayName=ph.displayName;const oN=f.forwardRef(({className:t,...e},s)=>n.jsx(fh,{ref:s,className:V("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));oN.displayName=fh.displayName;const eg=f.forwardRef(({className:t,sideOffset:e=4,...s},r)=>n.jsx(kg,{children:n.jsx(gh,{ref:r,sideOffset:e,className:V("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));eg.displayName=gh.displayName;const el=f.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(xh,{ref:r,className:V("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...s}));el.displayName=xh.displayName;const lN=f.forwardRef(({className:t,children:e,checked:s,...r},a)=>n.jsxs(vh,{ref:a,className:V("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(yh,{children:n.jsx(ds,{className:"h-4 w-4"})})}),e]}));lN.displayName=vh.displayName;const cN=f.forwardRef(({className:t,children:e,...s},r)=>n.jsxs(bh,{ref:r,className:V("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(yh,{children:n.jsx(Bl,{className:"h-2 w-2 fill-current"})})}),e]}));cN.displayName=bh.displayName;const dN=f.forwardRef(({className:t,inset:e,...s},r)=>n.jsx(jh,{ref:r,className:V("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...s}));dN.displayName=jh.displayName;const uN=f.forwardRef(({className:t,...e},s)=>n.jsx(_h,{ref:s,className:V("-mx-1 my-1 h-px bg-muted",t),...e}));uN.displayName=_h.displayName;const br={"Interface & Navigation":[{name:"home",icon:Pb},{name:"menu",icon:Yb},{name:"settings",icon:qn},{name:"user",icon:Gl},{name:"users",icon:Dj},{name:"log-out",icon:xp},{name:"bell",icon:H1},{name:"bookmark",icon:K1},{name:"calendar",icon:op},{name:"clock",icon:As},{name:"eye",icon:mp},{name:"eye-off",icon:gb},{name:"hash",icon:Za},{name:"heart",icon:Mb},{name:"info",icon:Ot},{name:"link",icon:zb},{name:"lock",icon:Hb},{name:"map",icon:Wb},{name:"message-square",icon:wa},{name:"mic",icon:Xb},{name:"music",icon:sj},{name:"paperclip",icon:aj},{name:"phone",icon:lj},{name:"pin",icon:cj},{name:"plus",icon:nt},{name:"save",icon:fn},{name:"share",icon:xj},{name:"star",icon:_j},{name:"tag",icon:Sj},{name:"trash",icon:Tj},{name:"upload",icon:Na},{name:"download",icon:an},{name:"edit",icon:Wl},{name:"copy",icon:Hl}],"Development & Tech":[{name:"bot",icon:ts},{name:"brain",icon:Y1},{name:"code",icon:Ka},{name:"terminal",icon:dt},{name:"cpu",icon:up},{name:"database",icon:hp},{name:"git-branch",icon:Dn},{name:"github",icon:fp},{name:"globe",icon:Vt},{name:"hard-drive",icon:fo},{name:"laptop",icon:Fb},{name:"monitor",icon:Qb},{name:"server",icon:_p},{name:"wifi",icon:qj},{name:"cloud",icon:rb},{name:"command",icon:Ya},{name:"file-code",icon:tn},{name:"file-json",icon:ql},{name:"folder",icon:Xa},{name:"folder-open",icon:Mt},{name:"bug",icon:X1},{name:"coffee",icon:ib}],"Business & Finance":[{name:"briefcase",icon:ip},{name:"building",icon:Z1},{name:"credit-card",icon:lb},{name:"dollar-sign",icon:mb},{name:"trending-up",icon:Pj},{name:"trending-down",icon:Aj},{name:"bar-chart",icon:cp},{name:"pie-chart",icon:tb},{name:"calculator",icon:Q1},{name:"receipt",icon:mj},{name:"wallet",icon:zj}],"Creative & Design":[{name:"palette",icon:nj},{name:"brush",icon:J1},{name:"camera",icon:eb},{name:"film",icon:yb},{name:"image",icon:Rb},{name:"layers",icon:Db},{name:"layout",icon:rj},{name:"pen-tool",icon:ij},{name:"scissors",icon:fj},{name:"type",icon:Ij},{name:"zap",icon:on},{name:"sparkles",icon:ti},{name:"wand-2",icon:Uj}],"Nature & Science":[{name:"beaker",icon:B1},{name:"atom",icon:V1},{name:"dna",icon:hb},{name:"flame",icon:wb},{name:"leaf",icon:$b},{name:"mountain",icon:tj},{name:"sun",icon:wj},{name:"moon",icon:ej},{name:"cloud-rain",icon:nb},{name:"snowflake",icon:yj},{name:"tree-pine",icon:Mj},{name:"waves",icon:Hj},{name:"wind",icon:Wj}],"Gaming & Entertainment":[{name:"gamepad-2",icon:Cb},{name:"dice-1",icon:ub},{name:"trophy",icon:Rj},{name:"medal",icon:Gb},{name:"crown",icon:db},{name:"rocket",icon:pj},{name:"target",icon:Cj},{name:"swords",icon:Nj},{name:"shield",icon:ei}],Communication:[{name:"mail",icon:qb},{name:"send",icon:gj},{name:"message-circle",icon:Jb},{name:"video",icon:Oj},{name:"voicemail",icon:Lj},{name:"radio",icon:hj},{name:"podcast",icon:dj},{name:"megaphone",icon:Kb}],Miscellaneous:[{name:"activity",icon:ap},{name:"anchor",icon:$1},{name:"award",icon:z1},{name:"battery",icon:U1},{name:"bluetooth",icon:q1},{name:"compass",icon:ob},{name:"crosshair",icon:cb},{name:"flag",icon:_b},{name:"flashlight",icon:Nb},{name:"gift",icon:Eb},{name:"headphones",icon:Tb},{name:"key",icon:Ib},{name:"lightbulb",icon:Vb},{name:"package",icon:bp},{name:"puzzle",icon:uj},{name:"search",icon:ns},{name:"smile",icon:vj},{name:"thumbs-up",icon:Ej},{name:"umbrella",icon:Fj},{name:"watch",icon:Bj},{name:"wrench",icon:xo}]},hN=({value:t,onSelect:e,isOpen:s,onClose:r})=>{const[a,i]=f.useState(""),[o,l]=f.useState(null),c=f.useMemo(()=>{if(!a.trim())return br;const h=a.toLowerCase(),m={};return Object.entries(br).forEach(([p,g])=>{const x=g.filter(({name:b})=>b.toLowerCase().includes(h));x.length>0&&(m[p]=x)}),m},[a]),d=f.useMemo(()=>Object.values(br).flat(),[]),u=h=>{e(h),r(),i("")};return n.jsx(yt,{open:s,onOpenChange:r,children:n.jsxs(mt,{className:"max-w-2xl max-h-[80vh] p-0",children:[n.jsx(bt,{className:"px-6 py-4 border-b",children:n.jsx(pt,{children:"Choose an icon"})}),n.jsx("div",{className:"px-6 py-3 border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{placeholder:"Search icons...",value:a,onChange:h=>i(h.target.value),className:"pl-10",autoFocus:!0})]})}),n.jsx("div",{className:"h-[60vh] px-6 py-4 overflow-y-auto",children:Object.keys(c).length===0?n.jsx("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:['No icons found for "',a,'"']})}):n.jsx("div",{className:"space-y-6",children:n.jsx(Te,{mode:"wait",children:Object.entries(c).map(([h,m])=>n.jsxs(K.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:h}),n.jsx("div",{className:"grid grid-cols-10 gap-2",children:m.map(p=>{const g=p.icon;return n.jsxs(K.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>u(p.name),onMouseEnter:()=>l(p.name),onMouseLeave:()=>l(null),className:V("p-2.5 rounded-lg transition-colors relative group","hover:bg-accent hover:text-accent-foreground",t===p.name&&"bg-primary/10 text-primary"),children:[n.jsx(g,{className:"h-5 w-5"}),o===p.name&&n.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-lg whitespace-nowrap z-10",children:p.name})]},p.name)})})]},h))})})}),n.jsx("div",{className:"px-6 py-3 border-t bg-muted/50",children:n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Click an icon to select  ",d.length," icons available"]})})]})})};Object.values(br).flat().map(({name:t})=>t);const In=Object.values(br).flat().reduce((t,{name:e,icon:s})=>({...t,[e]:s}),{}),tl=({agent:t,onBack:e,onAgentCreated:s,className:r})=>{const[a,i]=f.useState((t==null?void 0:t.name)||""),[o,l]=f.useState((t==null?void 0:t.icon)||"bot"),[c,d]=f.useState((t==null?void 0:t.system_prompt)||""),[u,h]=f.useState((t==null?void 0:t.default_task)||""),[m,p]=f.useState((t==null?void 0:t.model)||"sonnet"),[g,x]=f.useState(!1),[b,y]=f.useState(null),[v,j]=f.useState(null),[S,w]=f.useState(!1),_=!!t,N=async()=>{if(!a.trim()){y("Agent name is required");return}if(!c.trim()){y("System prompt is required");return}try{x(!0),y(null),_&&t.id?await X.updateAgent(t.id,a,o,c,u||void 0,m):await X.createAgent(a,o,c,u||void 0,m),s()}catch(P){console.error("Failed to save agent:",P),y(_?"Failed to update agent":"Failed to create agent"),j({message:_?"Failed to update agent":"Failed to create agent",type:"error"})}finally{x(!1)}},C=()=>{(a!==((t==null?void 0:t.name)||"")||o!==((t==null?void 0:t.icon)||"bot")||c!==((t==null?void 0:t.system_prompt)||"")||u!==((t==null?void 0:t.default_task)||"")||m!==((t==null?void 0:t.model)||"sonnet"))&&!confirm("You have unsaved changes. Are you sure you want to leave?")||e()};return n.jsxs(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.15},className:V("h-full overflow-y-auto bg-background",r),children:[n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{variant:"ghost",size:"icon",onClick:C,className:"h-9 w-9 -ml-2",title:"Back to Agents",children:n.jsx(pn,{className:"h-4 w-4"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:_?"Edit Agent":"Create New Agent"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:_?"Update your Claude Code agent configuration":"Configure a new Claude Code agent"})]})]}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{onClick:N,disabled:g||!a.trim()||!c.trim(),size:"default",children:g?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fn,{className:"mr-2 h-4 w-4"}),"Save Agent"]})})})]})}),b&&n.jsxs(K.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.15},className:"mx-6 mt-4 p-3 rounded-md bg-destructive/10 border border-destructive/50 flex items-center gap-2",children:[n.jsx(qe,{className:"h-3.5 w-3.5 text-destructive flex-shrink-0"}),n.jsx("span",{className:"text-caption text-destructive",children:b})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs(se,{className:"p-5",children:[n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsx("h3",{className:"text-heading-4",children:"Basic Information"})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"name",className:"text-caption text-muted-foreground",children:"Agent Name"}),n.jsx(xe,{id:"name",value:a,onChange:P=>i(P.target.value),placeholder:"e.g., Code Assistant",required:!0,className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{className:"text-caption text-muted-foreground",children:"Agent Icon"}),n.jsxs(K.div,{whileTap:{scale:.97},transition:{duration:.15},onClick:()=>w(!0),className:"h-9 px-3 py-2 bg-background border border-input rounded-md cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-2",children:(()=>{const P=In[o]||In.bot;return n.jsxs(n.Fragment,{children:[n.jsx(P,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:o})]})})()}),n.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})]})]})]}),n.jsxs("div",{className:"space-y-2 mt-4",children:[n.jsx(ce,{className:"text-caption text-muted-foreground",children:"Model"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsx(K.button,{type:"button",onClick:()=>p("sonnet"),whileTap:{scale:.97},transition:{duration:.15},className:V("flex-1 px-4 py-3 rounded-md border transition-all",m==="sonnet"?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 hover:bg-accent"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(on,{className:V("h-4 w-4",m==="sonnet"?"text-primary":"text-muted-foreground")}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-body-small font-medium",children:"Claude 4 Sonnet"}),n.jsx("div",{className:"text-caption text-muted-foreground",children:"Faster, efficient for most tasks"})]})]})}),n.jsx(K.button,{type:"button",onClick:()=>p("opus"),whileTap:{scale:.97},transition:{duration:.15},className:V("flex-1 px-4 py-3 rounded-md border transition-all",m==="opus"?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 hover:bg-accent"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(on,{className:V("h-4 w-4",m==="opus"?"text-primary":"text-muted-foreground")}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-body-small font-medium",children:"Claude 4 Opus"}),n.jsx("div",{className:"text-caption text-muted-foreground",children:"More capable, better for complex tasks"})]})]})})]})]})]}),n.jsxs(se,{className:"p-5",children:[n.jsx("h3",{className:"text-heading-4 mb-4",children:"Configuration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"default-task",className:"text-caption text-muted-foreground",children:"Default Task (Optional)"}),n.jsx(xe,{id:"default-task",type:"text",placeholder:"e.g., Review this code for security issues",value:u,onChange:P=>h(P.target.value),className:"h-9"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"This will be used as the default task placeholder when executing the agent"})]})]}),n.jsxs(se,{className:"p-5",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-heading-4 mb-1",children:"System Prompt"}),n.jsx("p",{className:"text-caption text-muted-foreground",children:"Define the behavior and capabilities of your Claude Code agent"})]}),n.jsx("div",{className:"rounded-md border border-border overflow-hidden","data-color-mode":"dark",children:n.jsx(ol,{value:c,onChange:P=>d(P||""),preview:"edit",height:350,visibleDragbar:!1})})]})]})})]}),n.jsx(gs,{children:v&&n.jsx(fs,{message:v.message,type:v.type,onDismiss:()=>j(null)})}),n.jsx(hN,{value:o,onSelect:P=>{l(P),w(!1)},isOpen:S,onClose:()=>w(!1)})]})},mN=Object.freeze(Object.defineProperty({__proto__:null,CreateAgent:tl},Symbol.toStringTag,{value:"Module"})),pN=({trigger:t,content:e,open:s,onOpenChange:r,className:a,align:i="center",side:o="bottom"})=>{const[l,c]=f.useState(!1),d=s!==void 0?s:l,u=r||c,h=f.useRef(null),m=f.useRef(null);f.useEffect(()=>{if(!d)return;const b=y=>{h.current&&m.current&&!h.current.contains(y.target)&&!m.current.contains(y.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[d,u]),f.useEffect(()=>{if(!d)return;const b=y=>{y.key==="Escape"&&u(!1)};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[d,u]);const p={start:"left-0",center:"left-1/2 -translate-x-1/2",end:"right-0"}[i],g=o==="top"?"bottom-full mb-2":"top-full mt-2",x=o==="top"?{initial:10,exit:10}:{initial:-10,exit:-10};return n.jsxs("div",{className:"relative inline-block",children:[n.jsx("div",{ref:h,onClick:()=>u(!d),children:t}),n.jsx(Te,{children:d&&n.jsx(K.div,{ref:m,initial:{opacity:0,scale:.95,y:x.initial},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:x.exit},transition:{duration:.15},className:V("absolute z-50 min-w-[200px] rounded-md border border-border bg-popover p-4 text-popover-foreground shadow-md",g,p,a),children:e})})]})},fN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",zu=[],Uu={allowDangerousHtml:!0},gN=/^(https?|ircs?|mailto|xmpp)$/i,xN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function sl(t){const e=vN(t),s=yN(t);return bN(e.runSync(e.parse(s),s),t)}function vN(t){const e=t.rehypePlugins||zu,s=t.remarkPlugins||zu,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Uu}:Uu;return Rg().use(Ig).use(s).use(Fg,r).use(e)}function yN(t){const e=t.children||"",s=new Dg;return typeof e=="string"&&(s.value=e),s}function bN(t,e){const s=e.allowedElements,r=e.allowElement,a=e.components,i=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||jN;for(const u of xN)Object.hasOwn(e,u.from)&&Og("Unexpected `"+u.from+"` prop, "+(u.to?"use `"+u.to+"` instead":"remove it")+" (see <"+fN+"#"+u.id+"> for more info)");return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),Lg(t,d),$g(t,{Fragment:n.Fragment,components:a,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function d(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in hi)if(Object.hasOwn(hi,p)&&Object.hasOwn(u.properties,p)){const g=u.properties[p],x=hi[p];(x===null||x.includes(u.tagName))&&(u.properties[p]=c(String(g||""),p,u))}}if(u.type==="element"){let p=s?!s.includes(u.tagName):i?i.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,m)),p&&m&&typeof h=="number")return l&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function jN(t){const e=t.indexOf(":"),s=t.indexOf("?"),r=t.indexOf("#"),a=t.indexOf("/");return e===-1||a!==-1&&e>a||s!==-1&&e>s||r!==-1&&e>r||gN.test(t.slice(0,e))?t:""}const $s=t=>{const e={dark:{base:"#e3e8f0",background:"transparent",comment:"#6b7280",punctuation:"#9ca3af",property:"#f59e0b",tag:"#8b5cf6",string:"#10b981",function:"#818cf8",keyword:"#c084fc",variable:"#a78bfa",operator:"#9ca3af"},gray:{base:"#e3e8f0",background:"transparent",comment:"#71717a",punctuation:"#a1a1aa",property:"#fbbf24",tag:"#a78bfa",string:"#34d399",function:"#93bbfc",keyword:"#d8b4fe",variable:"#c084fc",operator:"#a1a1aa"},light:{base:"#1f2937",background:"transparent",comment:"#9ca3af",punctuation:"#6b7280",property:"#dc2626",tag:"#7c3aed",string:"#059669",function:"#2563eb",keyword:"#9333ea",variable:"#8b5cf6",operator:"#6b7280"},white:{base:"#000000",background:"transparent",comment:"#6b7280",punctuation:"#374151",property:"#dc2626",tag:"#5b21b6",string:"#047857",function:"#1e40af",keyword:"#6b21a8",variable:"#6d28d9",operator:"#374151"},custom:{base:"#e3e8f0",background:"transparent",comment:"#6b7280",punctuation:"#9ca3af",property:"#f59e0b",tag:"#8b5cf6",string:"#10b981",function:"#818cf8",keyword:"#c084fc",variable:"#a78bfa",operator:"#9ca3af"}},s=e[t]||e.dark;return{'code[class*="language-"]':{color:s.base,background:s.background,textShadow:"none",fontFamily:"var(--font-mono)",fontSize:"0.875em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:s.base,background:s.background,textShadow:"none",fontFamily:"var(--font-mono)",fontSize:"0.875em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0",overflow:"auto"},':not(pre) > code[class*="language-"]':{background:"rgba(139, 92, 246, 0.1)",padding:"0.1em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:s.comment,fontStyle:"italic"},prolog:{color:s.comment},doctype:{color:s.comment},cdata:{color:s.comment},punctuation:{color:s.punctuation},namespace:{opacity:"0.7"},property:{color:s.property},tag:{color:s.tag},boolean:{color:s.property},number:{color:s.property},constant:{color:s.property},symbol:{color:s.property},deleted:{color:"#ef4444"},selector:{color:s.variable},"attr-name":{color:s.variable},string:{color:s.string},char:{color:s.string},builtin:{color:s.tag},url:{color:s.string},inserted:{color:s.string},entity:{color:s.variable,cursor:"help"},atrule:{color:s.keyword},"attr-value":{color:s.string},keyword:{color:s.keyword},function:{color:s.function},"class-name":{color:s.property},regex:{color:"#06b6d4"},important:{color:s.property,fontWeight:"bold"},variable:{color:s.variable},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},operator:{color:s.operator},script:{color:s.base},parameter:{color:s.property},method:{color:s.function},field:{color:s.property},annotation:{color:s.comment},type:{color:s.variable},module:{color:s.tag}}};$s("dark");class _N{diff(e,s,r={}){let a;typeof r=="function"?(a=r,r={}):"callback"in r&&(a=r.callback);const i=this.castInput(e,r),o=this.castInput(s,r),l=this.removeEmpty(this.tokenize(i,r)),c=this.removeEmpty(this.tokenize(o,r));return this.diffWithOptionsObj(l,c,r,a)}diffWithOptionsObj(e,s,r,a){var i;const o=v=>{if(v=this.postProcess(v,r),a){setTimeout(function(){a(v)},0);return}else return v},l=s.length,c=e.length;let d=1,u=l+c;r.maxEditLength!=null&&(u=Math.min(u,r.maxEditLength));const h=(i=r.timeout)!==null&&i!==void 0?i:1/0,m=Date.now()+h,p=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(p[0],s,e,0,r);if(p[0].oldPos+1>=c&&g+1>=l)return o(this.buildValues(p[0].lastComponent,s,e));let x=-1/0,b=1/0;const y=()=>{for(let v=Math.max(x,-d);v<=Math.min(b,d);v+=2){let j;const S=p[v-1],w=p[v+1];S&&(p[v-1]=void 0);let _=!1;if(w){const C=w.oldPos-v;_=w&&0<=C&&C<l}const N=S&&S.oldPos+1<c;if(!_&&!N){p[v]=void 0;continue}if(!N||_&&S.oldPos<w.oldPos?j=this.addToPath(w,!0,!1,0,r):j=this.addToPath(S,!1,!0,1,r),g=this.extractCommon(j,s,e,v,r),j.oldPos+1>=c&&g+1>=l)return o(this.buildValues(j.lastComponent,s,e))||!0;p[v]=j,j.oldPos+1>=c&&(b=Math.min(b,v-1)),g+1>=l&&(x=Math.max(x,v+1))}d++};if(a)(function v(){setTimeout(function(){if(d>u||Date.now()>m)return a(void 0);y()||v()},0)})();else for(;d<=u&&Date.now()<=m;){const v=y();if(v)return v}}addToPath(e,s,r,a,i){const o=e.lastComponent;return o&&!i.oneChangePerToken&&o.added===s&&o.removed===r?{oldPos:e.oldPos+a,lastComponent:{count:o.count+1,added:s,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+a,lastComponent:{count:1,added:s,removed:r,previousComponent:o}}}extractCommon(e,s,r,a,i){const o=s.length,l=r.length;let c=e.oldPos,d=c-a,u=0;for(;d+1<o&&c+1<l&&this.equals(r[c+1],s[d+1],i);)d++,c++,u++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!i.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,d}equals(e,s,r){return r.comparator?r.comparator(e,s):e===s||!!r.ignoreCase&&e.toLowerCase()===s.toLowerCase()}removeEmpty(e){const s=[];for(let r=0;r<e.length;r++)e[r]&&s.push(e[r]);return s}castInput(e,s){return e}tokenize(e,s){return Array.from(e)}join(e){return e.join("")}postProcess(e,s){return e}get useLongestToken(){return!1}buildValues(e,s,r){const a=[];let i;for(;e;)a.push(e),i=e.previousComponent,delete e.previousComponent,e=i;a.reverse();const o=a.length;let l=0,c=0,d=0;for(;l<o;l++){const u=a[l];if(u.removed)u.value=this.join(r.slice(d,d+u.count)),d+=u.count;else{if(!u.added&&this.useLongestToken){let h=s.slice(c,c+u.count);h=h.map(function(m,p){const g=r[d+p];return g.length>m.length?g:m}),u.value=this.join(h)}else u.value=this.join(s.slice(c,c+u.count));c+=u.count,u.added||(d+=u.count)}}return a}}class wN extends _N{constructor(){super(...arguments),this.tokenize=kN}equals(e,s,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!s.includes(`
`))&&(s=s.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),s.endsWith(`
`)&&(s=s.slice(0,-1))),super.equals(e,s,r)}}const NN=new wN;function tg(t,e,s){return NN.diff(t,e,s)}function kN(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));const s=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let a=0;a<r.length;a++){const i=r[a];a%2&&!e.newlineIsToken?s[s.length-1]+=i:s.push(i)}return s}const Bu=/(?:https?:\/\/)?(?:localhost|127\.0\.0\.1|0\.0\.0\.0|\[[0-9a-fA-F:]+\]|(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})(?::[0-9]+)?(?:\/[^\s]*)?/gi,Hu=/(?:https?:\/\/)?(?:localhost|127\.0\.0\.1|0\.0\.0\.0|\[::1\])(?::[0-9]+)?(?:\/[^\s]*)?/gi;function sg(t){const e=[],s=new Set;Bu.lastIndex=0;let r;for(;(r=Bu.exec(t))!==null;){const a=r[0];if(s.has(a))continue;s.add(a);let i=a;a.match(/^https?:\/\//)||(i=`${Hu.test(a)?"http":"https"}://${a}`);try{new URL(i)}catch{continue}e.push({url:a,fullUrl:i,isLocalhost:Hu.test(a),startIndex:r.index,endIndex:r.index+a.length})}return e}function SN(t,e){const s=sg(t);if(s.length===0)return[t];const r=[];let a=0;return s.forEach((i,o)=>{i.startIndex>a&&r.push(t.substring(a,i.startIndex)),r.push(n.jsx("a",{href:i.fullUrl,onClick:l=>{l.preventDefault(),e(i.fullUrl)},className:"text-primary underline hover:text-primary/80 cursor-pointer",title:i.fullUrl,children:i.url},`link-${o}`)),a=i.endIndex}),a<t.length&&r.push(t.substring(a)),r}const CN=({todos:t,result:e})=>{const s={completed:n.jsx(qt,{className:"h-4 w-4 text-green-500"}),in_progress:n.jsx(As,{className:"h-4 w-4 text-blue-500 animate-pulse"}),pending:n.jsx(Bl,{className:"h-4 w-4 text-muted-foreground"})},r={high:"bg-red-500/10 text-red-500 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",low:"bg-green-500/10 text-green-500 border-green-500/20"};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ja,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Todo List"})]}),n.jsx("div",{className:"space-y-2",children:t.map((a,i)=>n.jsxs("div",{className:V("flex items-start gap-3 p-3 rounded-lg border bg-card/50",a.status==="completed"&&"opacity-60"),children:[n.jsx("div",{className:"mt-0.5",children:s[a.status]||s.pending}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx("p",{className:V("text-sm",a.status==="completed"&&"line-through"),children:a.content}),a.priority&&n.jsx(Ee,{variant:"outline",className:V("text-xs",r[a.priority]),children:a.priority})]})]},a.id||i))})]})},EN=({path:t,result:e})=>{if(e){let s="";return typeof e.content=="string"?s=e.content:e.content&&typeof e.content=="object"&&(e.content.text?s=e.content.text:Array.isArray(e.content)?s=e.content.map(r=>typeof r=="string"?r:r.text||JSON.stringify(r)).join(`
`):s=JSON.stringify(e.content,null,2)),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(Mt,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"Directory contents for:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded",children:t})]}),s&&n.jsx(ng,{content:s})]})}return n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(Mt,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"Listing directory:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded",children:t}),!e&&n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Loading..."})]})]})},ng=({content:t})=>{const[e,s]=f.useState(new Set),a=(d=>{var p;const u=d.split(`
`),h=[];let m=[];for(const g of u){if(g.startsWith("NOTE:"))break;if(!g.trim())continue;const x=((p=g.match(/^(\s*)/))==null?void 0:p[1])||"",b=Math.floor(x.length/2),y=g.match(/^\s*-\s+(.+?)(\/$)?$/);if(!y)continue;const v=y[1],j=g.trim().endsWith("/"),S=v;m=m.slice(0,b),m.push(S),h.push({path:m.join("/"),name:S,type:j?"directory":"file",level:b})}return h})(t),i=d=>{s(u=>{const h=new Set(u);return h.has(d)?h.delete(d):h.add(d),h})},o=(d,u)=>a.filter(h=>{if(h.level!==u+1)return!1;const m=d.split("/").filter(Boolean),p=h.path.split("/").filter(Boolean);if(p.length!==m.length+1)return!1;for(let g=0;g<m.length;g++)if(m[g]!==p[g])return!1;return!0}),l=(d,u=!1)=>{const h=d.type==="directory"&&a.some(g=>g.path.startsWith(d.path+"/")&&g.level===d.level+1),m=e.has(d.path)||u,p=()=>{var x;if(d.type==="directory")return m?n.jsx(Mt,{className:"h-3.5 w-3.5 text-blue-500"}):n.jsx(Xa,{className:"h-3.5 w-3.5 text-blue-500"});switch((x=d.name.split(".").pop())==null?void 0:x.toLowerCase()){case"rs":return n.jsx(tn,{className:"h-3.5 w-3.5 text-orange-500"});case"toml":case"yaml":case"yml":case"json":return n.jsx(Ke,{className:"h-3.5 w-3.5 text-yellow-500"});case"md":return n.jsx(Ke,{className:"h-3.5 w-3.5 text-blue-400"});case"js":case"jsx":case"ts":case"tsx":return n.jsx(tn,{className:"h-3.5 w-3.5 text-yellow-400"});case"py":return n.jsx(tn,{className:"h-3.5 w-3.5 text-blue-500"});case"go":return n.jsx(tn,{className:"h-3.5 w-3.5 text-cyan-500"});case"sh":case"bash":return n.jsx(dt,{className:"h-3.5 w-3.5 text-green-500"});default:return n.jsx(Ke,{className:"h-3.5 w-3.5 text-muted-foreground"})}};return n.jsxs("div",{children:[n.jsxs("div",{className:V("flex items-center gap-2 py-1 px-2 rounded hover:bg-muted/50 transition-colors cursor-pointer",!u&&"ml-4"),onClick:()=>d.type==="directory"&&h&&i(d.path),children:[d.type==="directory"&&h&&n.jsx(Ve,{className:V("h-3 w-3 text-muted-foreground transition-transform",m&&"rotate-90")}),(!h||d.type!=="directory")&&n.jsx("div",{className:"w-3"}),p(),n.jsx("span",{className:"text-sm font-mono",children:d.name})]}),d.type==="directory"&&h&&m&&n.jsx("div",{className:"ml-2",children:o(d.path,d.level).map(g=>l(g))})]},d.path)},c=a.filter(d=>d.level===0);return n.jsx("div",{className:"rounded-lg border bg-muted/20 p-3",children:n.jsx("div",{className:"space-y-1",children:c.map(d=>l(d,!0))})})},TN=({filePath:t,result:e})=>{if(e){let s="";return typeof e.content=="string"?s=e.content:e.content&&typeof e.content=="object"&&(e.content.text?s=e.content.text:Array.isArray(e.content)?s=e.content.map(r=>typeof r=="string"?r:r.text||JSON.stringify(r)).join(`
`):s=JSON.stringify(e.content,null,2)),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(Ke,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"File content:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded flex-1 truncate",children:t})]}),s&&n.jsx(rg,{content:s,filePath:t})]})}return n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(Ke,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"Reading file:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded flex-1 truncate",children:t}),!e&&n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Loading..."})]})]})},rg=({content:t,filePath:e})=>{const[s,r]=f.useState(!1),{theme:a}=Os(),i=$s(a),o=p=>{var b;if(!p)return"text";const g=(b=p.split(".").pop())==null?void 0:b.toLowerCase();return{ts:"typescript",tsx:"tsx",js:"javascript",jsx:"jsx",py:"python",rs:"rust",go:"go",java:"java",cpp:"cpp",c:"c",cs:"csharp",php:"php",rb:"ruby",swift:"swift",kt:"kotlin",scala:"scala",sh:"bash",bash:"bash",zsh:"bash",yaml:"yaml",yml:"yaml",json:"json",xml:"xml",html:"html",css:"css",scss:"scss",sass:"sass",less:"less",sql:"sql",md:"markdown",toml:"ini",ini:"ini",dockerfile:"dockerfile",makefile:"makefile"}[g||""]||"text"},l=p=>{const g=p.split(`
`),x=[];let b=1/0;const y=g.filter(S=>S.trim()!=="");if(y.length===0)return{codeContent:p,startLineNumber:1};if(!(y.filter(S=>/^\s*\d+/.test(S)).length/y.length>.5))return{codeContent:p,startLineNumber:1};for(const S of g){const _=S.trimStart().match(/^(\d+)(.*)$/);if(_){const N=parseInt(_[1],10);b===1/0&&(b=N),x.push(_[2])}else S.trim(),x.push("")}for(;x.length>0&&x[x.length-1]==="";)x.pop();return{codeContent:x.join(`
`),startLineNumber:b===1/0?1:b}},c=o(e),{codeContent:d,startLineNumber:u}=l(t),h=t.split(`
`).filter(p=>p.trim()).length,m=h>20;return n.jsxs("div",{className:"rounded-lg overflow-hidden border bg-background w-full",children:[n.jsxs("div",{className:"px-4 py-2 border-b bg-muted/50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ke,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:e||"File content"}),m&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",h," lines)"]})]}),m&&n.jsxs("button",{onClick:()=>r(!s),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx(Ve,{className:V("h-3 w-3 transition-transform",s&&"rotate-90")}),s?"Collapse":"Expand"]})]}),(!m||s)&&n.jsx("div",{className:"relative overflow-x-auto",children:n.jsx(us,{language:c,style:i,showLineNumbers:!0,startingLineNumber:u,wrapLongLines:!1,customStyle:{margin:0,background:"transparent",lineHeight:"1.6"},codeTagProps:{style:{fontSize:"0.75rem"}},lineNumberStyle:{minWidth:"3.5rem",paddingRight:"1rem",textAlign:"right",opacity:.5},children:d})}),m&&!s&&n.jsx("div",{className:"px-4 py-3 text-xs text-muted-foreground text-center bg-muted/30",children:'Click "Expand" to view the full file'})]})},MN=({pattern:t,result:e})=>{let s="",r=!1;return e&&(r=e.is_error||!1,typeof e.content=="string"?s=e.content:e.content&&typeof e.content=="object"&&(e.content.text?s=e.content.text:Array.isArray(e.content)?s=e.content.map(a=>typeof a=="string"?a:a.text||JSON.stringify(a)).join(`
`):s=JSON.stringify(e.content,null,2))),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(ns,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"Searching for pattern:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded",children:t}),!e&&n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Searching..."})]})]}),e&&n.jsx("div",{className:V("p-3 rounded-md border text-xs font-mono whitespace-pre-wrap overflow-x-auto",r?"border-red-500/20 bg-red-500/5 text-red-400":"border-green-500/20 bg-green-500/5 text-green-300"),children:s||(r?"Search failed":"No matches found")})]})},AN=({command:t,description:e,result:s})=>{let r="",a=!1;return s&&(a=s.is_error||!1,typeof s.content=="string"?r=s.content:s.content&&typeof s.content=="object"&&(s.content.text?r=s.content.text:Array.isArray(s.content)?r=s.content.map(i=>typeof i=="string"?i:i.text||JSON.stringify(i)).join(`
`):r=JSON.stringify(s.content,null,2))),n.jsxs("div",{className:"rounded-lg border bg-background overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-2 bg-muted/50 flex items-center gap-2 border-b",children:[n.jsx(dt,{className:"h-3.5 w-3.5 text-green-500"}),n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:"Terminal"}),e&&n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:e})]}),!s&&n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Running..."})]})]}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("code",{className:"text-xs font-mono text-green-400 block",children:["$ ",t]}),s&&n.jsx("div",{className:V("mt-3 p-3 rounded-md border text-xs font-mono whitespace-pre-wrap overflow-x-auto",a?"border-red-500/20 bg-red-500/5 text-red-400":"border-green-500/20 bg-green-500/5 text-green-300"),children:r||(a?"Command failed":"Command completed")})]})]})},PN=({filePath:t,content:e,result:s})=>{const[r,a]=f.useState(!1),{theme:i}=Os(),o=$s(i),c=(p=>{var b;const g=(b=p.split(".").pop())==null?void 0:b.toLowerCase();return{ts:"typescript",tsx:"tsx",js:"javascript",jsx:"jsx",py:"python",rs:"rust",go:"go",java:"java",cpp:"cpp",c:"c",cs:"csharp",php:"php",rb:"ruby",swift:"swift",kt:"kotlin",scala:"scala",sh:"bash",bash:"bash",zsh:"bash",yaml:"yaml",yml:"yaml",json:"json",xml:"xml",html:"html",css:"css",scss:"scss",sass:"sass",less:"less",sql:"sql",md:"markdown",toml:"ini",ini:"ini",dockerfile:"dockerfile",makefile:"makefile"}[g||""]||"text"})(t),d=e.length>1e3,u=d?e.substring(0,1e3)+`
...`:e,h=()=>r?wh.createPortal(n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>a(!1)}),n.jsxs("div",{className:"relative w-[90vw] h-[90vh] max-w-7xl bg-background rounded-lg border shadow-2xl overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b bg-background flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:t})]}),n.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>a(!1),children:n.jsx(Ut,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx(us,{language:c,style:o,customStyle:{margin:0,padding:"1.5rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5",height:"100%"},showLineNumbers:!0,children:e})})]})]}),document.body):null,m=({codeContent:p,truncated:g})=>n.jsxs("div",{className:"rounded-lg border bg-background overflow-hidden w-full",style:{height:g?"440px":"auto",maxHeight:g?"440px":void 0,display:"flex",flexDirection:"column"},children:[n.jsxs("div",{className:"px-4 py-2 border-b bg-background flex items-center justify-between sticky top-0 z-10",children:[n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:"Preview"}),d&&g&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ee,{variant:"outline",className:"text-xs whitespace-nowrap",children:"Truncated to 1000 chars"}),n.jsx(L,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>a(!0),children:n.jsx(vp,{className:"h-3 w-3"})})]})]}),n.jsx("div",{className:"overflow-auto flex-1",children:n.jsx(us,{language:c,style:o,customStyle:{margin:0,padding:"1rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5",overflowX:"auto"},wrapLongLines:!1,children:p})})]});return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[n.jsx(Ja,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm",children:"Writing to file:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded flex-1 truncate",children:t})]}),n.jsx(m,{codeContent:u,truncated:!0}),n.jsx(h,{})]})},RN=({pattern:t,include:e,path:s,exclude:r,result:a})=>{const[i,o]=f.useState(!0);let l="",c=!1;a&&(c=a.is_error||!1,typeof a.content=="string"?l=a.content:a.content&&typeof a.content=="object"&&(a.content.text?l=a.content.text:Array.isArray(a.content)?l=a.content.map(h=>typeof h=="string"?h:h.text||JSON.stringify(h)).join(`
`):l=JSON.stringify(a.content,null,2)));const u=a&&!c?(h=>{const m=h.split(`
`).filter(g=>g.trim()),p=[];return m.forEach(g=>{const x=g.match(/^(.+?):(\d+):(.*)$/);x&&p.push({file:x[1],lineNumber:parseInt(x[2],10),content:x[3]})}),p})(l):[];return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20",children:[n.jsx(ns,{className:"h-4 w-4 text-emerald-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Searching with grep"}),!a&&n.jsxs("div",{className:"ml-auto flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Searching..."})]})]}),n.jsx("div",{className:"rounded-lg border bg-muted/20 p-3 space-y-2",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-[80px]",children:[n.jsx(Ka,{className:"h-3 w-3 text-emerald-500"}),n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Pattern"})]}),n.jsx("code",{className:"flex-1 font-mono text-sm bg-emerald-500/10 border border-emerald-500/20 px-3 py-1.5 rounded-md text-emerald-600 dark:text-emerald-400",children:t})]}),s&&n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-[80px]",children:[n.jsx(Mt,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Path"})]}),n.jsx("code",{className:"flex-1 font-mono text-xs bg-muted px-2 py-1 rounded truncate",children:s})]}),(e||r)&&n.jsxs("div",{className:"flex gap-4",children:[e&&n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(pp,{className:"h-3 w-3 text-green-500"}),n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Include"})]}),n.jsx("code",{className:"font-mono text-xs bg-green-500/10 border border-green-500/20 px-2 py-0.5 rounded text-green-600 dark:text-green-400",children:e})]}),r&&n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ut,{className:"h-3 w-3 text-red-500"}),n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Exclude"})]}),n.jsx("code",{className:"font-mono text-xs bg-red-500/10 border border-red-500/20 px-2 py-0.5 rounded text-red-600 dark:text-red-400",children:r})]})]})]})}),a&&n.jsx("div",{className:"space-y-2",children:c?n.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-red-500/10 border border-red-500/20",children:[n.jsx(qe,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:l||"Search failed"})]}):u.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:[i?n.jsx(gt,{className:"h-3.5 w-3.5"}):n.jsx(Ve,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[u.length," matches found"]})]}),i&&n.jsx("div",{className:"rounded-lg border bg-background overflow-hidden",children:n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:u.map((h,m)=>{const p=h.file.split("/").pop()||h.file,g=h.file.substring(0,h.file.lastIndexOf("/"));return n.jsxs("div",{className:V("flex items-start gap-3 p-3 border-b border-border hover:bg-muted/50 transition-colors",m===u.length-1&&"border-b-0"),children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-[60px]",children:[n.jsx(Ke,{className:"h-3.5 w-3.5 text-emerald-500"}),n.jsx("span",{className:"text-xs font-mono text-emerald-400",children:h.lineNumber})]}),n.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-medium text-blue-400 truncate",children:p}),g&&n.jsx("span",{className:"text-xs text-muted-foreground truncate",children:g})]}),n.jsx("code",{className:"text-xs font-mono text-zinc-300 block whitespace-pre-wrap break-all",children:h.content.trim()})]})]},m)})})})]}):n.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[n.jsx(Ot,{className:"h-5 w-5 text-amber-500 flex-shrink-0"}),n.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"No matches found for the given pattern."})]})})]})},dc=t=>{var r;const e=(r=t.split(".").pop())==null?void 0:r.toLowerCase();return{ts:"typescript",tsx:"tsx",js:"javascript",jsx:"jsx",py:"python",rs:"rust",go:"go",java:"java",cpp:"cpp",c:"c",cs:"csharp",php:"php",rb:"ruby",swift:"swift",kt:"kotlin",scala:"scala",sh:"bash",bash:"bash",zsh:"bash",yaml:"yaml",yml:"yaml",json:"json",xml:"xml",html:"html",css:"css",scss:"scss",sass:"sass",less:"less",sql:"sql",md:"markdown",toml:"ini",ini:"ini",dockerfile:"dockerfile",makefile:"makefile"}[e||""]||"text"},IN=({file_path:t,old_string:e,new_string:s,result:r})=>{const{theme:a}=Os(),i=$s(a),o=tg(e||"",s||"",{newlineIsToken:!0,ignoreWhitespace:!1}),l=dc(t);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Applying Edit to:"}),n.jsx("code",{className:"text-sm font-mono bg-background px-2 py-0.5 rounded flex-1 truncate",children:t})]}),n.jsx("div",{className:"rounded-lg border bg-background overflow-hidden text-xs font-mono",children:n.jsx("div",{className:"max-h-[440px] overflow-y-auto overflow-x-auto",children:o.map((c,d)=>{const u=c.added?"bg-green-950/20":c.removed?"bg-red-950/20":"";if(!c.added&&!c.removed&&c.count&&c.count>8)return n.jsxs("div",{className:"px-4 py-1 bg-muted border-y border-border text-center text-muted-foreground text-xs",children:["... ",c.count," unchanged lines ..."]},d);const h=c.value.endsWith(`
`)?c.value.slice(0,-1):c.value;return n.jsxs("div",{className:V(u,"flex"),children:[n.jsx("div",{className:"w-8 select-none text-center flex-shrink-0",children:c.added?n.jsx("span",{className:"text-green-400",children:"+"}):c.removed?n.jsx("span",{className:"text-red-400",children:"-"}):null}),n.jsx("div",{className:"flex-1",children:n.jsx(us,{language:l,style:i,PreTag:"div",wrapLongLines:!1,customStyle:{margin:0,padding:0,background:"transparent"},codeTagProps:{style:{fontSize:"0.75rem",lineHeight:"1.6"}},children:h})})]},d)})})})]})},FN=({content:t})=>{const{theme:e}=Os(),s=$s(e),r=t.split(`
`);let a="";const i=[];let o=!1;for(const h of r){const m=h.replace(/\r$/,"");if(m.includes("The file")&&m.includes("has been updated")){const p=m.match(/The file (.+) has been updated/);p&&(a=p[1])}else if(/^\s*\d+/.test(m)){o=!0;const p=m.match(/^\s*(\d+)\t?(.*)$/);if(p){const[,g,x]=p;i.push({lineNumber:g,code:x})}}else o&&i.push({lineNumber:"",code:m})}const l=i.map(h=>h.code).join(`
`),c=i.find(h=>h.lineNumber!==""),d=c?parseInt(c.lineNumber):1,u=dc(a);return n.jsxs("div",{className:"rounded-lg border bg-background overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-2 border-b bg-emerald-950/30 flex items-center gap-2",children:[n.jsx(Dn,{className:"h-3.5 w-3.5 text-emerald-500"}),n.jsx("span",{className:"text-xs font-mono text-emerald-400",children:"Edit Result"}),a&&n.jsxs(n.Fragment,{children:[n.jsx(Ve,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:a})]})]}),n.jsx("div",{className:"overflow-x-auto max-h-[440px]",children:n.jsx(us,{language:u,style:s,showLineNumbers:!0,startingLineNumber:d,wrapLongLines:!1,customStyle:{margin:0,background:"transparent",lineHeight:"1.6"},codeTagProps:{style:{fontSize:"0.75rem"}},lineNumberStyle:{minWidth:"3.5rem",paddingRight:"1rem",textAlign:"right",opacity:.5},children:l})})]})},DN=({toolName:t,input:e,result:s})=>{const[r,a]=f.useState(!1),{theme:i}=Os(),o=$s(i),l=t.split("__"),c=l[1]||"",d=l[2]||"",u=y=>y.replace(/-/g," ").replace(/_/g," ").split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),h=y=>y.replace(/_/g," ").split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),m=e&&Object.keys(e).length>0,p=m?JSON.stringify(e,null,2):"",g=p.length>200,b=m?(y=>Math.ceil(y.length/4))(p):0;return n.jsxs("div",{className:"rounded-lg border border-violet-500/20 bg-gradient-to-br from-violet-500/5 to-purple-500/5 overflow-hidden",children:[n.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-violet-500/10 to-purple-500/10 border-b border-violet-500/20",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(yp,{className:"h-4 w-4 text-violet-500"}),n.jsx(ti,{className:"h-2.5 w-2.5 text-violet-400 absolute -top-1 -right-1"})]}),n.jsx("span",{className:"text-sm font-medium text-violet-600 dark:text-violet-400",children:"MCP Tool"})]}),m&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ee,{variant:"outline",className:"text-xs border-violet-500/30 text-violet-600 dark:text-violet-400",children:["~",b," tokens"]}),g&&n.jsx("button",{onClick:()=>a(!r),className:"text-violet-500 hover:text-violet-600 transition-colors",children:r?n.jsx(Ga,{className:"h-3.5 w-3.5"}):n.jsx(gt,{className:"h-3.5 w-3.5"})})]})]})}),n.jsxs("div",{className:"px-4 py-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-violet-500 font-medium",children:"MCP"}),n.jsx(Ve,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:u(c)}),n.jsx(Ve,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(on,{className:"h-3.5 w-3.5 text-violet-500"}),n.jsxs("code",{className:"text-sm font-mono font-semibold text-foreground",children:[h(d),n.jsx("span",{className:"text-muted-foreground",children:"()"})]})]})]}),m&&n.jsxs("div",{className:V("transition-all duration-200",!r&&g&&"max-h-[200px]"),children:[n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:V("rounded-lg border bg-background/50 overflow-hidden",!r&&g&&"max-h-[200px]"),children:[n.jsxs("div",{className:"px-3 py-2 border-b bg-muted/50 flex items-center gap-2",children:[n.jsx(Ka,{className:"h-3 w-3 text-violet-500"}),n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:"Parameters"})]}),n.jsx("div",{className:V("overflow-auto",!r&&g&&"max-h-[150px]"),children:n.jsx(us,{language:"json",style:o,customStyle:{margin:0,padding:"0.75rem",background:"transparent",fontSize:"0.75rem",lineHeight:"1.5"},wrapLongLines:!1,children:p})})]}),!r&&g&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-background/80 to-transparent pointer-events-none"})]}),!r&&g&&n.jsx("div",{className:"text-center mt-2",children:n.jsxs("button",{onClick:()=>a(!0),className:"text-xs text-violet-500 hover:text-violet-600 transition-colors inline-flex items-center gap-1",children:[n.jsx(gt,{className:"h-3 w-3"}),"Show full parameters"]})})]}),!m&&n.jsx("div",{className:"text-xs text-muted-foreground italic px-2",children:"No parameters required"})]})]})},ON=({commandName:t,commandMessage:e,commandArgs:s})=>n.jsxs("div",{className:"rounded-lg border bg-background/50 overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-2 border-b bg-muted/50 flex items-center gap-2",children:[n.jsx(dt,{className:"h-3.5 w-3.5 text-blue-500"}),n.jsx("span",{className:"text-xs font-mono text-blue-400",children:"Command"})]}),n.jsxs("div",{className:"p-3 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"$"}),n.jsx("code",{className:"text-sm font-mono text-foreground",children:t}),s&&n.jsx("code",{className:"text-sm font-mono text-muted-foreground",children:s})]}),e&&e!==t&&n.jsx("div",{className:"text-xs text-muted-foreground ml-4",children:e})]})]}),LN=({output:t,onLinkDetected:e})=>{He.useEffect(()=>{if(t&&e){const r=sg(t);r.length>0&&e(r[0].fullUrl)}},[t,e]);const s=r=>{const a=r.split(/(\u001b\[\d+m)/);let i=!1;const o=[];return a.forEach((l,c)=>{if(l==="\x1B[1m"){i=!0;return}else if(l==="\x1B[22m"){i=!1;return}else if(l.match(/\u001b\[\d+m/))return;if(!l)return;const d=SN(l,u=>{e==null||e(u)});i?o.push(n.jsx("span",{className:"font-bold",children:d},c)):o.push(...d)}),o};return n.jsxs("div",{className:"rounded-lg border bg-background/50 overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-2 bg-muted/50 flex items-center gap-2",children:[n.jsx(Ve,{className:"h-3 w-3 text-green-500"}),n.jsx("span",{className:"text-xs font-mono text-green-400",children:"Output"})]}),n.jsx("div",{className:"p-3",children:n.jsx("pre",{className:"text-sm font-mono text-zinc-300 whitespace-pre-wrap",children:t?s(t):n.jsx("span",{className:"text-zinc-500 italic",children:"No output"})})})]})},$N=({summary:t,leafUuid:e})=>n.jsx("div",{className:"rounded-lg border border-blue-500/20 bg-blue-500/5 overflow-hidden",children:n.jsxs("div",{className:"px-4 py-3 flex items-start gap-3",children:[n.jsx("div",{className:"mt-0.5",children:n.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500/10 flex items-center justify-center",children:n.jsx(Ot,{className:"h-4 w-4 text-blue-500"})})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx("div",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:"AI Summary"}),n.jsx("p",{className:"text-sm text-foreground",children:t}),e&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["ID: ",n.jsxs("code",{className:"font-mono",children:[e.slice(0,8),"..."]})]})]})]})}),VN=({file_path:t,edits:e,result:s})=>{const[r,a]=f.useState(!1),i=dc(t),{theme:o}=Os(),l=$s(o);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"Using tool: MultiEdit"})]}),n.jsxs("div",{className:"ml-6 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ke,{className:"h-3 w-3 text-blue-500"}),n.jsx("code",{className:"text-xs font-mono text-blue-500",children:t})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx(Ve,{className:V("h-3 w-3 transition-transform",r&&"rotate-90")}),e.length," edit",e.length!==1?"s":""]}),r&&n.jsx("div",{className:"space-y-3 mt-3",children:e.map((c,d)=>{const u=tg(c.old_string||"",c.new_string||"",{newlineIsToken:!0,ignoreWhitespace:!1});return n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs font-medium text-muted-foreground",children:["Edit ",d+1]}),n.jsx("div",{className:"rounded-lg border bg-background overflow-hidden text-xs font-mono",children:n.jsx("div",{className:"max-h-[300px] overflow-y-auto overflow-x-auto",children:u.map((h,m)=>{const p=h.added?"bg-green-950/20":h.removed?"bg-red-950/20":"";if(!h.added&&!h.removed&&h.count&&h.count>8)return n.jsxs("div",{className:"px-4 py-1 bg-muted border-y border-border text-center text-muted-foreground text-xs",children:["... ",h.count," unchanged lines ..."]},m);const g=h.value.endsWith(`
`)?h.value.slice(0,-1):h.value;return n.jsxs("div",{className:V(p,"flex"),children:[n.jsx("div",{className:"w-8 select-none text-center flex-shrink-0",children:h.added?n.jsx("span",{className:"text-green-400",children:"+"}):h.removed?n.jsx("span",{className:"text-red-400",children:"-"}):null}),n.jsx("div",{className:"flex-1",children:n.jsx(us,{language:i,style:l,PreTag:"div",wrapLongLines:!1,customStyle:{margin:0,padding:0,background:"transparent"},codeTagProps:{style:{fontSize:"0.75rem",lineHeight:"1.6"}},children:g})})]},m)})})})]},d)})})]})]})]})},zN=({content:t,edits:e})=>e&&e.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-500/10 rounded-t-md border-b border-green-500/20",children:[n.jsx(Dn,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[e.length," Changes Applied"]})]}),n.jsx("div",{className:"space-y-4",children:e.map((s,r)=>{const a=s.old_string.split(`
`),i=s.new_string.split(`
`);return n.jsxs("div",{className:"border border-border/50 rounded-md overflow-hidden",children:[n.jsx("div",{className:"px-3 py-1 bg-muted/50 border-b border-border/50",children:n.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Change ",r+1]})}),n.jsxs("div",{className:"font-mono text-xs",children:[a.map((o,l)=>n.jsxs("div",{className:"flex bg-red-500/10 border-l-4 border-red-500",children:[n.jsxs("span",{className:"w-12 px-2 py-1 text-red-600 dark:text-red-400 select-none text-right bg-red-500/10",children:["-",l+1]}),n.jsx("pre",{className:"flex-1 px-3 py-1 text-red-700 dark:text-red-300 overflow-x-auto",children:n.jsx("code",{children:o||" "})})]},`old-${l}`)),i.map((o,l)=>n.jsxs("div",{className:"flex bg-green-500/10 border-l-4 border-green-500",children:[n.jsxs("span",{className:"w-12 px-2 py-1 text-green-600 dark:text-green-400 select-none text-right bg-green-500/10",children:["+",l+1]}),n.jsx("pre",{className:"flex-1 px-3 py-1 text-green-700 dark:text-green-300 overflow-x-auto",children:n.jsx("code",{children:o||" "})})]},`new-${l}`))]})]},r)})})]}):n.jsx("div",{className:"p-3 bg-muted/50 rounded-md border",children:n.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:t})}),UN=({message:t})=>{let e=n.jsx(Ot,{className:"h-4 w-4"}),s="border-blue-500/20 bg-blue-500/5 text-blue-600";return t.toLowerCase().includes("warning")?(e=n.jsx(qe,{className:"h-4 w-4"}),s="border-yellow-500/20 bg-yellow-500/5 text-yellow-600"):t.toLowerCase().includes("error")&&(e=n.jsx(qe,{className:"h-4 w-4"}),s="border-destructive/20 bg-destructive/5 text-destructive"),n.jsxs("div",{className:V("flex items-start gap-2 p-3 rounded-md border",s),children:[n.jsx("div",{className:"mt-0.5",children:e}),n.jsx("div",{className:"flex-1 text-sm",children:t})]})},BN=({sessionId:t,model:e,cwd:s,tools:r=[]})=>{const[a,i]=f.useState(!1),o=r.filter(m=>!m.startsWith("mcp__")),l=r.filter(m=>m.startsWith("mcp__")),c={task:bj,bash:dt,glob:Sb,grep:ns,ls:Bb,exit_plan_mode:xp,read:Ke,edit:go,multiedit:go,write:pp,notebookread:G1,notebookedit:W1,webfetch:Vt,todoread:gp,todowrite:Ub,websearch:po},d=m=>{const p=m.toLowerCase();return c[p]||xo},u=m=>{const p=m.replace(/^mcp__/,""),g=p.split("__");if(g.length>=2){const x=g[0].replace(/_/g," ").replace(/-/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),b=g.slice(1).join("__").replace(/_/g," ").split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ");return{provider:x,method:b}}return{provider:"MCP",method:p.replace(/_/g," ").split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")}},h=l.reduce((m,p)=>{const{provider:g}=u(p);return m[g]||(m[g]=[]),m[g].push(p),m},{});return n.jsx(se,{className:"border-blue-500/20 bg-blue-500/5",children:n.jsx(Ct,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qn,{className:"h-5 w-5 text-blue-500 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsx("h4",{className:"font-semibold text-sm",children:"System Initialized"}),n.jsxs("div",{className:"space-y-2",children:[t&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(jb,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Session ID:"}),n.jsx("code",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:t})]}),e&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(up,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Model:"}),n.jsx("code",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:e})]}),s&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(Mt,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Working Directory:"}),n.jsx("code",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded break-all",children:s})]})]}),o.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xo,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Available Tools (",o.length,")"]})]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:o.map((m,p)=>{const g=d(m);return n.jsxs(Ee,{variant:"secondary",className:"text-xs py-0.5 px-2 flex items-center gap-1",children:[n.jsx(g,{className:"h-3 w-3"}),m]},p)})})]}),l.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx(bp,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:["MCP Services (",l.length,")"]}),n.jsx(gt,{className:V("h-3 w-3 transition-transform",a&&"rotate-180")})]}),a&&n.jsx("div",{className:"ml-5 space-y-3",children:Object.entries(h).map(([m,p])=>n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[n.jsx(yp,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:m}),n.jsxs("span",{className:"text-muted-foreground/60",children:["(",p.length,")"]})]}),n.jsx("div",{className:"ml-4 flex flex-wrap gap-1",children:p.map((g,x)=>{const{method:b}=u(g);return n.jsx(Ee,{variant:"outline",className:"text-xs py-0 px-1.5 font-normal",children:b},x)})})]},m))})]}),r.length===0&&n.jsx("div",{className:"text-xs text-muted-foreground italic",children:"No tools available"})]})]})})})},HN=({description:t,prompt:e,result:s})=>{const[r,a]=f.useState(!1);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ts,{className:"h-4 w-4 text-purple-500"}),n.jsx(ti,{className:"h-2.5 w-2.5 text-purple-400 absolute -top-1 -right-1"})]}),n.jsx("span",{className:"text-sm font-medium",children:"Spawning Sub-Agent Task"})]}),n.jsxs("div",{className:"ml-6 space-y-3",children:[t&&n.jsxs("div",{className:"rounded-lg border border-purple-500/20 bg-purple-500/5 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(on,{className:"h-3.5 w-3.5 text-purple-500"}),n.jsx("span",{className:"text-xs font-medium text-purple-600 dark:text-purple-400",children:"Task Description"})]}),n.jsx("p",{className:"text-sm text-foreground ml-5",children:t})]}),e&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx(Ve,{className:V("h-3 w-3 transition-transform",r&&"rotate-90")}),n.jsx("span",{children:"Task Instructions"})]}),r&&n.jsx("div",{className:"rounded-lg border bg-muted/30 p-3",children:n.jsx("pre",{className:"text-xs font-mono text-muted-foreground whitespace-pre-wrap",children:e})})]})]})]})},qN=({query:t,result:e})=>{const[s,r]=f.useState(new Set),a=c=>{const d=[],u=c.split(/Links:\s*\[/);return u[0]&&d.push({type:"text",content:u[0].trim()}),u.slice(1).forEach(h=>{try{const m=h.indexOf("]");if(m===-1)return;const p="["+h.substring(0,m+1),g=h.substring(m+1).trim(),x=JSON.parse(p);d.push({type:"links",content:x}),g&&d.push({type:"text",content:g})}catch{d.push({type:"text",content:"Links: ["+h})}}),d},i=c=>{const d=new Set(s);d.has(c)?d.delete(c):d.add(c),r(d)};let o={sections:[],noResults:!1};if(e){let c="";typeof e.content=="string"?c=e.content:e.content&&typeof e.content=="object"&&(e.content.text?c=e.content.text:Array.isArray(e.content)?c=e.content.map(d=>typeof d=="string"?d:d.text||JSON.stringify(d)).join(`
`):c=JSON.stringify(e.content,null,2)),o.noResults=c.toLowerCase().includes("no links found")||c.toLowerCase().includes("no results"),o.sections=a(c)}const l=async c=>{try{await il(c)}catch(d){console.error("Failed to open URL:",d)}};return n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-500/5 border border-blue-500/10",children:[n.jsx(Vt,{className:"h-4 w-4 text-blue-500/70"}),n.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-blue-600/70 dark:text-blue-400/70",children:"Web Search"}),n.jsx("span",{className:"text-sm text-muted-foreground/80 flex-1 truncate",children:t})]}),e&&n.jsx("div",{className:"rounded-lg border bg-background/50 backdrop-blur-sm overflow-hidden",children:o.sections.length?o.noResults?n.jsx("div",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"No results found"})]})}):n.jsx("div",{className:"p-3 space-y-3",children:o.sections.map((c,d)=>{if(c.type==="text")return n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(sl,{children:c.content})},d);if(c.type==="links"&&Array.isArray(c.content)){const u=c.content,h=s.has(d);return n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("button",{onClick:()=>i(d),className:"flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[h?n.jsx(gt,{className:"h-3 w-3"}):n.jsx(Ve,{className:"h-3 w-3"}),n.jsxs("span",{children:[u.length," result",u.length!==1?"s":""]})]}),h?n.jsx("div",{className:"grid gap-1.5 ml-4",children:u.map((m,p)=>n.jsx("button",{onClick:()=>l(m.url),className:"group flex flex-col gap-0.5 p-2.5 rounded-md border bg-card/30 hover:bg-card/50 hover:border-blue-500/30 transition-all text-left",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(po,{className:"h-3.5 w-3.5 text-blue-500/70 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-sm font-medium group-hover:text-blue-500 transition-colors line-clamp-2",children:m.title}),n.jsx("div",{className:"text-xs text-muted-foreground mt-0.5 truncate",children:m.url})]})]})},p))}):n.jsx("div",{className:"flex flex-wrap gap-1.5 ml-4",children:u.map((m,p)=>n.jsxs("button",{onClick:g=>{g.stopPropagation(),l(m.url)},className:"group inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-500/5 hover:bg-blue-500/10 border border-blue-500/10 hover:border-blue-500/20 transition-all",children:[n.jsx(po,{className:"h-3 w-3 text-blue-500/70"}),n.jsx("span",{className:"truncate max-w-[180px] text-foreground/70 group-hover:text-foreground/90",children:m.title})]},p))})]},d)}return null})}):n.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 text-muted-foreground",children:[n.jsxs("div",{className:"animate-pulse flex items-center gap-1",children:[n.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),n.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),n.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full animate-bounce"})]}),n.jsx("span",{className:"text-sm",children:"Searching..."})]})})]})},WN=({thinking:t})=>{const[e,s]=f.useState(!1),r=t.trim();return n.jsxs("div",{className:"rounded-lg border border-gray-500/20 bg-gray-500/5 overflow-hidden",children:[n.jsxs("button",{onClick:()=>s(!e),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-500/10 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ts,{className:"h-4 w-4 text-gray-500"}),n.jsx(ti,{className:"h-2.5 w-2.5 text-gray-400 absolute -top-1 -right-1 animate-pulse"})]}),n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 italic",children:"Thinking..."})]}),n.jsx(Ve,{className:V("h-4 w-4 text-gray-500 transition-transform",e&&"rotate-90")})]}),e&&n.jsx("div",{className:"px-4 pb-4 pt-2 border-t border-gray-500/20",children:n.jsx("pre",{className:"text-xs font-mono text-gray-600 dark:text-gray-400 whitespace-pre-wrap bg-gray-500/5 p-3 rounded-lg italic",children:r})})]})},GN=({url:t,prompt:e,result:s})=>{const[r,a]=f.useState(!1),[i,o]=f.useState(!1);let l="",c=!s,d=!1;s&&(typeof s.content=="string"?l=s.content:s.content&&typeof s.content=="object"&&(s.content.text?l=s.content.text:Array.isArray(s.content)?l=s.content.map(x=>typeof x=="string"?x:x.text||JSON.stringify(x)).join(`
`):l=JSON.stringify(s.content,null,2)),d=s.is_error||l.toLowerCase().includes("error")||l.toLowerCase().includes("failed"));const u=500,h=l.length>u,m=h&&!i?l.substring(0,u)+"...":l,p=x=>{try{return new URL(x).hostname}catch{return x}},g=async()=>{try{await il(t)}catch(x){console.error("Failed to open URL:",x)}};return n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-purple-500/5 border border-purple-500/10",children:[n.jsx(Vt,{className:"h-4 w-4 text-purple-500/70"}),n.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-purple-600/70 dark:text-purple-400/70",children:"Fetching"}),n.jsx("button",{onClick:g,className:"text-sm text-foreground/80 hover:text-foreground flex-1 truncate text-left hover:underline decoration-purple-500/50",children:t})]}),e&&n.jsxs("div",{className:"ml-6 space-y-1",children:[n.jsxs("button",{onClick:()=>a(!r),className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx(Ve,{className:V("h-3 w-3 transition-transform",r&&"rotate-90")}),n.jsx(Ot,{className:"h-3 w-3"}),n.jsx("span",{children:"Analysis Prompt"})]}),r&&n.jsx("div",{className:"rounded-lg border bg-muted/30 p-3 ml-4",children:n.jsx("p",{className:"text-sm text-foreground/90",children:e})})]})]}),c?n.jsx("div",{className:"rounded-lg border bg-background/50 backdrop-blur-sm overflow-hidden",children:n.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 text-muted-foreground",children:[n.jsxs("div",{className:"animate-pulse flex items-center gap-1",children:[n.jsx("div",{className:"h-1 w-1 bg-purple-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),n.jsx("div",{className:"h-1 w-1 bg-purple-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),n.jsx("div",{className:"h-1 w-1 bg-purple-500 rounded-full animate-bounce"})]}),n.jsxs("span",{className:"text-sm",children:["Fetching content from ",p(t),"..."]})]})}):l?n.jsx("div",{className:"rounded-lg border bg-background/50 backdrop-blur-sm overflow-hidden",children:d?n.jsxs("div",{className:"px-3 py-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Failed to fetch content"})]}),n.jsx("pre",{className:"mt-2 text-xs font-mono text-muted-foreground whitespace-pre-wrap",children:l})]}):n.jsxs("div",{className:"p-3 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Ke,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:["Content from ",p(t)]})]}),h&&n.jsx("button",{onClick:()=>o(!i),className:"text-xs text-purple-500 hover:text-purple-600 transition-colors flex items-center gap-1",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Ga,{className:"h-3 w-3"}),"Show less"]}):n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"h-3 w-3"}),"Show full content"]})})]}),n.jsx("div",{className:"relative",children:n.jsxs("div",{className:V("rounded-lg bg-muted/30 p-3 overflow-hidden",!i&&h&&"max-h-[300px]"),children:[n.jsx("pre",{className:"text-sm font-mono text-foreground/90 whitespace-pre-wrap",children:m}),!i&&h&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-muted/30 to-transparent pointer-events-none"})]})})]})}):n.jsx("div",{className:"rounded-lg border bg-background/50 backdrop-blur-sm overflow-hidden",children:n.jsx("div",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Ot,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"No content returned"})]})})})]})},KN=({todos:t,result:e})=>{let s=t||[];if(!s.length&&e){if(typeof e=="object"&&Array.isArray(e.todos))s=e.todos;else if(typeof e.content=="string")try{const _=JSON.parse(e.content);Array.isArray(_)?s=_:_.todos&&(s=_.todos)}catch{}}const[r,a]=f.useState(""),[i,o]=f.useState("all"),[l,c]=f.useState("list"),[d,u]=f.useState(new Set),h={completed:{icon:n.jsx(qt,{className:"h-4 w-4"}),color:"text-green-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",label:"Completed"},in_progress:{icon:n.jsx(As,{className:"h-4 w-4 animate-pulse"}),color:"text-blue-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",label:"In Progress"},pending:{icon:n.jsx(Bl,{className:"h-4 w-4"}),color:"text-muted-foreground",bgColor:"bg-muted/50",borderColor:"border-muted",label:"Pending"},cancelled:{icon:n.jsx(Ut,{className:"h-4 w-4"}),color:"text-red-500",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",label:"Cancelled"}},m=s.filter(_=>{const N=!r||_.content.toLowerCase().includes(r.toLowerCase())||_.id&&_.id.toLowerCase().includes(r.toLowerCase()),C=i==="all"||_.status===i;return N&&C}),p={total:s.length,completed:s.filter(_=>_.status==="completed").length,inProgress:s.filter(_=>_.status==="in_progress").length,pending:s.filter(_=>_.status==="pending").length,cancelled:s.filter(_=>_.status==="cancelled").length,completionRate:s.length>0?Math.round(s.filter(_=>_.status==="completed").length/s.length*100):0},g={pending:m.filter(_=>_.status==="pending"),in_progress:m.filter(_=>_.status==="in_progress"),completed:m.filter(_=>_.status==="completed"),cancelled:m.filter(_=>_.status==="cancelled")},x=_=>{u(N=>{const C=new Set(N);return C.has(_)?C.delete(_):C.add(_),C})},b=()=>{const _=JSON.stringify(s,null,2),N="data:application/json;charset=utf-8,"+encodeURIComponent(_),C="todos.json",P=document.createElement("a");P.setAttribute("href",N),P.setAttribute("download",C),P.click()},y=()=>{let _=`# Todo List

`;_+=`**Total**: ${p.total} | **Completed**: ${p.completed} | **In Progress**: ${p.inProgress} | **Pending**: ${p.pending}

`,["pending","in_progress","completed","cancelled"].forEach(O=>{var U;const B=s.filter(G=>G.status===O);B.length>0&&(_+=`## ${((U=h[O])==null?void 0:U.label)||O}

`,B.forEach(G=>{var z;const R=G.status==="completed"?"[x]":"[ ]";_+=`- ${R} ${G.content}${G.id?` (${G.id})`:""}
`,((z=G.dependencies)==null?void 0:z.length)>0&&(_+=`  - Dependencies: ${G.dependencies.join(", ")}
`)}),_+=`
`)});const C="data:text/markdown;charset=utf-8,"+encodeURIComponent(_),P=document.createElement("a");P.setAttribute("href",C),P.setAttribute("download","todos.md"),P.click()},v=({todo:_,isExpanded:N})=>{var P,O;const C=h[_.status]||h.pending;return n.jsx(K.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:V("group rounded-lg border p-4 transition-all hover:shadow-md cursor-pointer",C.bgColor,C.borderColor,_.status==="completed"&&"opacity-75"),onClick:()=>_.id&&x(_.id),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:V("mt-0.5",C.color),children:C.icon}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("p",{className:V("text-sm",_.status==="completed"&&"line-through"),children:_.content}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[_.id&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Za,{className:"h-3 w-3"}),n.jsx("span",{className:"font-mono",children:_.id})]}),((P=_.dependencies)==null?void 0:P.length)>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Dn,{className:"h-3 w-3"}),n.jsxs("span",{children:[_.dependencies.length," deps"]})]})]}),n.jsx(Te,{children:N&&((O=_.dependencies)==null?void 0:O.length)>0&&n.jsx(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:n.jsxs("div",{className:"pt-2 mt-2 border-t space-y-1",children:[n.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Dependencies:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:_.dependencies.map(B=>n.jsx(Ee,{variant:"outline",className:"text-xs font-mono",children:B},B))})]})})})]})]})})},j=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs(se,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Overall Progress"}),n.jsxs("span",{className:"text-2xl font-bold text-primary",children:[p.completionRate,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-3 overflow-hidden",children:n.jsx(K.div,{initial:{width:0},animate:{width:`${p.completionRate}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary to-primary/80"})})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(h).map(([_,N])=>{const C=p[_]||0,P=p.total>0?Math.round(C/p.total*100):0;return n.jsx(se,{className:V("p-4",N.bgColor),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:N.color,children:N.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:N.label}),n.jsx("p",{className:"text-lg font-semibold",children:C}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[P,"%"]})]})]})},_)})}),n.jsxs(se,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(ap,{className:"h-4 w-4 text-primary"}),n.jsx("h4",{className:"text-sm font-medium",children:"Activity Overview"})]}),n.jsx("div",{className:"space-y-2",children:Object.entries(h).map(([_,N])=>{const C=p[_]||0,P=p.total>0?C/p.total*100:0;return n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs w-20 text-right",children:N.label}),n.jsx("div",{className:"flex-1 bg-muted rounded-full h-2 overflow-hidden",children:n.jsx(K.div,{initial:{width:0},animate:{width:`${P}%`},transition:{duration:.5,delay:.1},className:V("h-full",N.bgColor)})}),n.jsx("span",{className:"text-xs w-12 text-left",children:C})]},_)})})]})]}),S=()=>n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(g).map(([_,N])=>{const C=h[_];return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[n.jsx("div",{className:C.color,children:C.icon}),n.jsx("h3",{className:"text-sm font-medium",children:C.label}),n.jsx(Ee,{variant:"secondary",className:"ml-auto text-xs",children:N.length})]}),n.jsxs("div",{className:"space-y-2",children:[N.map(P=>n.jsx(v,{todo:P,isExpanded:d.has(P.id)},P.id||N.indexOf(P))),N.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No todos"})]})]},_)})}),w=()=>{const _=s.filter(P=>!P.dependencies||P.dependencies.length===0),N=new Set,C=(P,O=0)=>{var U;if(N.has(P.id))return null;N.add(P.id);const B=s.filter(G=>{var R;return((R=G.dependencies)==null?void 0:R.includes(P.id))&&!N.has(G.id)});return n.jsxs("div",{className:"relative",children:[O>0&&n.jsx("div",{className:"absolute left-6 top-0 w-px h-6 bg-border"}),n.jsxs("div",{className:V("flex gap-4",O>0&&"ml-12"),children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:V("w-3 h-3 rounded-full border-2 bg-background",(U=h[P.status])==null?void 0:U.borderColor)}),B.length>0&&n.jsx("div",{className:"absolute left-1/2 top-3 w-px h-full bg-border -translate-x-1/2"})]}),n.jsx("div",{className:"flex-1 pb-6",children:n.jsx(v,{todo:P,isExpanded:d.has(P.id)})})]}),B.map(G=>C(G,O+1))]},P.id)};return n.jsxs("div",{className:"space-y-4",children:[_.map(P=>C(P)),s.filter(P=>!N.has(P.id)).map(P=>C(P))]})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gp,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium",children:"Todo Overview"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.total," total  ",p.completed," completed  ",p.completionRate,"% done"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(L,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:b,children:[n.jsx(an,{className:"h-3 w-3 mr-1"}),"JSON"]}),n.jsxs(L,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:y,children:[n.jsx(an,{className:"h-3 w-3 mr-1"}),"Markdown"]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),n.jsx(xe,{type:"text",placeholder:"Search todos...",value:r,onChange:_=>a(_.target.value),className:"pl-9 h-9"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx("div",{className:"flex gap-1 p-1 bg-muted rounded-md",children:["all","pending","in_progress","completed","cancelled"].map(_=>{var N;return n.jsxs(L,{size:"sm",variant:i===_?"default":"ghost",className:"h-7 px-2 text-xs",onClick:()=>o(_),children:[_==="all"?"All":(N=h[_])==null?void 0:N.label,_==="all"&&n.jsx(Ee,{variant:"secondary",className:"ml-1 h-4 px-1 text-xs",children:p.total})]},_)})})})]}),n.jsxs(Ds,{value:l,onValueChange:_=>c(_),children:[n.jsxs(xs,{className:"grid w-full grid-cols-4",children:[n.jsxs(Ne,{value:"list",className:"text-xs",children:[n.jsx(Lb,{className:"h-4 w-4 mr-1"}),"List"]}),n.jsxs(Ne,{value:"board",className:"text-xs",children:[n.jsx(Ob,{className:"h-4 w-4 mr-1"}),"Board"]}),n.jsxs(Ne,{value:"timeline",className:"text-xs",children:[n.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Timeline"]}),n.jsxs(Ne,{value:"stats",className:"text-xs",children:[n.jsx(lp,{className:"h-4 w-4 mr-1"}),"Stats"]})]}),n.jsx(ke,{value:"list",className:"mt-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(Te,{mode:"popLayout",children:m.map(_=>n.jsx(v,{todo:_,isExpanded:d.has(_.id)},_.id||m.indexOf(_)))}),m.length===0&&n.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:r||i!=="all"?"No todos match your filters":"No todos available"})]})}),n.jsx(ke,{value:"board",className:"mt-4",children:n.jsx(S,{})}),n.jsx(ke,{value:"timeline",className:"mt-4",children:n.jsx(w,{})}),n.jsx(ke,{value:"stats",className:"mt-4",children:n.jsx(j,{})})]})]})},YN=({message:t,className:e,streamMessages:s,onLinkDetected:r})=>{var d;const[a,i]=f.useState(new Map),{theme:o}=Os(),l=$s(o);f.useEffect(()=>{const u=new Map;s.forEach(h=>{var m;h.type==="user"&&((m=h.message)!=null&&m.content)&&Array.isArray(h.message.content)&&h.message.content.forEach(p=>{p.type==="tool_result"&&p.tool_use_id&&u.set(p.tool_use_id,p)})}),i(u)},[s]);const c=u=>u&&a.get(u)||null;try{if(t.isMeta&&!t.leafUuid&&!t.summary)return null;if(t.leafUuid&&t.summary&&t.type==="summary")return n.jsx($N,{summary:t.summary,leafUuid:t.leafUuid});if(t.type==="system"&&t.subtype==="init")return n.jsx(BN,{sessionId:t.session_id,model:t.model,cwd:t.cwd,tools:t.tools});if(t.type==="assistant"&&t.message){const u=t.message;let h=!1;const m=n.jsx(se,{className:V("border-primary/20 bg-primary/5",e),children:n.jsx(Ct,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ts,{className:"h-5 w-5 text-primary mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[u.content&&Array.isArray(u.content)&&u.content.map((p,g)=>{var x,b;if(p.type==="text"){const y=typeof p.text=="string"?p.text:((x=p.text)==null?void 0:x.text)||JSON.stringify(p.text||p);return h=!0,n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(sl,{remarkPlugins:[hc],components:{code({node:v,inline:j,className:S,children:w,..._}){const N=/language-(\w+)/.exec(S||"");return!j&&N?n.jsx(us,{style:l,language:N[1],PreTag:"div",..._,children:String(w).replace(/\n$/,"")}):n.jsx("code",{className:S,..._,children:w})}},children:y})},g)}if(p.type==="thinking")return h=!0,n.jsx("div",{children:n.jsx(WN,{thinking:p.thinking||"",signature:p.signature})},g);if(p.type==="tool_use"){const y=(b=p.name)==null?void 0:b.toLowerCase(),v=p.input,j=p.id,S=c(j),_=(()=>{var N;return y==="task"&&v?(h=!0,n.jsx(HN,{description:v.description,prompt:v.prompt,result:S})):y==="edit"&&(v!=null&&v.file_path)?(h=!0,n.jsx(IN,{...v,result:S})):y==="multiedit"&&(v!=null&&v.file_path)&&(v!=null&&v.edits)?(h=!0,n.jsx(VN,{...v,result:S})):(N=p.name)!=null&&N.startsWith("mcp__")?(h=!0,n.jsx(DN,{toolName:p.name,input:v,result:S})):y==="todowrite"&&(v!=null&&v.todos)?(h=!0,n.jsx(CN,{todos:v.todos,result:S})):y==="todoread"?(h=!0,n.jsx(KN,{todos:v==null?void 0:v.todos,result:S})):y==="ls"&&(v!=null&&v.path)?(h=!0,n.jsx(EN,{path:v.path,result:S})):y==="read"&&(v!=null&&v.file_path)?(h=!0,n.jsx(TN,{filePath:v.file_path,result:S})):y==="glob"&&(v!=null&&v.pattern)?(h=!0,n.jsx(MN,{pattern:v.pattern,result:S})):y==="bash"&&(v!=null&&v.command)?(h=!0,n.jsx(AN,{command:v.command,description:v.description,result:S})):y==="write"&&(v!=null&&v.file_path)&&(v!=null&&v.content)?(h=!0,n.jsx(PN,{filePath:v.file_path,content:v.content,result:S})):y==="grep"&&(v!=null&&v.pattern)?(h=!0,n.jsx(RN,{pattern:v.pattern,include:v.include,path:v.path,exclude:v.exclude,result:S})):y==="websearch"&&(v!=null&&v.query)?(h=!0,n.jsx(qN,{query:v.query,result:S})):y==="webfetch"&&(v!=null&&v.url)?(h=!0,n.jsx(GN,{url:v.url,prompt:v.prompt,result:S})):null})();return _?(h=!0,n.jsx("div",{children:_},g)):(h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm font-medium",children:["Using tool: ",n.jsx("code",{className:"font-mono",children:p.name})]})]}),p.input&&n.jsx("div",{className:"ml-6 p-2 bg-background rounded-md border",children:n.jsx("pre",{className:"text-xs font-mono overflow-x-auto",children:JSON.stringify(p.input,null,2)})})]},g))}return null}),u.usage&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Tokens: ",u.usage.input_tokens," in, ",u.usage.output_tokens," out"]})]})]})})});return h?m:null}if(t.type==="user"){if(t.isMeta)return null;const u=t.message||t;let h=!1;const m=n.jsx(se,{className:V("border-muted-foreground/20 bg-muted/20",e),children:n.jsx(Ct,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Gl,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2 min-w-0",children:[(typeof u.content=="string"||u.content&&!Array.isArray(u.content))&&(()=>{const p=typeof u.content=="string"?u.content:String(u.content);if(p.trim()==="")return null;h=!0;const g=p.match(/<command-name>(.+?)<\/command-name>[\s\S]*?<command-message>(.+?)<\/command-message>[\s\S]*?<command-args>(.*?)<\/command-args>/);if(g){const[,b,y,v]=g;return n.jsx(ON,{commandName:b.trim(),commandMessage:y.trim(),commandArgs:v==null?void 0:v.trim()})}const x=p.match(/<local-command-stdout>([\s\S]*?)<\/local-command-stdout>/);if(x){const[,b]=x;return n.jsx(LN,{output:b,onLinkDetected:r})}return n.jsx("div",{className:"text-sm",children:p})})(),Array.isArray(u.content)&&u.content.map((p,g)=>{var x,b,y,v,j,S;if(p.type==="tool_result"){let w=!1;if(p.tool_use_id&&s)for(let U=s.length-1;U>=0;U--){const G=s[U];if(G.type==="assistant"&&((x=G.message)!=null&&x.content)&&Array.isArray(G.message.content)){const R=G.message.content.find(z=>z.type==="tool_use"&&z.id===p.tool_use_id);if(R){const z=(b=R.name)==null?void 0:b.toLowerCase();(["task","edit","multiedit","todowrite","todoread","ls","read","glob","bash","write","grep","websearch","webfetch"].includes(z)||(y=R.name)!=null&&y.startsWith("mcp__"))&&(w=!0);break}}}if(w)return null;let _="";typeof p.content=="string"?_=p.content:p.content&&typeof p.content=="object"&&(p.content.text?_=p.content.text:Array.isArray(p.content)?_=p.content.map(U=>typeof U=="string"?U:U.text||JSON.stringify(U)).join(`
`):_=JSON.stringify(p.content,null,2));const N=_.match(/<system-reminder>(.*?)<\/system-reminder>/s);if(N){const U=N[1].trim(),G=_.substring(0,N.index||0).trim(),R=_.substring((N.index||0)+N[0].length).trim();return h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Tool Result"})]}),G&&n.jsx("div",{className:"ml-6 p-2 bg-background rounded-md border",children:n.jsx("pre",{className:"text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:G})}),n.jsx("div",{className:"ml-6",children:n.jsx(UN,{message:U})}),R&&n.jsx("div",{className:"ml-6 p-2 bg-background rounded-md border",children:n.jsx("pre",{className:"text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:R})})]},g)}if(_.includes("has been updated. Here's the result of running `cat -n`"))return h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Edit Result"})]}),n.jsx(FN,{content:_})]},g);if(_.includes("has been updated with multiple edits")||_.includes("MultiEdit completed successfully")||_.includes("Applied multiple edits to"))return h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"MultiEdit Result"})]}),n.jsx(zN,{content:_})]},g);if((()=>{var re;if(!p.tool_use_id||typeof _!="string")return!1;let U=!1;if(s)for(let A=s.length-1;A>=0;A--){const F=s[A];if(F.type==="assistant"&&((re=F.message)!=null&&re.content)&&Array.isArray(F.message.content)&&F.message.content.find(D=>{var Z;return D.type==="tool_use"&&D.id===p.tool_use_id&&((Z=D.name)==null?void 0:Z.toLowerCase())==="ls"})){U=!0;break}}if(!U)return!1;const G=_.split(`
`),R=G.some(A=>/^\s*-\s+/.test(A)),z=G.some(A=>A.trim().startsWith("NOTE: do any of the files"));return R||z})())return h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Directory Contents"})]}),n.jsx(ng,{content:_})]},g);if(p.tool_use_id&&typeof _=="string"&&/^\s*\d+/.test(_)){let U;if(s)for(let G=s.length-1;G>=0;G--){const R=s[G];if(R.type==="assistant"&&((v=R.message)!=null&&v.content)&&Array.isArray(R.message.content)){const z=R.message.content.find(re=>{var A;return re.type==="tool_use"&&re.id===p.tool_use_id&&((A=re.name)==null?void 0:A.toLowerCase())==="read"});if((j=z==null?void 0:z.input)!=null&&j.file_path){U=z.input.file_path;break}}}return h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Read Result"})]}),n.jsx(rg,{content:_,filePath:U})]},g)}return!_||_.trim()===""?(h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Tool Result"})]}),n.jsx("div",{className:"ml-6 p-3 bg-muted/50 rounded-md border text-sm text-muted-foreground italic",children:"Tool did not return any output"})]},g)):(h=!0,n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[p.is_error?n.jsx(qe,{className:"h-4 w-4 text-destructive"}):n.jsx(qt,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Tool Result"})]}),n.jsx("div",{className:"ml-6 p-2 bg-background rounded-md border",children:n.jsx("pre",{className:"text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:_})})]},g))}if(p.type==="text"){const w=typeof p.text=="string"?p.text:((S=p.text)==null?void 0:S.text)||JSON.stringify(p.text);return h=!0,n.jsx("div",{className:"text-sm",children:w},g)}return null})]})]})})});return h?m:null}if(t.type==="result"){const u=t.is_error||((d=t.subtype)==null?void 0:d.includes("error"));return n.jsx(se,{className:V(u?"border-destructive/20 bg-destructive/5":"border-green-500/20 bg-green-500/5",e),children:n.jsx(Ct,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[u?n.jsx(qe,{className:"h-5 w-5 text-destructive mt-0.5"}):n.jsx(qt,{className:"h-5 w-5 text-green-500 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("h4",{className:"font-semibold text-sm",children:u?"Execution Failed":"Execution Complete"}),t.result&&n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(sl,{remarkPlugins:[hc],components:{code({node:h,inline:m,className:p,children:g,...x}){const b=/language-(\w+)/.exec(p||"");return!m&&b?n.jsx(us,{style:l,language:b[1],PreTag:"div",...x,children:String(g).replace(/\n$/,"")}):n.jsx("code",{className:p,...x,children:g})}},children:t.result})}),t.error&&n.jsx("div",{className:"text-sm text-destructive",children:t.error}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1 mt-2",children:[(t.cost_usd!==void 0||t.total_cost_usd!==void 0)&&n.jsxs("div",{children:["Cost: $",(t.cost_usd||t.total_cost_usd).toFixed(4)," USD"]}),t.duration_ms!==void 0&&n.jsxs("div",{children:["Duration: ",(t.duration_ms/1e3).toFixed(2),"s"]}),t.num_turns!==void 0&&n.jsxs("div",{children:["Turns: ",t.num_turns]}),t.usage&&n.jsxs("div",{children:["Total tokens: ",t.usage.input_tokens+t.usage.output_tokens,"(",t.usage.input_tokens," in, ",t.usage.output_tokens," out)"]})]})]})]})})})}return null}catch(u){return console.error("Error rendering stream message:",u,t),n.jsx(se,{className:V("border-destructive/20 bg-destructive/5",e),children:n.jsx(Ct,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qe,{className:"h-5 w-5 text-destructive mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:"Error rendering message"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u instanceof Error?u.message:"Unknown error"})]})]})})})}},qu=He.memo(YN),JN=({isExecuting:t,onStop:e,totalTokens:s=0,elapsedTime:r=0,className:a})=>{const i=l=>{const c=Math.floor(l/60),d=l%60;return c>0?`${c}m ${d.toFixed(0)}s`:`${d.toFixed(1)}s`},o=l=>l>=1e3?`${(l/1e3).toFixed(1)}k`:l.toString();return n.jsx(Te,{children:t&&n.jsxs(K.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:V("fixed bottom-6 left-1/2 -translate-x-1/2 z-50","bg-background/95 backdrop-blur-md border rounded-full shadow-lg","px-6 py-3 flex items-center gap-4",a),children:[n.jsx("div",{className:"relative flex items-center justify-center",children:n.jsx("div",{className:"rotating-symbol text-primary"})}),n.jsx("span",{className:"text-sm font-medium",children:"Executing..."}),n.jsx("div",{className:"h-4 w-px bg-border"}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(As,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:i(r)})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Za,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[o(s)," tokens"]})]})]}),n.jsx("div",{className:"h-4 w-px bg-border"}),n.jsxs(L,{size:"sm",variant:"destructive",onClick:e,className:"gap-2",children:[n.jsx(dp,{className:"h-3.5 w-3.5"}),"Stop"]})]})})};class nl extends f.Component{constructor(s){super(s);Qe(this,"reset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("Error caught by boundary:",s,r)}render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.reset):n.jsx("div",{className:"flex items-center justify-center min-h-[200px] p-4",children:n.jsx(se,{className:"max-w-md w-full",children:n.jsx(Ct,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(qe,{className:"h-8 w-8 text-destructive flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Something went wrong"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"An error occurred while rendering this component."}),this.state.error.message&&n.jsxs("details",{className:"mt-2",children:[n.jsx("summary",{className:"text-sm cursor-pointer text-muted-foreground hover:text-foreground",children:"Error details"}),n.jsx("pre",{className:"mt-2 text-xs bg-muted p-2 rounded overflow-auto",children:this.state.error.message})]}),n.jsx(L,{onClick:this.reset,size:"sm",className:"mt-4",children:"Try again"})]})]})})})}):this.props.children}}function jn(t,e,s){let r=s.initialDeps??[],a;function i(){var o,l,c,d;let u;s.key&&((o=s.debug)!=null&&o.call(s))&&(u=Date.now());const h=t();if(!(h.length!==r.length||h.some((g,x)=>r[x]!==g)))return a;r=h;let p;if(s.key&&((l=s.debug)!=null&&l.call(s))&&(p=Date.now()),a=e(...h),s.key&&((c=s.debug)!=null&&c.call(s))){const g=Math.round((Date.now()-u)*100)/100,x=Math.round((Date.now()-p)*100)/100,b=x/16,y=(v,j)=>{for(v=String(v);v.length<j;)v=" "+v;return v};console.info(`%c ${y(x,5)} /${y(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,s==null?void 0:s.key)}return(d=s==null?void 0:s.onChange)==null||d.call(s,a),a}return i.updateDeps=o=>{r=o},i}function Wu(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const XN=(t,e)=>Math.abs(t-e)<=1,ZN=(t,e,s)=>{let r;return function(...a){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,a),s)}},Gu=t=>{const{offsetWidth:e,offsetHeight:s}=t;return{width:e,height:s}},QN=t=>t,ek=t=>{const e=Math.max(t.startIndex-t.overscan,0),s=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let a=e;a<=s;a++)r.push(a);return r},tk=(t,e)=>{const s=t.scrollElement;if(!s)return;const r=t.targetWindow;if(!r)return;const a=o=>{const{width:l,height:c}=o;e({width:Math.round(l),height:Math.round(c)})};if(a(Gu(s)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const c=o[0];if(c!=null&&c.borderBoxSize){const d=c.borderBoxSize[0];if(d){a({width:d.inlineSize,height:d.blockSize});return}}a(Gu(s))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(s,{box:"border-box"}),()=>{i.unobserve(s)}},Ku={passive:!0},Yu=typeof window>"u"?!0:"onscrollend"in window,sk=(t,e)=>{const s=t.scrollElement;if(!s)return;const r=t.targetWindow;if(!r)return;let a=0;const i=t.options.useScrollendEvent&&Yu?()=>{}:ZN(r,()=>{e(a,!1)},t.options.isScrollingResetDelay),o=u=>()=>{const{horizontal:h,isRtl:m}=t.options;a=h?s.scrollLeft*(m&&-1||1):s.scrollTop,i(),e(a,u)},l=o(!0),c=o(!1);c(),s.addEventListener("scroll",l,Ku);const d=t.options.useScrollendEvent&&Yu;return d&&s.addEventListener("scrollend",c,Ku),()=>{s.removeEventListener("scroll",l),d&&s.removeEventListener("scrollend",c)}},nk=(t,e,s)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[s.options.horizontal?"inlineSize":"blockSize"])}return t[s.options.horizontal?"offsetWidth":"offsetHeight"]},rk=(t,{adjustments:e=0,behavior:s},r)=>{var a,i;const o=t+e;(i=(a=r.scrollElement)==null?void 0:a.scrollTo)==null||i.call(a,{[r.options.horizontal?"left":"top"]:o,behavior:s})};class ak{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const r=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(a=>{a.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var a;(a=r())==null||a.disconnect(),s=null},observe:a=>{var i;return(i=r())==null?void 0:i.observe(a,{box:"border-box"})},unobserve:a=>{var i;return(i=r())==null?void 0:i.unobserve(a)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([r,a])=>{typeof a>"u"&&delete s[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:QN,rangeExtractor:ek,onChange:()=>{},measureElement:nk,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var r,a;(a=(r=this.options).onChange)==null||a.call(r,this,s)},this.maybeNotify=jn(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,r)=>{const a=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=s[o];if(a.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&a.set(l.lane,!0),a.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=jn(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(s,r,a,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=jn(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o},l)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,c);for(let u=c;u<s;u++){const h=i(u),m=this.options.lanes===1?d[u-1]:this.getFurthestMeasurement(d,u),p=m?m.end+this.options.gap:r+a,g=l.get(h),x=typeof g=="number"?g:this.options.estimateSize(u),b=p+x,y=m?m.lane:u%this.options.lanes;d[u]={index:u,start:p,size:x,end:b,key:h,lane:y}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=jn(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,r,a,i)=>this.range=s.length>0&&r>0?ik({measurements:s,outerSize:r,scrollOffset:a,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=jn(()=>{let s=null,r=null;const a=this.calculateRange();return a&&(s=a.startIndex,r=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,r]},(s,r,a,i,o)=>i===null||o===null?[]:s({startIndex:i,endIndex:o,overscan:r,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const r=this.options.indexAttribute,a=s.getAttribute(r);return a?parseInt(a,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(s,r)=>{const a=this.indexFromElement(s),i=this.measurementsCache[a];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==s&&(l&&this.observer.unobserve(l),this.observer.observe(s),this.elementsCache.set(o,s)),s.isConnected&&this.resizeItem(a,this.options.measureElement(s,r,this))},this.resizeItem=(s,r)=>{const a=this.measurementsCache[s];if(!a)return;const i=this.itemSizeCache.get(a.key)??a.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,o,this):this.scrollDirection==="backward"&&a.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,r)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((r,a)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(a))});return}this._measureElement(s,void 0)},this.getVirtualItems=jn(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,r)=>{const a=[];for(let i=0,o=s.length;i<o;i++){const l=s[i],c=r[l];a.push(c)}return a},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const r=this.getMeasurements();if(r.length!==0)return Wu(r[ag(0,r.length-1,a=>Wu(r[a]).start,s)])},this.getOffsetForAlignment=(s,r,a=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=s>=o+i?"end":"start"),r==="center"?s+=(a-i)/2:r==="end"&&(s-=i);const l=this.getTotalSize()-i;return Math.max(Math.min(l,s),0)},this.getOffsetForIndex=(s,r="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const a=this.measurementsCache[s];if(!a)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(a.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(a.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,a.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(s,{align:r="start",behavior:a}={})=>{this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,r),{adjustments:void 0,behavior:a})},this.scrollToIndex=(s,{align:r="auto",behavior:a}={})=>{s=Math.max(0,Math.min(s,this.options.count-1)),this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(s,r);if(!i)return;const[o,l]=i;this._scrollToOffset(o,{adjustments:void 0,behavior:a}),a!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(s))){const d=this.getOffsetForIndex(s,l);if(!d)return;const[u]=d,h=this.getScrollOffset();XN(u,h)||this.scrollToIndex(s,{align:l,behavior:a})}else this.scrollToIndex(s,{align:l,behavior:a})}))},this.scrollBy=(s,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var s;const r=this.getMeasurements();let a;if(r.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((s=r[r.length-1])==null?void 0:s.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}a=Math.max(...i.filter(l=>l!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:r,behavior:a})=>{this.options.scrollToFn(s,{behavior:a,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const ag=(t,e,s,r)=>{for(;t<=e;){const a=(t+e)/2|0,i=s(a);if(i<r)t=a+1;else if(i>r)e=a-1;else return a}return t>0?t-1:0};function ik({measurements:t,outerSize:e,scrollOffset:s,lanes:r}){const a=t.length-1,i=c=>t[c].start;if(t.length<=r)return{startIndex:0,endIndex:a};let o=ag(0,a,i,s),l=o;if(r===1)for(;l<a&&t[l].end<s+e;)l++;else if(r>1){const c=Array(r).fill(0);for(;l<a&&c.some(u=>u<s+e);){const u=t[l];c[u.lane]=u.end,l++}const d=Array(r).fill(s+e);for(;o>=0&&d.some(u=>u>=s);){const u=t[o];d[u.lane]=u.start,o--}o=Math.max(0,o-o%r),l=Math.min(a,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Ju=typeof document<"u"?f.useLayoutEffect:f.useEffect;function ok(t){const e=f.useReducer(()=>({}),{})[1],s={...t,onChange:(a,i)=>{var o;i?wh.flushSync(e):e(),(o=t.onChange)==null||o.call(t,a,i)}},[r]=f.useState(()=>new ak(s));return r.setOptions(s),Ju(()=>r._didMount(),[]),Ju(()=>r._willUpdate()),r}function Xu(t){return ok({observeElementRect:tk,observeElementOffset:sk,scrollToFn:rk,...t})}const Wn=()=>{const{tabs:t,activeTabId:e,addTab:s,removeTab:r,updateTab:a,setActiveTab:i,getTabById:o,getTabsByType:l}=Cp(),c=f.useMemo(()=>e?o(e):void 0,[e,o]),d=t.length,u=f.useMemo(()=>l("chat").length,[l]),h=f.useMemo(()=>l("agent").length,[l]),m=f.useCallback((D,Z,me)=>{const fe=Z||`Chat ${u+1}`;return s({type:"chat",title:fe,sessionId:D,initialProjectPath:me,status:"idle",hasUnsavedChanges:!1,icon:"message-square"})},[s,u]),p=f.useCallback((D,Z)=>{const me=t.find(fe=>fe.agentRunId===D);return me?(i(me.id),me.id):s({type:"agent",title:Z,agentRunId:D,status:"running",hasUnsavedChanges:!1,icon:"bot"})},[s,t,i]),g=f.useCallback(()=>s({type:"projects",title:"Projects",status:"idle",hasUnsavedChanges:!1,icon:"folder"}),[s]),x=f.useCallback(()=>{const D=t.find(Z=>Z.type==="agents");return D?(i(D.id),D.id):s({type:"agents",title:"Agents",status:"idle",hasUnsavedChanges:!1,icon:"bot"})},[s,t,i]),b=f.useCallback(()=>{const D=t.find(Z=>Z.type==="usage");return D?(i(D.id),D.id):s({type:"usage",title:"Usage",status:"idle",hasUnsavedChanges:!1,icon:"bar-chart"})},[s,t,i]),y=f.useCallback(()=>{const D=t.find(Z=>Z.type==="mcp");return D?(i(D.id),D.id):s({type:"mcp",title:"MCP Servers",status:"idle",hasUnsavedChanges:!1,icon:"server"})},[s,t,i]),v=f.useCallback(()=>{const D=t.find(Z=>Z.type==="settings");return D?(i(D.id),D.id):s({type:"settings",title:"Settings",status:"idle",hasUnsavedChanges:!1,icon:"settings"})},[s,t,i]),j=f.useCallback(()=>{const D=t.find(Z=>Z.type==="claude-md");return D?(i(D.id),D.id):s({type:"claude-md",title:"CLAUDE.md",status:"idle",hasUnsavedChanges:!1,icon:"file-text"})},[s,t,i]),S=f.useCallback((D,Z)=>{const me=t.find(fe=>fe.type==="claude-file"&&fe.claudeFileId===D);return me?(i(me.id),me.id):s({type:"claude-file",title:Z,claudeFileId:D,status:"idle",hasUnsavedChanges:!1,icon:"file-text"})},[s,t,i]),w=f.useCallback((D,Z,me)=>s({type:"agent-execution",title:`Run: ${D.name}`,agentData:D,projectPath:me,status:"idle",hasUnsavedChanges:!1,icon:"bot"}),[s]),_=f.useCallback(()=>{const D=t.find(Z=>Z.type==="create-agent");return D?(i(D.id),D.id):s({type:"create-agent",title:"Create Agent",status:"idle",hasUnsavedChanges:!1,icon:"plus"})},[s,t,i]),N=f.useCallback(()=>{const D=t.find(Z=>Z.type==="import-agent");return D?(i(D.id),D.id):s({type:"import-agent",title:"Import Agent",status:"idle",hasUnsavedChanges:!1,icon:"import"})},[s,t,i]),C=f.useCallback(async(D,Z=!1)=>{const me=o(D);return me?!Z&&me.hasUnsavedChanges&&!window.confirm(`Tab "${me.title}" has unsaved changes. Close anyway?`)?!1:(r(D),!0):!0},[o,r]),P=f.useCallback(async()=>e?C(e):!0,[e,C]),O=f.useCallback(()=>{if(t.length===0)return;const Z=(t.findIndex(me=>me.id===e)+1)%t.length;i(t[Z].id)},[t,e,i]),B=f.useCallback(()=>{if(t.length===0)return;const D=t.findIndex(me=>me.id===e),Z=D===0?t.length-1:D-1;i(t[Z].id)},[t,e,i]),U=f.useCallback(D=>{D>=0&&D<t.length&&i(t[D].id)},[t,i]),G=f.useCallback((D,Z)=>{a(D,{title:Z})},[a]),R=f.useCallback((D,Z)=>{a(D,{status:Z})},[a]),z=f.useCallback((D,Z)=>{a(D,{hasUnsavedChanges:Z})},[a]),re=f.useCallback(D=>t.find(Z=>Z.type==="chat"&&Z.sessionId===D),[t]),A=f.useCallback(D=>t.find(Z=>Z.type==="agent"&&Z.agentRunId===D),[t]),F=f.useCallback(D=>t.find(Z=>Z.type===D),[t]),ee=f.useCallback(()=>t.length<20,[t.length]);return{tabs:t,activeTab:c,activeTabId:e,tabCount:d,chatTabCount:u,agentTabCount:h,createChatTab:m,createAgentTab:p,createAgentExecutionTab:w,createProjectsTab:g,createAgentsTab:x,createUsageTab:b,createMCPTab:y,createSettingsTab:v,createClaudeMdTab:j,createClaudeFileTab:S,createCreateAgentTab:_,createImportAgentTab:N,closeTab:C,closeCurrentTab:P,switchToTab:i,switchToNextTab:O,switchToPreviousTab:B,switchToTabByIndex:U,updateTab:a,updateTabTitle:G,updateTabStatus:R,markTabAsChanged:z,findTabBySessionId:re,findTabByAgentRunId:A,findTabByType:F,canAddTab:ee}},ig=({agent:t,projectPath:e,tabId:s,onBack:r,className:a})=>{const[i]=f.useState(e||""),[o,l]=f.useState(t.default_task||""),[c,d]=f.useState(t.model||"sonnet"),[u,h]=f.useState(!1),{updateTabStatus:m}=Wn(),[p,g]=f.useState([]),[x,b]=f.useState([]),[y,v]=f.useState(null),[j,S]=f.useState(!1),w=vs();X2("AgentExecution");const _=Q2(`agent_${t.name||"custom"}`),[N,C]=f.useState(!1),P=f.useRef(!1),[O,B]=f.useState("project"),[U,G]=f.useState(null),[R,z]=f.useState(0),[re,A]=f.useState(0),[F,ee]=f.useState(!1),[D,Z]=f.useState(!1),me=f.useRef(null),fe=f.useRef(null),be=f.useRef(null),le=f.useRef(null),$=f.useRef(null),M=f.useRef([]),k=f.useRef(null),[E,q]=f.useState(null),ie=He.useMemo(()=>p.filter((Y,Ye)=>{var he,De,Gn;if(Y.isMeta&&!Y.leafUuid&&!Y.summary)return!1;if(Y.type==="user"&&Y.message){if(Y.isMeta)return!1;const rt=Y.message;if(!rt.content||Array.isArray(rt.content)&&rt.content.length===0)return!1;if(Array.isArray(rt.content)){let Bt=!1;for(const bs of rt.content)if(bs.type==="text"){Bt=!0;break}else if(bs.type==="tool_result"){let uc=!1;if(bs.tool_use_id)for(let ci=Ye-1;ci>=0;ci--){const zr=p[ci];if(zr.type==="assistant"&&((he=zr.message)!=null&&he.content)&&Array.isArray(zr.message.content)){const di=zr.message.content.find(Ur=>Ur.type==="tool_use"&&Ur.id===bs.tool_use_id);if(di){const Ur=(De=di.name)==null?void 0:De.toLowerCase();(["task","edit","multiedit","todowrite","ls","read","glob","bash","write","grep"].includes(Ur)||(Gn=di.name)!=null&&Gn.startsWith("mcp__"))&&(uc=!0);break}}}if(!uc){Bt=!0;break}}if(!Bt)return!1}}return!0}),[p]),je=Xu({count:ie.length,getScrollElement:()=>be.current,estimateSize:()=>150,overscan:5}),Ce=Xu({count:ie.length,getScrollElement:()=>le.current,estimateSize:()=>150,overscan:5});f.useEffect(()=>()=>{M.current.forEach(Y=>Y()),k.current&&clearInterval(k.current)},[]);const ut=()=>{const Y=D?le.current:be.current;if(Y){const{scrollTop:Ye,scrollHeight:he,clientHeight:De}=Y;return he-Ye-De<1}return!0};f.useEffect(()=>{if(ie.length===0)return;(!F||ut())&&(D?Ce.scrollToIndex(ie.length-1,{align:"end",behavior:"smooth"}):je.scrollToIndex(ie.length-1,{align:"end",behavior:"smooth"}))},[ie.length,F,D,je,Ce]),f.useEffect(()=>(u&&U?k.current=setInterval(()=>{A(Math.floor((Date.now()-U)/1e3))},100):k.current&&clearInterval(k.current),()=>{k.current&&clearInterval(k.current)}),[u,U]),f.useEffect(()=>{const Y=p.reduce((Ye,he)=>{var De;return(De=he.message)!=null&&De.usage?Ye+he.message.usage.input_tokens+he.message.usage.output_tokens:he.usage?Ye+he.usage.input_tokens+he.usage.output_tokens:Ye},0);z(Y)},[p]);const rs=async()=>{C(!0)},Vs=async()=>{try{h(!0),console.log("Setting tab status to running for tab:",s),s&&m(s,"running"),G(Date.now()),g([]),b([]),q(null),M.current.forEach(rt=>rt()),M.current=[];const Y=await X.executeAgent(t.id,i,o,c);console.log("Agent execution started with run ID:",Y),q(Y),w.agentStarted({agent_type:t.name||"custom",agent_name:t.name,has_custom_prompt:o!==t.default_task}),_.trackUsage();const Ye=await Br(`agent-output:${Y}`,rt=>{try{b(bs=>[...bs,rt.payload]);const Bt=JSON.parse(rt.payload);g(bs=>[...bs,Bt])}catch(Bt){console.error("Failed to parse message:",Bt,rt.payload)}}),he=await Br(`agent-error:${Y}`,rt=>{console.error("Agent error:",rt.payload),v(rt.payload),w.agentError({error_type:"runtime_error",error_stage:"execution",retry_count:0,agent_type:t.name||"custom"})}),De=await Br(`agent-complete:${Y}`,rt=>{h(!1);const Bt=U?Date.now()-U:void 0;G(null),rt.payload?(s&&m(s,"complete"),w.agentExecuted(t.name||"custom",!0,t.name,Bt)):(v("Agent execution failed"),s&&m(s,"error"),w.agentExecuted(t.name||"custom",!1,t.name,Bt),w.agentError({error_type:"execution_failed",error_stage:"completion",retry_count:0,agent_type:t.name||"custom"}))}),Gn=await Br(`agent-cancelled:${Y}`,()=>{h(!1),G(null),v("Agent execution was cancelled"),s&&m(s,"idle")});M.current=[Ye,he,De,Gn]}catch(Y){console.error("Failed to execute agent:",Y),h(!1),G(null),q(null),s&&m(s,"error"),g(Ye=>[...Ye,{type:"result",subtype:"error",is_error:!0,result:`Failed to execute agent: ${Y instanceof Error?Y.message:"Unknown error"}`,duration_ms:0,usage:{input_tokens:0,output_tokens:0}}])}},ys=async()=>{try{if(!E){console.error("No run ID available to stop");return}await X.killAgentSession(E)?console.log(`Successfully stopped agent session ${E}`):console.warn(`Failed to stop agent session ${E} - it may have already finished`),h(!1),G(null)}catch(Y){console.error("Failed to stop agent:",Y)}},H=()=>{P.current=!0},ue=()=>{setTimeout(()=>{P.current=!1},0)},we=()=>{u&&!window.confirm(`An agent is currently running. If you navigate away, the agent will continue running in the background. You can view running sessions in the 'Running Sessions' tab within CC Agents.

Do you want to continue?`)||(M.current.forEach(Y=>Y()),M.current=[],r())},Ze=async()=>{const Y=x.join(`
`);await navigator.clipboard.writeText(Y),S(!1)},kt=async()=>{var Ye;let Y=`# Agent Execution: ${t.name}

`;Y+=`**Task:** ${o}
`,Y+=`**Model:** ${c==="opus"?"Claude 4 Opus":"Claude 4 Sonnet"}
`,Y+=`**Date:** ${new Date().toISOString()}

`,Y+=`---

`;for(const he of p)if(he.type==="system"&&he.subtype==="init")Y+=`## System Initialization

`,Y+=`- Session ID: \`${he.session_id||"N/A"}\`
`,Y+=`- Model: \`${he.model||"default"}\`
`,he.cwd&&(Y+=`- Working Directory: \`${he.cwd}\`
`),(Ye=he.tools)!=null&&Ye.length&&(Y+=`- Tools: ${he.tools.join(", ")}
`),Y+=`
`;else if(he.type==="assistant"&&he.message){Y+=`## Assistant

`;for(const De of he.message.content||[])De.type==="text"?Y+=`${De.text}

`:De.type==="tool_use"&&(Y+=`### Tool: ${De.name}

`,Y+=`\`\`\`json
${JSON.stringify(De.input,null,2)}
\`\`\`

`);he.message.usage&&(Y+=`*Tokens: ${he.message.usage.input_tokens} in, ${he.message.usage.output_tokens} out*

`)}else if(he.type==="user"&&he.message){Y+=`## User

`;for(const De of he.message.content||[])De.type==="text"?Y+=`${De.text}

`:De.type==="tool_result"&&(Y+=`### Tool Result

`,Y+=`\`\`\`
${De.content}
\`\`\`

`)}else if(he.type==="result"&&(Y+=`## Execution Result

`,he.result&&(Y+=`${he.result}

`),he.error&&(Y+=`**Error:** ${he.error}

`),he.cost_usd!==void 0&&(Y+=`- **Cost:** $${he.cost_usd.toFixed(4)} USD
`),he.duration_ms!==void 0&&(Y+=`- **Duration:** ${(he.duration_ms/1e3).toFixed(2)}s
`),he.num_turns!==void 0&&(Y+=`- **Turns:** ${he.num_turns}
`),he.usage)){const De=he.usage.input_tokens+he.usage.output_tokens;Y+=`- **Total Tokens:** ${De} (${he.usage.input_tokens} in, ${he.usage.output_tokens} out)
`}await navigator.clipboard.writeText(Y),S(!1)};return n.jsxs("div",{className:V("flex flex-col h-full bg-background",a),children:[n.jsxs("div",{className:"h-full flex flex-col bg-background",children:[n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:we,className:"h-9 w-9 -ml-2",title:"Back",children:n.jsx(pn,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:t.name}),n.jsxs("p",{className:"mt-1 text-body-small text-muted-foreground",children:[u?"Running":p.length>0?"Complete":"Ready","  ",c==="opus"?"Claude 4 Opus":"Claude 4 Sonnet"]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:p.length>0&&n.jsxs(L,{variant:"outline",size:"default",onClick:()=>Z(!0),children:[n.jsx(vp,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})})]})}),n.jsx("div",{className:"p-6 border-b border-border",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[y&&n.jsxs(K.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.15},className:"p-3 rounded-md bg-destructive/10 border border-destructive/50 flex items-center gap-2",children:[n.jsx(qe,{className:"h-3.5 w-3.5 text-destructive flex-shrink-0"}),n.jsx("span",{className:"text-caption text-destructive",children:y})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ce,{className:"text-caption text-muted-foreground",children:"Model Selection"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(K.button,{type:"button",onClick:()=>!u&&d("sonnet"),whileTap:{scale:.97},transition:{duration:.15},className:V("flex-1 px-4 py-3 rounded-md border transition-all",c==="sonnet"?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 hover:bg-accent",u&&"opacity-50 cursor-not-allowed"),disabled:u,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:V("w-4 h-4 rounded-full border-2 flex items-center justify-center",c==="sonnet"?"border-primary":"border-muted-foreground"),children:c==="sonnet"&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-body-small font-medium",children:"Claude 4 Sonnet"}),n.jsx("div",{className:"text-caption text-muted-foreground",children:"Faster, efficient"})]})]})}),n.jsx(K.button,{type:"button",onClick:()=>!u&&d("opus"),whileTap:{scale:.97},transition:{duration:.15},className:V("flex-1 px-4 py-3 rounded-md border transition-all",c==="opus"?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 hover:bg-accent",u&&"opacity-50 cursor-not-allowed"),disabled:u,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:V("w-4 h-4 rounded-full border-2 flex items-center justify-center",c==="opus"?"border-primary":"border-muted-foreground"),children:c==="opus"&&n.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-body-small font-medium",children:"Claude 4 Opus"}),n.jsx("div",{className:"text-caption text-muted-foreground",children:"More capable"})]})]})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-caption text-muted-foreground",children:"Task Description"}),i&&n.jsxs(L,{variant:"ghost",size:"sm",onClick:rs,disabled:u,className:"h-8 -mr-2",children:[n.jsx(wp,{className:"h-3.5 w-3.5 mr-1.5"}),n.jsx("span",{className:"text-caption",children:"Configure Hooks"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(xe,{value:o,onChange:Y=>l(Y.target.value),placeholder:"What would you like the agent to do?",disabled:u,className:"flex-1 h-9",onKeyDown:Y=>{if(Y.key==="Enter"&&!u&&i&&o.trim()){if(Y.nativeEvent.isComposing||P.current)return;Vs()}},onCompositionStart:H,onCompositionEnd:ue}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{onClick:u?ys:Vs,disabled:!i||!o.trim(),variant:u?"destructive":"default",size:"default",children:u?n.jsxs(n.Fragment,{children:[n.jsx(dp,{className:"mr-2 h-4 w-4"}),"Stop"]}):n.jsxs(n.Fragment,{children:[n.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Execute"]})})})]}),i&&n.jsxs("p",{className:"text-caption text-muted-foreground",children:["Working in: ",n.jsx("span",{className:"font-mono",children:i.split("/").pop()||i})]})]})]})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("div",{className:"w-full max-w-5xl mx-auto h-full",children:n.jsx("div",{ref:be,className:"h-full overflow-y-auto p-6 space-y-8",onScroll:()=>{F||ee(!0),ut()&&ee(!1)},children:n.jsxs("div",{ref:fe,children:[p.length===0&&!u&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(dt,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Ready to Execute"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter a task to run the agent"})]}),u&&p.length===0&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ye,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Initializing agent..."})]})}),n.jsx("div",{className:"relative w-full",style:{height:`${je.getTotalSize()}px`},children:n.jsx(Te,{children:je.getVirtualItems().map(Y=>{const Ye=ie[Y.index];return n.jsx(K.div,{"data-index":Y.index,ref:he=>he&&je.measureElement(he),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"absolute inset-x-4 pb-4",style:{top:Y.start},children:n.jsx(nl,{children:n.jsx(qu,{message:Ye,streamMessages:p})})},Y.key)})})}),n.jsx("div",{ref:me})]})})})})]}),n.jsx(JN,{isExecuting:u,onStop:ys,totalTokens:R,elapsedTime:re}),D&&n.jsxs("div",{className:"fixed inset-0 z-50 bg-background flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h2",{className:"text-lg font-semibold",children:[t.name," - Output"]}),u&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Running"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pN,{trigger:n.jsxs(L,{variant:"ghost",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"h-4 w-4"}),"Copy Output",n.jsx(gt,{className:"h-3 w-3"})]}),content:n.jsxs("div",{className:"w-44 p-1",children:[n.jsx(L,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:Ze,children:"Copy as JSONL"}),n.jsx(L,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:kt,children:"Copy as Markdown"})]}),open:j,onOpenChange:S,align:"end"}),n.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>Z(!1),className:"flex items-center gap-2",children:[n.jsx(Ut,{className:"h-4 w-4"}),"Close"]})]})]}),n.jsx("div",{className:"flex-1 overflow-hidden p-6",children:n.jsxs("div",{ref:le,className:"h-full overflow-y-auto space-y-8",onScroll:()=>{F||ee(!0),ut()&&ee(!1)},children:[p.length===0&&!u&&n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(dt,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:"Ready to Execute"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter a task to run the agent"})]}),u&&p.length===0&&n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ye,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Initializing agent..."})]})}),n.jsx("div",{className:"relative w-full max-w-5xl mx-auto",style:{height:`${Ce.getTotalSize()}px`},children:n.jsx(Te,{children:Ce.getVirtualItems().map(Y=>{const Ye=ie[Y.index];return n.jsx(K.div,{"data-index":Y.index,ref:he=>he&&Ce.measureElement(he),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"absolute inset-x-4 pb-4",style:{top:Y.start},children:n.jsx(nl,{children:n.jsx(qu,{message:Ye,streamMessages:p})})},Y.key)})})}),n.jsx("div",{ref:$})]})})]}),n.jsx(yt,{open:N,onOpenChange:C,children:n.jsxs(mt,{className:"max-w-4xl max-h-[85vh] overflow-hidden flex flex-col gap-0 p-0",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-border",children:[n.jsx(pt,{className:"text-heading-2",children:"Configure Hooks"}),n.jsx(Gt,{className:"mt-1 text-body-small text-muted-foreground",children:"Configure hooks that run before, during, and after tool executions"})]}),n.jsxs(Ds,{value:O,onValueChange:B,className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"px-6 pt-4",children:n.jsxs(xs,{className:"grid w-full grid-cols-2 h-auto p-1",children:[n.jsx(Ne,{value:"project",className:"py-2.5 px-3 text-body-small",children:"Project Settings"}),n.jsx(Ne,{value:"local",className:"py-2.5 px-3 text-body-small",children:"Local Settings"})]})}),n.jsx(ke,{value:"project",className:"flex-1 overflow-auto px-6 pb-6 mt-0",children:n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:n.jsxs("p",{className:"text-caption text-muted-foreground",children:["Project hooks are stored in ",n.jsx("code",{className:"font-mono text-xs bg-background px-1.5 py-0.5 rounded",children:".claude/settings.json"})," and are committed to version control, allowing team members to share configurations."]})}),n.jsx(Pr,{projectPath:i,scope:"project",className:"border-0"})]})}),n.jsx(ke,{value:"local",className:"flex-1 overflow-auto px-6 pb-6 mt-0",children:n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:n.jsxs("p",{className:"text-caption text-muted-foreground",children:["Local hooks are stored in ",n.jsx("code",{className:"font-mono text-xs bg-background px-1.5 py-0.5 rounded",children:".claude/settings.local.json"})," and are not committed to version control, perfect for personal preferences."]})}),n.jsx(Pr,{projectPath:i,scope:"local",className:"border-0"})]})})]})]})})]})},lk=Object.freeze(Object.defineProperty({__proto__:null,AgentExecution:ig},Symbol.toStringTag,{value:"Module"})),qi=5,ck=({runs:t,onRunClick:e,className:s})=>{const[r,a]=f.useState(1),{createAgentTab:i}=Wn(),o=Math.ceil(t.length/qi),l=(r-1)*qi,c=l+qi,d=t.slice(l,c);He.useEffect(()=>{a(1)},[t.length]);const u=g=>{const x=rl[g]||ts;return n.jsx(x,{className:"h-4 w-4"})},h=g=>{if(!g)return"N/A";const x=Math.floor(g/1e3);if(x<60)return`${x}s`;const b=Math.floor(x/60),y=x%60;return`${b}m ${y}s`},m=g=>g?g>=1e3?`${(g/1e3).toFixed(1)}k`:g.toString():"0",p=g=>{e?e(g):g.id&&i(g.id.toString(),g.agent_name)};return t.length===0?n.jsxs("div",{className:V("text-center py-8 text-muted-foreground",s),children:[n.jsx(Qa,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No execution history yet"})]}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:V("space-y-2",s),children:[n.jsx(Te,{mode:"popLayout",children:d.map((g,x)=>{var b,y;return n.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:x*.05,ease:[.4,0,.2,1]},children:n.jsx(se,{className:V("cursor-pointer transition-all hover:shadow-md hover:scale-[1.01] active:scale-[0.99]",g.status==="running"&&"border-green-500/50"),onClick:()=>p(g),children:n.jsx(Ct,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:u(g.agent_icon)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"text-sm font-medium truncate",children:g.agent_name}),g.status==="running"&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Running"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground truncate mb-1",children:g.task}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(As,{className:"h-3 w-3"}),n.jsx("span",{children:o_(g.created_at)})]}),((b=g.metrics)==null?void 0:b.duration_ms)&&n.jsx("span",{children:h(g.metrics.duration_ms)}),((y=g.metrics)==null?void 0:y.total_tokens)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Za,{className:"h-3 w-3"}),n.jsx("span",{children:m(g.metrics.total_tokens)})]})]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ee,{variant:g.status==="completed"?"default":g.status==="running"?"secondary":g.status==="failed"?"destructive":"outline",className:"text-xs",children:g.status==="completed"?"Completed":g.status==="running"?"Running":g.status==="failed"?"Failed":"Pending"})})]})})})},g.id)})}),o>1&&n.jsx("div",{className:"pt-2",children:n.jsx(Ap,{currentPage:r,totalPages:o,onPageChange:a})})]})})},dk=({isOpen:t,onClose:e,onImportSuccess:s})=>{const[r,a]=f.useState([]),[i,o]=f.useState(!0),[l,c]=f.useState(null),[d,u]=f.useState(""),[h,m]=f.useState(null),[p,g]=f.useState(!1),[x,b]=f.useState([]);f.useEffect(()=>{t&&(v(),y())},[t]);const y=async()=>{try{const O=await X.listAgents();b(O)}catch(O){console.error("Failed to fetch existing agents:",O)}},v=async()=>{try{o(!0),c(null);const O=await X.fetchGitHubAgents();a(O)}catch(O){console.error("Failed to fetch GitHub agents:",O),c("Failed to fetch agents from GitHub. Please check your internet connection.")}finally{o(!1)}},j=async O=>{m({file:O,data:null,loading:!0,error:null});try{const B=await X.fetchGitHubAgentContent(O.download_url);m({file:O,data:B,loading:!1,error:null})}catch(B){console.error("Failed to fetch agent content:",B),m({file:O,data:null,loading:!1,error:"Failed to load agent details"})}},S=O=>{const B=N(O);return x.some(U=>U.name.toLowerCase()===B.toLowerCase())},w=async()=>{if(h!=null&&h.file)try{g(!0),await X.importAgentFromGitHub(h.file.download_url),await y(),m(null),s()}catch(O){console.error("Failed to import agent:",O),alert(`Failed to import agent: ${O instanceof Error?O.message:"Unknown error"}`)}finally{g(!1)}},_=r.filter(O=>O.name.toLowerCase().includes(d.toLowerCase())),N=O=>O.replace(".opcode.json","").replace(/-/g," ").split(" ").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" "),C=O=>{const B=In[O]||In.bot;return n.jsx(B,{className:"h-8 w-8"})},P=async O=>{O.preventDefault();try{await il("https://github.com/getAsterisk/opcode/tree/main/cc_agents")}catch(B){console.error("Failed to open GitHub link:",B)}};return n.jsxs(yt,{open:t,onOpenChange:e,children:[n.jsxs(mt,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsx(bt,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Vt,{className:"h-5 w-5"}),"Import Agent from GitHub"]})}),n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-4 py-3 bg-muted/50 rounded-lg mb-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Agents are fetched from"," ",n.jsxs("button",{onClick:P,className:"text-primary hover:underline inline-flex items-center gap-1",children:["github.com/getAsterisk/opcode/cc_agents",n.jsx(Vt,{className:"h-3 w-3"})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"You can contribute your custom agents to the repository!"})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(xe,{placeholder:"Search agents...",value:d,onChange:O=>u(O.target.value),className:"pl-10"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:i?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(qe,{className:"h-12 w-12 text-destructive mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l}),n.jsx(L,{onClick:v,variant:"outline",size:"sm",children:"Try Again"})]}):_.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(ql,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:d?"No agents found matching your search":"No agents available"})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pb-4",children:n.jsx(Te,{mode:"popLayout",children:_.map((O,B)=>n.jsx(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,delay:B*.05},children:n.jsxs(se,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>j(O),children:[n.jsxs(Ct,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary flex-shrink-0",children:(()=>{const U=In.bot;return n.jsx(U,{className:"h-6 w-6"})})()}),n.jsx("h3",{className:"text-sm font-semibold line-clamp-2",children:N(O.name)})]}),S(O.name)&&n.jsxs(Ee,{variant:"secondary",className:"ml-2 flex-shrink-0",children:[n.jsx(ds,{className:"h-3 w-3 mr-1"}),"Imported"]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(O.size/1024).toFixed(1)," KB"]})]}),n.jsx(Kl,{className:"p-4 pt-0",children:n.jsxs(L,{size:"sm",variant:"outline",className:"w-full",onClick:U=>{U.stopPropagation(),j(O)},children:[n.jsx(mp,{className:"h-3 w-3 mr-2"}),"Preview"]})})]})},O.sha))})})})]})]}),n.jsx(Te,{children:h&&n.jsx(yt,{open:!!h,onOpenChange:()=>m(null),children:n.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsx(bt,{children:n.jsx(pt,{children:"Agent Preview"})}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:h.loading?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):h.error?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(qe,{className:"h-12 w-12 text-destructive mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.error})]}):h.data?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"p-3 rounded-lg bg-primary/10 text-primary",children:C(h.data.agent.icon)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold",children:h.data.agent.name}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx(Ee,{variant:"outline",children:h.data.agent.model})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"System Prompt"}),n.jsx("div",{className:"bg-muted rounded-lg p-3 max-h-48 overflow-y-auto",children:n.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono",children:h.data.agent.system_prompt})})]}),h.data.agent.default_task&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Default Task"}),n.jsx("div",{className:"bg-muted rounded-lg p-3",children:n.jsx("p",{className:"text-sm",children:h.data.agent.default_task})})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsxs("p",{children:["Version: ",h.data.version]}),n.jsxs("p",{children:["Exported: ",new Date(h.data.exported_at).toLocaleDateString()]})]})]}):null}),h.data&&n.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[n.jsx(L,{variant:"outline",onClick:()=>m(null),children:"Cancel"}),n.jsx(L,{onClick:w,disabled:p||S(h.file.name),children:p?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):S(h.file.name)?n.jsxs(n.Fragment,{children:[n.jsx(ds,{className:"h-4 w-4 mr-2"}),"Already Imported"]}):n.jsxs(n.Fragment,{children:[n.jsx(an,{className:"h-4 w-4 mr-2"}),"Import Agent"]})})]})]})})})]})},rl=In,uk=({onBack:t,className:e})=>{const[s,r]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(!1),[u,h]=f.useState(null),[m,p]=f.useState(null),[g,x]=f.useState(1),[b,y]=f.useState("list"),[v,j]=f.useState(null),[S,w]=f.useState(!1),[_,N]=f.useState(!1),[C,P]=f.useState(null),[O,B]=f.useState(!1),U=9;f.useEffect(()=>{G(),R()},[]);const G=async()=>{try{l(!0),h(null);const E=await X.listAgents();r(E)}catch(E){console.error("Failed to load agents:",E),h("Failed to load agents"),p({message:"Failed to load agents",type:"error"})}finally{l(!1)}},R=async()=>{try{d(!0);const E=await X.listAgentRuns();i(E)}catch(E){console.error("Failed to load runs:",E)}finally{d(!1)}},z=E=>{P(E),N(!0)},re=async()=>{if(C!=null&&C.id)try{B(!0),await X.deleteAgent(C.id),p({message:"Agent deleted successfully",type:"success"}),await G(),await R()}catch(E){console.error("Failed to delete agent:",E),p({message:"Failed to delete agent",type:"error"})}finally{B(!1),N(!1),P(null)}},A=()=>{N(!1),P(null)},F=E=>{j(E),y("edit")},ee=E=>{j(E),y("execute")},D=async()=>{y("list"),await G(),p({message:"Agent created successfully",type:"success"})},Z=async()=>{y("list"),await G(),p({message:"Agent updated successfully",type:"success"})},me=async()=>{await R()},fe=async E=>{try{const q=await Ag({defaultPath:`${E.name.toLowerCase().replace(/\s+/g,"-")}.opcode.json`,filters:[{name:"opcode Agent",extensions:["opcode.json"]}]});if(!q)return;await jr("export_agent_to_file",{id:E.id,filePath:q}),p({message:`Agent "${E.name}" exported successfully`,type:"success"})}catch(q){console.error("Failed to export agent:",q),p({message:"Failed to export agent",type:"error"})}},be=async()=>{try{const E=await Mg({multiple:!1,filters:[{name:"opcode Agent",extensions:["opcode.json","json"]}]});if(!E)return;await X.importAgentFromFile(E),p({message:"Agent imported successfully",type:"success"}),await G()}catch(E){console.error("Failed to import agent:",E);const q=E instanceof Error?E.message:"Failed to import agent";p({message:q,type:"error"})}},le=Math.ceil(s.length/U),$=(g-1)*U,M=s.slice($,$+U),k=E=>{const q=rl[E]||rl.bot;return n.jsx(q,{className:"h-12 w-12"})};return b==="create"?n.jsx(tl,{onBack:()=>y("list"),onAgentCreated:D}):b==="edit"&&v?n.jsx(tl,{agent:v,onBack:()=>y("list"),onAgentCreated:Z}):b==="execute"&&v?n.jsx(ig,{agent:v,onBack:()=>{y("list"),me()}}):n.jsxs("div",{className:V("flex flex-col h-full bg-background",e),children:[n.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col h-full p-6",children:[n.jsx(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(L,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:n.jsx(pn,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:"CC Agents"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:"Manage your Claude Code agents"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(rN,{children:[n.jsx(aN,{asChild:!0,children:n.jsxs(L,{size:"default",variant:"outline",className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),"Import",n.jsx(gt,{className:"h-3 w-3"})]})}),n.jsxs(eg,{align:"end",children:[n.jsxs(el,{onClick:be,children:[n.jsx(ql,{className:"h-4 w-4 mr-2"}),"From File"]}),n.jsxs(el,{onClick:()=>w(!0),children:[n.jsx(Vt,{className:"h-4 w-4 mr-2"}),"From GitHub"]})]})]}),n.jsxs(L,{onClick:()=>y("create"),size:"default",className:"flex items-center gap-2",children:[n.jsx(nt,{className:"h-4 w-4"}),"Create CC Agent"]})]})]})}),u&&n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-body-small text-destructive",children:u}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx(Te,{mode:"wait",children:n.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"pt-6 space-y-8",children:[n.jsx("div",{children:o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[n.jsx(ts,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-heading-4 mb-2",children:"No agents yet"}),n.jsx("p",{className:"text-body-small text-muted-foreground mb-4",children:"Create your first CC Agent to get started"}),n.jsxs(L,{onClick:()=>y("create"),size:"default",children:[n.jsx(nt,{className:"h-4 w-4 mr-2"}),"Create CC Agent"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.jsx(Te,{mode:"popLayout",children:M.map((E,q)=>n.jsx(K.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,delay:q*.05},children:n.jsxs(se,{className:"h-full hover:shadow-lg transition-shadow",children:[n.jsxs(Ct,{className:"p-6 flex flex-col items-center text-center",children:[n.jsx("div",{className:"mb-4 p-4 rounded-full bg-primary/10 text-primary",children:k(E.icon)}),n.jsx("h3",{className:"text-heading-4 mb-2",children:E.name}),n.jsxs("p",{className:"text-caption text-muted-foreground",children:["Created: ",new Date(E.created_at).toLocaleDateString()]})]}),n.jsxs(Kl,{className:"p-4 pt-0 flex justify-center gap-1 flex-wrap",children:[n.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>ee(E),className:"flex items-center gap-1",title:"Execute agent",children:[n.jsx(Qa,{className:"h-3 w-3"}),"Execute"]}),n.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>F(E),className:"flex items-center gap-1",title:"Edit agent",children:[n.jsx(Wl,{className:"h-3 w-3"}),"Edit"]}),n.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>fe(E),className:"flex items-center gap-1",title:"Export agent to .opcode.json",children:[n.jsx(Na,{className:"h-3 w-3"}),"Export"]}),n.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>z(E),className:"flex items-center gap-1 text-destructive hover:text-destructive",title:"Delete agent",children:[n.jsx(Nt,{className:"h-3 w-3"}),"Delete"]})]})]})},E.id))})}),le>1&&n.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[n.jsx(L,{size:"sm",variant:"outline",onClick:()=>x(E=>Math.max(1,E-1)),disabled:g===1,children:"Previous"}),n.jsxs("span",{className:"flex items-center px-3 text-body-small",children:["Page ",g," of ",le]}),n.jsx(L,{size:"sm",variant:"outline",onClick:()=>x(E=>Math.min(le,E+1)),disabled:g===le,children:"Next"})]})]})}),!o&&s.length>0&&n.jsxs("div",{className:"overflow-hidden",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ab,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("h2",{className:"text-heading-4",children:"Recent Executions"})]}),c?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):n.jsx(ck,{runs:a})]})]},"agents")})})]}),n.jsx(gs,{children:m&&n.jsx(fs,{message:m.message,type:m.type,onDismiss:()=>p(null)})}),n.jsx(dk,{isOpen:S,onClose:()=>w(!1),onImportSuccess:async()=>{w(!1),await G(),p({message:"Agent imported successfully from GitHub",type:"success"})}}),n.jsx(yt,{open:_,onOpenChange:N,children:n.jsxs(mt,{className:"sm:max-w-md",children:[n.jsxs(bt,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Nt,{className:"h-5 w-5 text-destructive"}),"Delete Agent"]}),n.jsxs(Gt,{children:['Are you sure you want to delete the agent "',C==null?void 0:C.name,'"? This action cannot be undone and will permanently remove the agent and all its associated data.']})]}),n.jsxs(Wt,{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2",children:[n.jsx(L,{variant:"outline",onClick:A,disabled:O,className:"w-full sm:w-auto",children:"Cancel"}),n.jsx(L,{variant:"destructive",onClick:re,disabled:O,className:"w-full sm:w-auto",children:O?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Delete Agent"]})})]})]})})]})},Zu=new Map,hk=10*60*1e3,og=({})=>{const[t,e]=f.useState(!0),[s,r]=f.useState(null),[a,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState("7d"),[u,h]=f.useState("overview"),[m,p]=f.useState(new Set(["overview"])),[g,x]=f.useState(1),[b,y]=f.useState(1),v=10,j=f.useMemo(()=>R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(R),[]),S=f.useMemo(()=>R=>new Intl.NumberFormat("en-US").format(R),[]),w=f.useMemo(()=>R=>R>=1e6?`${(R/1e6).toFixed(2)}M`:R>=1e3?`${(R/1e3).toFixed(1)}K`:S(R),[S]),_=f.useCallback(R=>({"claude-4-opus":"Opus 4","claude-4-sonnet":"Sonnet 4","claude-3.5-sonnet":"Sonnet 3.5","claude-3-opus":"Opus 3"})[R]||R,[]),N=f.useCallback(R=>{const z=Zu.get(R);return z&&Date.now()-z.timestamp<hk?z.data:null},[]),C=f.useCallback((R,z)=>{Zu.set(R,{data:z,timestamp:Date.now()})},[]),P=f.useCallback(async()=>{const R=`usage-${c}`,z=N(`${R}-stats`),re=N(`${R}-sessions`);if(z&&re){i(z),l(re),e(!1);return}try{!a&&!o&&e(!0),r(null);let A,F=[];if(c==="all"){const[ee,D]=await Promise.all([X.getUsageStats(),X.getSessionStats()]);A=ee,F=D}else{const ee=new Date,D=new Date,Z=c==="7d"?7:30;D.setDate(D.getDate()-Z);const me=le=>{const $=le.getFullYear(),M=String(le.getMonth()+1).padStart(2,"0"),k=String(le.getDate()).padStart(2,"0");return`${$}${M}${k}`},[fe,be]=await Promise.all([X.getUsageByDateRange(D.toISOString(),ee.toISOString()),X.getSessionStats(me(D),me(ee),"desc")]);A=fe,F=be}i(A),l(F),C(`${R}-stats`,A),C(`${R}-sessions`,F)}catch(A){console.error("Failed to load usage stats:",A),r("Failed to load usage statistics. Please try again.")}finally{e(!1)}},[c,N,C,a,o]);f.useEffect(()=>{x(1),y(1),P()},[P]),f.useEffect(()=>{if(!a||t)return;const R=["overview","models","projects","sessions","timeline"],z=R.indexOf(u);(A=>{"requestIdleCallback"in window?requestIdleCallback(A,{timeout:2e3}):setTimeout(A,100)})(()=>{z>0&&p(A=>new Set([...A,R[z-1]])),z<R.length-1&&p(A=>new Set([...A,R[z+1]]))})},[u,a,t]);const O=f.useMemo(()=>a?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(se,{className:"p-4 shimmer-hover",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Total Cost"}),n.jsx("p",{className:"text-display-2 mt-1",children:j(a.total_cost)})]})}),n.jsx(se,{className:"p-4 shimmer-hover",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Total Sessions"}),n.jsx("p",{className:"text-display-2 mt-1",children:S(a.total_sessions)})]})}),n.jsx(se,{className:"p-4 shimmer-hover",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Total Tokens"}),n.jsx("p",{className:"text-display-2 mt-1",children:w(a.total_tokens)})]})}),n.jsx(se,{className:"p-4 shimmer-hover",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Avg Cost/Session"}),n.jsx("p",{className:"text-display-2 mt-1",children:j(a.total_sessions>0?a.total_cost/a.total_sessions:0)})]})})]}):null,[a,j,S,w]),B=f.useMemo(()=>a!=null&&a.by_model?a.by_model.slice(0,3).map(R=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ee,{variant:"outline",className:"text-caption",children:_(R.model)}),n.jsxs("span",{className:"text-caption text-muted-foreground",children:[R.session_count," sessions"]})]}),n.jsx("span",{className:"text-body-small font-medium",children:j(R.total_cost)})]},R.model)):null,[a,j,_]),U=f.useMemo(()=>a!=null&&a.by_project?a.by_project.slice(0,3).map(R=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-body-small font-medium truncate max-w-[200px]",title:R.project_path,children:R.project_path}),n.jsxs("span",{className:"text-caption text-muted-foreground",children:[R.session_count," sessions"]})]}),n.jsx("span",{className:"text-body-small font-medium",children:j(R.total_cost)})]},R.project_path)):null,[a,j]),G=f.useMemo(()=>{if(!(a!=null&&a.by_date)||a.by_date.length===0)return null;const R=Math.max(...a.by_date.map(A=>A.total_cost),0),z=R/2,re=a.by_date.slice().reverse();return{maxCost:R,halfMaxCost:z,reversedData:re,bars:re.map(A=>({...A,heightPercent:R>0?A.total_cost/R*100:0,date:new Date(A.date.replace(/-/g,"/"))}))}},[a==null?void 0:a.by_date]);return n.jsx("div",{className:"h-full overflow-y-auto",children:n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:"Usage Dashboard"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:"Track your Claude Code usage and costs"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bb,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("div",{className:"flex space-x-1",children:["7d","30d","all"].map(R=>n.jsx(L,{variant:c===R?"default":"outline",size:"sm",onClick:()=>d(R),disabled:t,children:R==="all"?"All Time":R==="7d"?"Last 7 Days":"Last 30 Days"},R))})]})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s?n.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/50 text-body-small text-destructive",children:[s,n.jsx(L,{onClick:()=>P(),size:"sm",className:"ml-4",children:"Try Again"})]}):a?n.jsxs("div",{className:"space-y-6",children:[O,n.jsxs(Ds,{value:u,onValueChange:R=>{h(R),p(z=>new Set([...z,R]))},className:"w-full",children:[n.jsxs(xs,{className:"grid grid-cols-5 w-full mb-6 h-auto p-1",children:[n.jsx(Ne,{value:"overview",className:"py-2.5 px-3",children:"Overview"}),n.jsx(Ne,{value:"models",className:"py-2.5 px-3",children:"By Model"}),n.jsx(Ne,{value:"projects",className:"py-2.5 px-3",children:"By Project"}),n.jsx(Ne,{value:"sessions",className:"py-2.5 px-3",children:"By Session"}),n.jsx(Ne,{value:"timeline",className:"py-2.5 px-3",children:"Timeline"})]}),n.jsxs(ke,{value:"overview",className:"space-y-6 mt-6",children:[n.jsxs(se,{className:"p-6",children:[n.jsx("h3",{className:"text-label mb-4",children:"Token Breakdown"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Input Tokens"}),n.jsx("p",{className:"text-heading-4",children:w(a.total_input_tokens)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Output Tokens"}),n.jsx("p",{className:"text-heading-4",children:w(a.total_output_tokens)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Cache Write"}),n.jsx("p",{className:"text-heading-4",children:w(a.total_cache_creation_tokens)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-caption text-muted-foreground",children:"Cache Read"}),n.jsx("p",{className:"text-heading-4",children:w(a.total_cache_read_tokens)})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(se,{className:"p-6",children:[n.jsx("h3",{className:"text-label mb-4",children:"Most Used Models"}),n.jsx("div",{className:"space-y-3",children:B})]}),n.jsxs(se,{className:"p-6",children:[n.jsx("h3",{className:"text-label mb-4",children:"Top Projects"}),n.jsx("div",{className:"space-y-3",children:U})]})]})]}),n.jsx(ke,{value:"models",className:"space-y-6 mt-6",children:m.has("models")&&a&&n.jsx("div",{style:{display:u==="models"?"block":"none"},children:n.jsxs(se,{className:"p-6",children:[n.jsx("h3",{className:"text-sm font-semibold mb-4",children:"Usage by Model"}),n.jsx("div",{className:"space-y-4",children:a.by_model.map(R=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ee,{variant:"outline",className:"text-xs",children:_(R.model)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.session_count," sessions"]})]}),n.jsx("span",{className:"text-sm font-semibold",children:j(R.total_cost)})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Input: "}),n.jsx("span",{className:"font-medium",children:w(R.input_tokens)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Output: "}),n.jsx("span",{className:"font-medium",children:w(R.output_tokens)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Cache W: "}),n.jsx("span",{className:"font-medium",children:w(R.cache_creation_tokens)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Cache R: "}),n.jsx("span",{className:"font-medium",children:w(R.cache_read_tokens)})]})]})]},R.model))})]})})}),n.jsx(ke,{value:"projects",className:"space-y-6 mt-6",children:m.has("projects")&&a&&n.jsx("div",{style:{display:u==="projects"?"block":"none"},children:n.jsxs(se,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold",children:"Usage by Project"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.by_project.length," total projects"]})]}),n.jsx("div",{className:"space-y-3",children:(()=>{const R=(g-1)*v,z=R+v,re=a.by_project.slice(R,z),A=Math.ceil(a.by_project.length/v);return n.jsxs(n.Fragment,{children:[re.map(F=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[n.jsxs("div",{className:"flex flex-col truncate",children:[n.jsx("span",{className:"text-sm font-medium truncate",title:F.project_path,children:F.project_path}),n.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[n.jsxs("span",{className:"text-caption text-muted-foreground",children:[F.session_count," sessions"]}),n.jsxs("span",{className:"text-caption text-muted-foreground",children:[w(F.total_tokens)," tokens"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-semibold",children:j(F.total_cost)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[j(F.total_cost/F.session_count),"/session"]})]})]},F.project_path)),A>1&&n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Showing ",R+1,"-",Math.min(z,a.by_project.length)," of ",a.by_project.length]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.max(1,F-1)),disabled:g===1,children:n.jsx(Tr,{className:"h-4 w-4"})}),n.jsxs("span",{className:"text-sm",children:["Page ",g," of ",A]}),n.jsx(L,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.min(A,F+1)),disabled:g===A,children:n.jsx(Ve,{className:"h-4 w-4"})})]})]})]})})()})]})})}),n.jsx(ke,{value:"sessions",className:"space-y-6 mt-6",children:m.has("sessions")&&n.jsx("div",{style:{display:u==="sessions"?"block":"none"},children:n.jsxs(se,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold",children:"Usage by Session"}),o&&o.length>0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.length," total sessions"]})]}),n.jsx("div",{className:"space-y-3",children:o&&o.length>0?(()=>{const R=(b-1)*v,z=R+v,re=o.slice(R,z),A=Math.ceil(o.length/v);return n.jsxs(n.Fragment,{children:[re.map((F,ee)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ip,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-xs font-mono text-muted-foreground truncate max-w-[200px]",title:F.project_path,children:F.project_path.split("/").slice(-2).join("/")})]}),n.jsx("span",{className:"text-sm font-medium mt-1",children:F.project_name})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-semibold",children:j(F.total_cost)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:F.last_used?new Date(F.last_used).toLocaleDateString():"N/A"})]})]},`${F.project_path}-${F.project_name}-${R+ee}`)),A>1&&n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Showing ",R+1,"-",Math.min(z,o.length)," of ",o.length]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{variant:"outline",size:"sm",onClick:()=>y(F=>Math.max(1,F-1)),disabled:b===1,children:n.jsx(Tr,{className:"h-4 w-4"})}),n.jsxs("span",{className:"text-sm",children:["Page ",b," of ",A]}),n.jsx(L,{variant:"outline",size:"sm",onClick:()=>y(F=>Math.min(A,F+1)),disabled:b===A,children:n.jsx(Ve,{className:"h-4 w-4"})})]})]})]})})():n.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No session data available for the selected period"})})]})})}),n.jsx(ke,{value:"timeline",className:"space-y-6 mt-6",children:m.has("timeline")&&a&&n.jsx("div",{style:{display:u==="timeline"?"block":"none"},children:n.jsxs(se,{className:"p-6",children:[n.jsxs("h3",{className:"text-sm font-semibold mb-6 flex items-center space-x-2",children:[n.jsx(op,{className:"h-4 w-4"}),n.jsx("span",{children:"Daily Usage"})]}),G?n.jsxs("div",{className:"relative pl-8 pr-4",children:[n.jsxs("div",{className:"absolute left-0 top-0 bottom-8 flex flex-col justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:j(G.maxCost)}),n.jsx("span",{children:j(G.halfMaxCost)}),n.jsx("span",{children:j(0)})]}),n.jsx("div",{className:"flex items-end space-x-2 h-64 border-l border-b border-border pl-4",children:G.bars.map(R=>{const z=R.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return n.jsxs("div",{className:"flex-1 h-full flex flex-col items-center justify-end group relative",children:[n.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-10",children:[n.jsxs("div",{className:"bg-background border border-border rounded-lg shadow-lg p-3 whitespace-nowrap",children:[n.jsx("p",{className:"text-sm font-semibold",children:z}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Cost: ",j(R.total_cost)]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[w(R.total_tokens)," tokens"]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[R.models_used.length," model",R.models_used.length!==1?"s":""]})]}),n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:n.jsx("div",{className:"border-4 border-transparent border-t-border"})})]}),n.jsx("div",{className:"w-full bg-primary hover:opacity-80 transition-opacity rounded-t cursor-pointer",style:{height:`${R.heightPercent}%`}}),n.jsx("div",{className:"absolute left-1/2 top-full mt-2 -translate-x-1/2 text-xs text-muted-foreground whitespace-nowrap pointer-events-none",children:R.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},R.date.toISOString())})}),n.jsx("div",{className:"mt-10 text-center text-xs text-muted-foreground",children:"Daily Usage Over Time"})]}):n.jsx("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No usage data available for the selected period"})]})})})]})]}):null})]})})},mk=Object.freeze(Object.defineProperty({__proto__:null,UsageDashboard:og},Symbol.toStringTag,{value:"Module"})),pk=({servers:t,loading:e,onServerRemoved:s,onRefresh:r})=>{const[a,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(new Set),[u,h]=f.useState(null),[m]=f.useState([]),p=vs(),g=t.reduce((N,C)=>{const P=C.scope||"local";return N[P]||(N[P]=[]),N[P].push(C),N},{}),x=N=>{d(C=>{const P=new Set(C);return P.has(N)?P.delete(N):P.add(N),P})},b=async(N,C)=>{try{await navigator.clipboard.writeText(N),h(C),setTimeout(()=>h(null),2e3)}catch(P){console.error("Failed to copy command:",P)}},y=async N=>{try{i(N);const C=m.includes(N);await X.mcpRemove(N),p.mcpServerRemoved({server_name:N,was_connected:C}),s(N)}catch(C){console.error("Failed to remove server:",C)}finally{i(null)}},v=async N=>{try{l(N);const C=await X.mcpTestConnection(N),P=t.find(O=>O.name===N);p.mcpServerConnected(N,!0,(P==null?void 0:P.transport)||"unknown"),console.log("Test result:",C)}catch(C){console.error("Failed to test connection:",C),p.mcpConnectionError({server_name:N,error_type:"test_failed",retry_attempt:0})}finally{l(null)}},j=N=>{switch(N){case"stdio":return n.jsx(dt,{className:"h-4 w-4 text-amber-500"});case"sse":return n.jsx(Vt,{className:"h-4 w-4 text-emerald-500"});default:return n.jsx(Mr,{className:"h-4 w-4 text-blue-500"})}},S=N=>{switch(N){case"local":return n.jsx(Gl,{className:"h-3 w-3 text-slate-500"});case"project":return n.jsx(Mt,{className:"h-3 w-3 text-orange-500"});case"user":return n.jsx(Ke,{className:"h-3 w-3 text-purple-500"});default:return null}},w=N=>{switch(N){case"local":return"Local (Project-specific)";case"project":return"Project (Shared via .mcp.json)";case"user":return"User (All projects)";default:return N}},_=N=>{var O;const C=c.has(N.name),P=u===N.name;return n.jsx(K.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"group p-4 rounded-lg border border-border bg-card hover:bg-accent/5 hover:border-primary/20 transition-all overflow-hidden",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 bg-primary/10 rounded",children:j(N.transport)}),n.jsx("h4",{className:"font-medium truncate",children:N.name}),((O=N.status)==null?void 0:O.running)&&n.jsxs(Ee,{variant:"outline",className:"gap-1 flex-shrink-0 border-green-500/50 text-green-600 bg-green-500/10",children:[n.jsx(Ul,{className:"h-3 w-3"}),"Running"]})]}),N.command&&!C&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground font-mono truncate pl-9 flex-1",title:N.command,children:N.command}),n.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>x(N.name),className:"h-6 px-2 text-xs hover:bg-primary/10",children:[n.jsx(gt,{className:"h-3 w-3 mr-1"}),"Show full"]})]}),N.transport==="sse"&&N.url&&!C&&n.jsx("div",{className:"overflow-hidden",children:n.jsx("p",{className:"text-xs text-muted-foreground font-mono truncate pl-9",title:N.url,children:N.url})}),Object.keys(N.env).length>0&&!C&&n.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground pl-9",children:n.jsxs("span",{children:["Environment variables: ",Object.keys(N.env).length]})})]}),n.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>v(N.name),disabled:o===N.name,className:"hover:bg-green-500/10 hover:text-green-600",children:o===N.name?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):n.jsx(Qa,{className:"h-4 w-4"})}),n.jsx(L,{variant:"ghost",size:"sm",onClick:()=>y(N.name),disabled:a===N.name,className:"hover:bg-destructive/10 hover:text-destructive",children:a===N.name?n.jsx(ye,{className:"h-4 w-4 animate-spin"}):n.jsx(Nt,{className:"h-4 w-4"})})]})]}),C&&n.jsxs(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"pl-9 space-y-3 pt-2 border-t border-border/50",children:[N.command&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Command"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>b(N.command,N.name),className:"h-6 px-2 text-xs hover:bg-primary/10",children:[n.jsx(Hl,{className:"h-3 w-3 mr-1"}),P?"Copied!":"Copy"]}),n.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>x(N.name),className:"h-6 px-2 text-xs hover:bg-primary/10",children:[n.jsx(Ga,{className:"h-3 w-3 mr-1"}),"Hide"]})]})]}),n.jsx("p",{className:"text-xs font-mono bg-muted/50 p-2 rounded break-all",children:N.command})]}),N.args&&N.args.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Arguments"}),n.jsx("div",{className:"text-xs font-mono bg-muted/50 p-2 rounded space-y-1",children:N.args.map((B,U)=>n.jsxs("div",{className:"break-all",children:[n.jsxs("span",{className:"text-muted-foreground mr-2",children:["[",U,"]"]}),B]},U))})]}),N.transport==="sse"&&N.url&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"URL"}),n.jsx("p",{className:"text-xs font-mono bg-muted/50 p-2 rounded break-all",children:N.url})]}),Object.keys(N.env).length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Environment Variables"}),n.jsx("div",{className:"text-xs font-mono bg-muted/50 p-2 rounded space-y-1",children:Object.entries(N.env).map(([B,U])=>n.jsxs("div",{className:"break-all",children:[n.jsx("span",{className:"text-primary",children:B}),n.jsx("span",{className:"text-muted-foreground mx-1",children:"="}),n.jsx("span",{children:U})]},B))})]})]})]})},N.name)};return e?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold",children:"Configured Servers"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.length," server",t.length!==1?"s":""," configured"]})]}),n.jsxs(L,{variant:"outline",size:"sm",onClick:r,className:"gap-2 hover:bg-primary/10 hover:text-primary hover:border-primary/50",children:[n.jsx(jp,{className:"h-4 w-4"}),"Refresh"]})]}),t.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"p-4 bg-primary/10 rounded-full mb-4",children:n.jsx(Mr,{className:"h-12 w-12 text-primary"})}),n.jsx("p",{className:"text-muted-foreground mb-2 font-medium",children:"No MCP servers configured"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a server to get started with Model Context Protocol"})]}):n.jsx("div",{className:"space-y-6",children:Object.entries(g).map(([N,C])=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[S(N),n.jsx("span",{className:"font-medium",children:w(N)}),n.jsxs("span",{className:"text-muted-foreground/60",children:["(",C.length,")"]})]}),n.jsx(Te,{children:n.jsx("div",{className:"space-y-2",children:C.map(_)})})]},N))})]})},fk=({onServerAdded:t,onError:e})=>{const[s,r]=f.useState("stdio"),[a,i]=f.useState(!1),o=vs(),[l,c]=f.useState(""),[d,u]=f.useState(""),[h,m]=f.useState(""),[p,g]=f.useState("local"),[x,b]=f.useState([]),[y,v]=f.useState(""),[j,S]=f.useState(""),[w,_]=f.useState("local"),[N,C]=f.useState([]),P=z=>{const re={id:`env-${Date.now()}`,key:"",value:""};z==="stdio"?b(A=>[...A,re]):C(A=>[...A,re])},O=(z,re,A,F)=>{z==="stdio"?b(ee=>ee.map(D=>D.id===re?{...D,[A]:F}:D)):C(ee=>ee.map(D=>D.id===re?{...D,[A]:F}:D))},B=(z,re)=>{z==="stdio"?b(A=>A.filter(F=>F.id!==re)):C(A=>A.filter(F=>F.id!==re))},U=async()=>{if(!l.trim()){e("Server name is required");return}if(!d.trim()){e("Command is required");return}try{i(!0);const z=h.trim()?h.split(/\s+/):[],re=x.reduce((F,{key:ee,value:D})=>(ee.trim()&&D.trim()&&(F[ee]=D),F),{}),A=await X.mcpAdd(l,"stdio",d,z,re,void 0,p);A.success?(o.mcpServerAdded({server_type:"stdio",configuration_method:"manual"}),c(""),u(""),m(""),b([]),g("local"),t()):e(A.message)}catch(z){e("Failed to add server"),console.error("Failed to add stdio server:",z)}finally{i(!1)}},G=async()=>{if(!y.trim()){e("Server name is required");return}if(!j.trim()){e("URL is required");return}try{i(!0);const z=N.reduce((A,{key:F,value:ee})=>(F.trim()&&ee.trim()&&(A[F]=ee),A),{}),re=await X.mcpAdd(y,"sse",void 0,[],z,j,w);re.success?(o.mcpServerAdded({server_type:"sse",configuration_method:"manual"}),v(""),S(""),C([]),_("local"),t()):e(re.message)}catch(z){e("Failed to add server"),console.error("Failed to add SSE server:",z)}finally{i(!1)}},R=(z,re)=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ce,{className:"text-sm font-medium",children:"Environment Variables"}),n.jsxs(L,{variant:"outline",size:"sm",onClick:()=>P(z),className:"gap-2",children:[n.jsx(nt,{className:"h-3 w-3"}),"Add Variable"]})]}),re.length>0&&n.jsx("div",{className:"space-y-2",children:re.map(A=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xe,{placeholder:"KEY",value:A.key,onChange:F=>O(z,A.id,"key",F.target.value),className:"flex-1 font-mono text-sm"}),n.jsx("span",{className:"text-muted-foreground",children:"="}),n.jsx(xe,{placeholder:"value",value:A.value,onChange:F=>O(z,A.id,"value",F.target.value),className:"flex-1 font-mono text-sm"}),n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>B(z,A.id),className:"h-8 w-8 hover:text-destructive",children:n.jsx(Nt,{className:"h-4 w-4"})})]},A.id))})]});return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold",children:"Add MCP Server"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure a new Model Context Protocol server"})]}),n.jsxs(Ds,{value:s,onValueChange:z=>r(z),children:[n.jsxs(xs,{className:"grid w-full grid-cols-2 max-w-sm mb-6",children:[n.jsxs(Ne,{value:"stdio",className:"gap-2",children:[n.jsx(dt,{className:"h-4 w-4 text-amber-500"}),"Stdio"]}),n.jsxs(Ne,{value:"sse",className:"gap-2",children:[n.jsx(Vt,{className:"h-4 w-4 text-emerald-500"}),"SSE"]})]}),n.jsx(ke,{value:"stdio",className:"space-y-6",children:n.jsxs(se,{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"stdio-name",children:"Server Name"}),n.jsx(xe,{id:"stdio-name",placeholder:"my-server",value:l,onChange:z=>c(z.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A unique name to identify this server"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"stdio-command",children:"Command"}),n.jsx(xe,{id:"stdio-command",placeholder:"/path/to/server",value:d,onChange:z=>u(z.target.value),className:"font-mono"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The command to execute the server"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"stdio-args",children:"Arguments (optional)"}),n.jsx(xe,{id:"stdio-args",placeholder:"arg1 arg2 arg3",value:h,onChange:z=>m(z.target.value),className:"font-mono"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Space-separated command arguments"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"stdio-scope",children:"Scope"}),n.jsx(bo,{value:p,onValueChange:z=>g(z),options:[{value:"local",label:"Local (this project only)"},{value:"project",label:"Project (shared via .mcp.json)"},{value:"user",label:"User (all projects)"}]})]}),R("stdio",x)]}),n.jsx("div",{className:"pt-2",children:n.jsx(L,{onClick:U,disabled:a,className:"w-full gap-2 bg-primary hover:bg-primary/90",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 animate-spin"}),"Adding Server..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4"}),"Add Stdio Server"]})})})]})}),n.jsx(ke,{value:"sse",className:"space-y-6",children:n.jsxs(se,{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"sse-name",children:"Server Name"}),n.jsx(xe,{id:"sse-name",placeholder:"sse-server",value:y,onChange:z=>v(z.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"A unique name to identify this server"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"sse-url",children:"URL"}),n.jsx(xe,{id:"sse-url",placeholder:"https://example.com/sse-endpoint",value:j,onChange:z=>S(z.target.value),className:"font-mono"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The SSE endpoint URL"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ce,{htmlFor:"sse-scope",children:"Scope"}),n.jsx(bo,{value:w,onValueChange:z=>_(z),options:[{value:"local",label:"Local (this project only)"},{value:"project",label:"Project (shared via .mcp.json)"},{value:"user",label:"User (all projects)"}]})]}),R("sse",N)]}),n.jsx("div",{className:"pt-2",children:n.jsx(L,{onClick:G,disabled:a,className:"w-full gap-2 bg-primary hover:bg-primary/90",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 animate-spin"}),"Adding Server..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4"}),"Add SSE Server"]})})})]})})]}),n.jsx(se,{className:"p-4 bg-muted/30",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[n.jsx(Ot,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Example Commands"})]}),n.jsx("div",{className:"space-y-2 text-xs text-muted-foreground",children:n.jsxs("div",{className:"font-mono bg-background p-2 rounded",children:[n.jsx("p",{children:' Postgres: /path/to/postgres-mcp-server --connection-string "postgresql://..."'}),n.jsx("p",{children:" Weather API: /usr/local/bin/weather-cli --api-key ABC123"}),n.jsx("p",{children:" SSE Server: https://api.example.com/mcp/stream"})]})})]})})]})},gk=({onImportCompleted:t,onError:e})=>{const[s,r]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState("local"),c=async()=>{try{r(!0);const m=await X.mcpAddFromClaudeDesktop("user");if(m.servers&&m.servers.length>0){const p=m.servers.filter(x=>x.success),g=m.servers.filter(x=>!x.success);if(p.length>0){const x=`Successfully imported: ${p.map(b=>b.name).join(", ")}`;t(m.imported_count,m.failed_count),g.length===0&&e(x)}if(g.length>0){const x=g.map(b=>`${b.name}: ${b.error||"Unknown error"}`).join(`
`);e(`Failed to import some servers:
${x}`)}}else t(m.imported_count,m.failed_count)}catch(m){console.error("Failed to import from Claude Desktop:",m),e(m.toString()||"Failed to import from Claude Desktop")}finally{r(!1)}},d=async m=>{var g;const p=(g=m.target.files)==null?void 0:g[0];if(p)try{i(!0);const x=await p.text();let b;try{b=JSON.parse(x)}catch{e("Invalid JSON file. Please check the format.");return}if(b.mcpServers){let y=0,v=0;for(const[j,S]of Object.entries(b.mcpServers))try{const w={type:"stdio",command:S.command,args:S.args||[],env:S.env||{}};(await X.mcpAddJson(j,JSON.stringify(w),o)).success?y++:v++}catch{v++}t(y,v)}else if(b.type&&b.command){const y=prompt("Enter a name for this server:");if(!y)return;const v=await X.mcpAddJson(y,x,o);v.success?t(1,0):e(v.message)}else e("Unrecognized JSON format. Expected MCP server configuration.")}catch(x){console.error("Failed to import JSON:",x),e("Failed to import JSON file")}finally{i(!1),m.target.value=""}},u=()=>{e("Export functionality coming soon!")},h=async()=>{try{await X.mcpServe(),e("Claude Code MCP server started. You can now connect to it from other applications.")}catch(m){console.error("Failed to start MCP server:",m),e("Failed to start Claude Code as MCP server")}};return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold",children:"Import & Export"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Import MCP servers from other sources or export your configuration"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(se,{className:"p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(wp,{className:"h-4 w-4 text-slate-500"}),n.jsx(ce,{className:"text-sm font-medium",children:"Import Scope"})]}),n.jsx(bo,{value:o,onValueChange:m=>l(m),options:[{value:"local",label:"Local (this project only)"},{value:"project",label:"Project (shared via .mcp.json)"},{value:"user",label:"User (all projects)"}]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose where to save imported servers from JSON files"})]})}),n.jsx(se,{className:"p-4 hover:bg-accent/5 transition-colors",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2.5 bg-blue-500/10 rounded-lg",children:n.jsx(an,{className:"h-5 w-5 text-blue-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Import from Claude Desktop"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically imports all MCP servers from Claude Desktop. Installs to user scope (available across all projects)."})]})]}),n.jsx(L,{onClick:c,disabled:s,className:"w-full gap-2 bg-primary hover:bg-primary/90",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(an,{className:"h-4 w-4"}),"Import from Claude Desktop"]})})]})}),n.jsx(se,{className:"p-4 hover:bg-accent/5 transition-colors",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2.5 bg-purple-500/10 rounded-lg",children:n.jsx(Ke,{className:"h-5 w-5 text-purple-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Import from JSON"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Import server configuration from a JSON file"})]})]}),n.jsxs("div",{children:[n.jsx("input",{type:"file",accept:".json",onChange:d,disabled:a,className:"hidden",id:"json-file-input"}),n.jsx(L,{onClick:()=>{var m;return(m=document.getElementById("json-file-input"))==null?void 0:m.click()},disabled:a,className:"w-full gap-2",variant:"outline",children:a?n.jsxs(n.Fragment,{children:[n.jsx(ye,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"h-4 w-4"}),"Choose JSON File"]})})]})]})}),n.jsx(se,{className:"p-4 opacity-60",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2.5 bg-muted rounded-lg",children:n.jsx(Na,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Export Configuration"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Export your MCP server configuration"})]})]}),n.jsxs(L,{onClick:u,disabled:!0,variant:"secondary",className:"w-full gap-2",children:[n.jsx(Na,{className:"h-4 w-4"}),"Export (Coming Soon)"]})]})}),n.jsx(se,{className:"p-4 border-primary/20 bg-primary/5 hover:bg-primary/10 transition-colors",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2.5 bg-green-500/20 rounded-lg",children:n.jsx(Mr,{className:"h-5 w-5 text-green-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Use Claude Code as MCP Server"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Start Claude Code as an MCP server that other applications can connect to"})]})]}),n.jsxs(L,{onClick:h,variant:"outline",className:"w-full gap-2 border-green-500/20 hover:bg-green-500/10 hover:text-green-600 hover:border-green-500/50",children:[n.jsx(Mr,{className:"h-4 w-4"}),"Start MCP Server"]})]})})]}),n.jsx(se,{className:"p-4 bg-muted/30",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[n.jsx(Ot,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"JSON Format Examples"})]}),n.jsxs("div",{className:"space-y-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Single server:"}),n.jsx("pre",{className:"bg-background p-3 rounded-lg overflow-x-auto",children:`{
  "type": "stdio",
  "command": "/path/to/server",
  "args": ["--arg1", "value"],
  "env": { "KEY": "value" }
}`})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-muted-foreground mb-1",children:"Multiple servers (.mcp.json format):"}),n.jsx("pre",{className:"bg-background p-3 rounded-lg overflow-x-auto",children:`{
  "mcpServers": {
    "server1": {
      "command": "/path/to/server1",
      "args": [],
      "env": {}
    },
    "server2": {
      "command": "/path/to/server2",
      "args": ["--port", "8080"],
      "env": { "API_KEY": "..." }
    }
  }
}`})]})]})]})})]})},lg=({className:t})=>{const[e,s]=f.useState("servers"),[r,a]=f.useState([]),[i,o]=f.useState(!0),[l,c]=f.useState(null),[d,u]=f.useState(null);f.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0),c(null),console.log("MCPManager: Loading servers...");const x=await X.mcpList();console.log("MCPManager: Received server list:",x),console.log("MCPManager: Server count:",x.length),a(x)}catch(x){console.error("MCPManager: Failed to load MCP servers:",x),c("Failed to load MCP servers. Make sure Claude Code is installed.")}finally{o(!1)}},m=()=>{h(),u({message:"MCP server added successfully!",type:"success"}),s("servers")},p=x=>{a(b=>b.filter(y=>y.name!==x)),u({message:`Server "${x}" removed successfully!`,type:"success"})},g=(x,b)=>{h(),u(b===0?{message:`Successfully imported ${x} server${x>1?"s":""}!`,type:"success"}:{message:`Imported ${x} server${x>1?"s":""}, ${b} failed`,type:"error"})};return n.jsxs("div",{className:"h-full overflow-y-auto",children:[n.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col h-full",children:[n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-heading-1",children:"MCP Servers"}),n.jsx("p",{className:"mt-1 text-body-small text-muted-foreground",children:"Manage Model Context Protocol servers"})]})})}),n.jsx(Te,{children:l&&n.jsxs(K.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mx-6 mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/50 flex items-center gap-2 text-body-small text-destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),l]})}),i?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(ye,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.jsxs(Ds,{value:e,onValueChange:s,className:"w-full",children:[n.jsxs(xs,{className:"grid grid-cols-3 w-full max-w-md mb-6 h-auto p-1",children:[n.jsx(Ne,{value:"servers",className:"py-2.5 px-3",children:"Servers"}),n.jsx(Ne,{value:"add",className:"py-2.5 px-3",children:"Add Server"}),n.jsx(Ne,{value:"import",className:"py-2.5 px-3",children:"Import/Export"})]}),n.jsx(ke,{value:"servers",className:"space-y-6 mt-6",children:n.jsx(se,{children:n.jsx(pk,{servers:r,loading:!1,onServerRemoved:p,onRefresh:h})})}),n.jsx(ke,{value:"add",className:"space-y-6 mt-6",children:n.jsx(se,{children:n.jsx(fk,{onServerAdded:m,onError:x=>u({message:x,type:"error"})})})}),n.jsx(ke,{value:"import",className:"space-y-6 mt-6",children:n.jsx(se,{className:"overflow-hidden",children:n.jsx(gk,{onImportCompleted:g,onError:x=>u({message:x,type:"error"})})})})]})})]}),n.jsx(gs,{children:d&&n.jsx(fs,{message:d.message,type:d.type,onDismiss:()=>u(null)})})]})},xk=Object.freeze(Object.defineProperty({__proto__:null,MCPManager:lg},Symbol.toStringTag,{value:"Module"}));async function Qu(t,e){await jr("plugin:opener|open_url",{url:t,with:e})}const cg="/assets/asterisk-logo-B09BSk2Z.png",vk="/assets/opcode-nfo-CGCcrpzI.ogg",yk=({onClose:t})=>{const e=f.useRef(null),s=f.useRef(null),[r,a]=f.useState(!1),[i,o]=f.useState(0);f.useEffect(()=>{const d=new Audio(vk);return d.loop=!0,d.volume=.7,d.muted=!0,e.current=d,d.play().then(()=>{d.muted=!1}).catch(u=>{console.error("Audio autoplay failed:",u)}),()=>{e.current&&(e.current.pause(),e.current.src="",e.current=null)}},[]);const l=()=>{e.current&&(e.current.muted=!r,a(!r))};f.useEffect(()=>{const d=setInterval(()=>{o(u=>u+1)},30);return()=>clearInterval(d)},[]),f.useEffect(()=>{if(s.current){const d=s.current.scrollHeight-s.current.clientHeight;i>=d?(o(0),s.current.scrollTop=0):s.current.scrollTop=i}},[i]);const c=[{type:"header",text:"opcode v0.2.1"},{type:"subheader",text:"[ A STRATEGIC PROJECT BY ASTERISK ]"},{type:"spacer"},{type:"section",title:" CREDITS "},{type:"credit",role:"POWERED BY",name:"Anthropic Claude 4"},{type:"credit",role:"CLAUDE CODE",name:"The Ultimate Coding Assistant"},{type:"credit",role:"MCP PROTOCOL",name:"Model Context Protocol"},{type:"spacer"},{type:"section",title:" DEPENDENCIES "},{type:"credit",role:"RUNTIME",name:"Tauri Framework"},{type:"credit",role:"UI FRAMEWORK",name:"React + TypeScript"},{type:"credit",role:"STYLING",name:"Tailwind CSS + shadcn/ui"},{type:"credit",role:"ANIMATIONS",name:"Framer Motion"},{type:"credit",role:"BUILD TOOL",name:"Vite"},{type:"credit",role:"PACKAGE MANAGER",name:"Bun"},{type:"spacer"},{type:"section",title:" SPECIAL THANKS "},{type:"text",content:"To the open source community"},{type:"text",content:"To all the beta testers"},{type:"text",content:"To everyone who believed in this project"},{type:"spacer"},{type:"ascii",content:`
      .   .    .    
       .   .   . 
      . 
      .
              .      
    `},{type:"spacer"},{type:"text",content:"Remember: Sharing is caring!"},{type:"text",content:"Support the developers!"},{type:"spacer"},{type:"spacer"},{type:"spacer"}];return n.jsx(Te,{children:n.jsxs(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center",children:[n.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md",onClick:t}),n.jsx(K.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative z-10",children:n.jsxs(se,{className:"w-[600px] h-[500px] bg-background border-border shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-card border-b border-border",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("div",{className:"text-sm font-bold tracking-wider font-mono text-foreground",children:"opcode.NFO"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:async d=>{d.stopPropagation(),await Qu("https://github.com/getAsterisk/opcode/issues/new")},className:"flex items-center gap-1 h-auto px-2 py-1",title:"File a bug",children:[n.jsx(fp,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs",children:"File a bug"})]}),n.jsx(L,{variant:"ghost",size:"sm",onClick:d=>{d.stopPropagation(),l()},className:"h-6 w-6 p-0",children:r?n.jsx(Vj,{className:"h-4 w-4"}):n.jsx($j,{className:"h-4 w-4"})}),n.jsx(L,{variant:"ghost",size:"sm",onClick:d=>{d.stopPropagation(),t()},className:"h-6 w-6 p-0",children:n.jsx(Ut,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"relative h-[calc(100%-40px)] bg-background overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-background z-10 pb-4 text-center",children:[n.jsx("button",{className:"inline-block mt-4 hover:scale-110 transition-transform cursor-pointer",onClick:async d=>{d.stopPropagation(),await Qu("https://asterisk.so")},children:n.jsx("img",{src:cg,alt:"Asterisk",className:"h-20 w-auto mx-auto filter brightness-0 invert opacity-90"})}),n.jsx("div",{className:"text-muted-foreground text-sm font-mono mt-2 tracking-wider",children:"A strategic project by Asterisk"})]}),n.jsx("div",{ref:s,className:"absolute inset-0 top-32 overflow-hidden",style:{fontFamily:"'Courier New', monospace"},children:n.jsx("div",{className:"px-8 pb-32",children:c.map((d,u)=>{switch(d.type){case"header":return n.jsx("div",{className:"text-foreground text-3xl font-bold text-center mb-2 tracking-widest",children:d.text},u);case"subheader":return n.jsx("div",{className:"text-muted-foreground text-lg text-center mb-8 tracking-wide",children:d.text},u);case"section":return n.jsx("div",{className:"text-foreground text-xl font-bold text-center my-6 tracking-wider",children:d.title},u);case"credit":return n.jsxs("div",{className:"flex justify-between items-center mb-2 text-foreground",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.role,":"]}),n.jsx("span",{className:"text-base tracking-wide",children:d.name})]},u);case"text":return n.jsx("div",{className:"text-muted-foreground text-center text-sm mb-2",children:d.content},u);case"ascii":return n.jsx("pre",{className:"text-foreground text-xs text-center my-6 leading-tight opacity-80",children:d.content},u);case"spacer":return n.jsx("div",{className:"h-8"},u);default:return null}})})}),n.jsx("div",{className:"absolute inset-0 pointer-events-none",children:n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-foreground/[0.02] to-transparent animate-scanlines"})})]})]})})]})})};function bk({open:t,onOpenChange:e,onSuccess:s,onError:r}){const[a,i]=f.useState(null),[o,l]=f.useState(!1),[c,d]=f.useState(!0),[u,h]=f.useState(!0);f.useEffect(()=>{t&&m()},[t]);const m=async()=>{try{h(!0);const g=await X.listClaudeInstallations();d(g.length>0)}catch{d(!1)}finally{h(!1)}},p=async()=>{if(!a){r("Please select a Claude installation");return}l(!0);try{await X.setClaudeBinaryPath(a.path),s(),e(!1)}catch(g){console.error("Failed to save Claude binary path:",g),r(g instanceof Error?g.message:"Failed to save Claude binary path")}finally{l(!1)}};return n.jsx(yt,{open:t,onOpenChange:e,children:n.jsxs(mt,{className:"sm:max-w-[600px]",children:[n.jsxs(bt,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(vb,{className:"w-5 h-5"}),"Select Claude Code Installation"]}),n.jsxs(Gt,{className:"space-y-3 mt-4",children:[u?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(ye,{className:"h-6 w-6 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching for Claude installations..."})]}):c?n.jsx("p",{children:"Multiple Claude Code installations were found on your system. Please select which one you'd like to use."}):n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"Claude Code was not found in any of the common installation locations. Please install Claude Code to continue."}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[n.jsx(qe,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Searched locations:"})," PATH, /usr/local/bin, /opt/homebrew/bin, ~/.nvm/versions/node/*/bin, ~/.claude/local, ~/.local/bin"]})]})]}),!u&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[n.jsx(dt,{className:"w-4 h-4 text-muted-foreground"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Tip:"})," You can install Claude Code using"," ",n.jsx("code",{className:"px-1 py-0.5 bg-black/10 dark:bg-white/10 rounded",children:"npm install -g @claude"})]})]})]})]}),!u&&c&&n.jsx("div",{className:"py-4",children:n.jsx(Lp,{onSelect:g=>i(g),selectedPath:null})}),n.jsxs(Wt,{className:"gap-3",children:[n.jsxs(L,{variant:"outline",onClick:()=>window.open("https://docs.claude.ai/claude/how-to-install","_blank"),className:"mr-auto",children:[n.jsx(fb,{className:"w-4 h-4 mr-2"}),"Installation Guide"]}),n.jsx(L,{variant:"outline",onClick:()=>e(!1),disabled:o,children:"Cancel"}),n.jsx(L,{onClick:p,disabled:o||!a||!c,children:o?"Validating...":c?"Save Selection":"No Installations Found"})]})]})})}const jk=({project:t,onBack:e,className:s})=>{const[r,a]=f.useState("commands"),[i,o]=f.useState(null),[l,c]=f.useState(!0);f.useEffect(()=>{d()},[t]);const d=async()=>{try{const h=`${t.path}/.gitignore`,m=await X.readClaudeMdFile(h);c(m.includes(".claude/settings.local.json"))}catch{c(!1)}},u=async()=>{try{const h=`${t.path}/.gitignore`;let m="";try{m=await X.readClaudeMdFile(h)}catch{}m.includes(".claude/settings.local.json")||(m+=`
# Claude local settings (machine-specific)
.claude/settings.local.json
`,await X.saveClaudeMdFile(h,m),c(!0),o({message:"Added to .gitignore",type:"success"}))}catch(h){console.error("Failed to update .gitignore:",h),o({message:"Failed to update .gitignore",type:"error"})}};return n.jsxs("div",{className:V("flex flex-col h-full",s),children:[n.jsxs("div",{className:"border-b px-6 py-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(L,{variant:"ghost",size:"sm",onClick:e,children:[n.jsx(pn,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qn,{className:"h-5 w-5 text-muted-foreground"}),n.jsx("h2",{className:"text-xl font-semibold",children:"Project Settings"})]})]})}),n.jsx("div",{className:"mt-4 flex items-center gap-4 text-sm text-muted-foreground",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-mono",children:t.path})]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:n.jsx("div",{className:"p-6",children:n.jsxs(Ds,{value:r,onValueChange:a,children:[n.jsxs(xs,{className:"mb-6",children:[n.jsxs(Ne,{value:"commands",className:"gap-2",children:[n.jsx(Ya,{className:"h-4 w-4"}),"Slash Commands"]}),n.jsxs(Ne,{value:"project",className:"gap-2",children:[n.jsx(Dn,{className:"h-4 w-4"}),"Project Hooks"]}),n.jsxs(Ne,{value:"local",className:"gap-2",children:[n.jsx(ei,{className:"h-4 w-4"}),"Local Hooks"]})]}),n.jsx(ke,{value:"commands",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Slash Commands"}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Custom commands that are specific to this project. These commands are stored in",n.jsx("code",{className:"mx-1 px-2 py-1 bg-muted rounded text-xs",children:".claude/slash-commands/"}),"and can be committed to version control."]})]}),n.jsx(Zf,{projectPath:t.path,scopeFilter:"project"})]})})}),n.jsx(ke,{value:"project",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Project Hooks"}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["These hooks apply to all users working on this project. They are stored in",n.jsx("code",{className:"mx-1 px-2 py-1 bg-muted rounded text-xs",children:".claude/settings.json"}),"and should be committed to version control."]})]}),n.jsx(Pr,{projectPath:t.path,scope:"project"})]})})}),n.jsx(ke,{value:"local",className:"space-y-6",children:n.jsx(se,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Local Hooks"}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["These hooks only apply to your machine. They are stored in",n.jsx("code",{className:"mx-1 px-2 py-1 bg-muted rounded text-xs",children:".claude/settings.local.json"}),"and should NOT be committed to version control."]}),!l&&n.jsxs("div",{className:"flex items-center gap-4 p-3 bg-yellow-500/10 rounded-md",children:[n.jsx(An,{className:"h-5 w-5 text-yellow-600"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-yellow-600",children:"Local settings file is not in .gitignore"})}),n.jsx(L,{size:"sm",variant:"outline",onClick:u,children:"Add to .gitignore"})]})]}),n.jsx(Pr,{projectPath:t.path,scope:"local"})]})})})]})})}),n.jsx(gs,{children:i&&n.jsx(fs,{message:i.message,type:i.type,onDismiss:()=>o(null)})})]})},_k=({tab:t,isActive:e,onClose:s,onClick:r,isDragging:a=!1,setDraggedTabId:i})=>{const[o,l]=f.useState(!1),c=()=>{switch(t.type){case"chat":return wa;case"agent":case"agents":return ts;case"projects":return Xa;case"usage":return cp;case"mcp":return _p;case"settings":return qn;case"claude-md":case"claude-file":return Ke;case"agent-execution":case"create-agent":case"import-agent":return ts;default:return wa}},d=()=>{switch(t.status){case"running":return n.jsx(ye,{className:"w-3 h-3 animate-spin"});case"error":return n.jsx(qe,{className:"w-3 h-3 text-red-500"});default:return null}},u=c(),h=d();return n.jsxs(F1,{value:t,id:t.id,dragListener:!0,transition:{duration:.1},className:V("relative flex items-center gap-2 text-sm cursor-pointer select-none group","transition-colors duration-100 overflow-hidden border-r border-border/20","before:absolute before:bottom-0 before:left-0 before:right-0 before:h-0.5 before:transition-colors before:duration-100",e?"bg-card text-card-foreground before:bg-primary":"bg-transparent text-muted-foreground hover:bg-muted/40 hover:text-foreground before:bg-transparent",a&&"bg-card border-primary/50 shadow-sm z-50","min-w-[120px] max-w-[220px] h-8 px-3"),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:()=>r(t.id),onDragStart:()=>i==null?void 0:i(t.id),onDragEnd:()=>i==null?void 0:i(null),children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(u,{className:"w-4 h-4"})}),n.jsx("span",{className:"flex-1 truncate text-xs font-medium min-w-0",children:t.title}),n.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 w-6 justify-end",children:[h&&n.jsx("span",{className:"flex items-center justify-center",children:h}),t.hasUnsavedChanges&&!h&&n.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full",title:"Unsaved changes"})]}),n.jsx("button",{onClick:m=>{m.stopPropagation(),s(t.id)},className:V("flex-shrink-0 w-4 h-4 flex items-center justify-center rounded-sm","transition-all duration-100 hover:bg-destructive/20 hover:text-destructive","focus:outline-none focus:ring-1 focus:ring-destructive/50",o||e?"opacity-100":"opacity-0"),title:`Close ${t.title}`,tabIndex:-1,children:n.jsx(Ut,{className:"w-3 h-3"})})]})},wk=({className:t})=>{const{tabs:e,activeTabId:s,createChatTab:r,createProjectsTab:a,closeTab:i,switchToTab:o,canAddTab:l}=Wn(),{reorderTabs:c}=Cp(),d=f.useRef(null),[u,h]=f.useState(!1),[m,p]=f.useState(!1),[g,x]=f.useState(null),b=vs();f.useEffect(()=>{const _=N=>{const{tabId:C}=N.detail;o(C)};return window.addEventListener("switch-to-tab",_),()=>{window.removeEventListener("switch-to-tab",_)}},[o]),f.useEffect(()=>{const _=()=>{a(),b.tabCreated("projects")},N=async()=>{if(s){const B=e.find(U=>U.id===s);B&&b.tabClosed(B.type),await i(s)}},C=()=>{const U=(e.findIndex(G=>G.id===s)+1)%e.length;e[U]&&o(e[U].id)},P=()=>{const B=e.findIndex(G=>G.id===s),U=B===0?e.length-1:B-1;e[U]&&o(e[U].id)},O=B=>{const{index:U}=B.detail;e[U]&&o(e[U].id)};return window.addEventListener("create-chat-tab",_),window.addEventListener("close-current-tab",N),window.addEventListener("switch-to-next-tab",C),window.addEventListener("switch-to-previous-tab",P),window.addEventListener("switch-to-tab-by-index",O),()=>{window.removeEventListener("create-chat-tab",_),window.removeEventListener("close-current-tab",N),window.removeEventListener("switch-to-next-tab",C),window.removeEventListener("switch-to-previous-tab",P),window.removeEventListener("switch-to-tab-by-index",O)}},[e,s,r,i,o]);const y=()=>{const _=d.current;if(!_)return;const{scrollLeft:N,scrollWidth:C,clientWidth:P}=_;h(N>0),p(N+P<C-1)};f.useEffect(()=>{y();const _=d.current;if(_)return _.addEventListener("scroll",y),window.addEventListener("resize",y),()=>{_.removeEventListener("scroll",y),window.removeEventListener("resize",y)}},[e]);const v=_=>{var U;const N=e.map(G=>G.id),C=_.map(G=>G.id),P=C.find((G,R)=>N[R]!==G);if(!P)return;const O=N.indexOf(P),B=C.indexOf(P);O!==-1&&B!==-1&&O!==B&&(c(O,B),(U=b.featureUsed)==null||U.call(b,"tab_reorder","drag_drop",{from_index:O,to_index:B}))},j=async _=>{const N=e.find(C=>C.id===_);N&&b.tabClosed(N.type),await i(_)},S=()=>{l()&&(a(),b.tabCreated("projects"))},w=_=>{const N=d.current;if(!N)return;const C=200,P=_==="left"?N.scrollLeft-C:N.scrollLeft+C;N.scrollTo({left:P,behavior:"smooth"})};return n.jsxs("div",{className:V("flex items-stretch bg-muted/15 relative border-b border-border/50",t),children:[u&&n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-muted/15 to-transparent pointer-events-none z-10"}),n.jsx(Te,{children:u&&n.jsx(K.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w("left"),className:V("p-1.5 hover:bg-muted/80 rounded-sm z-20 ml-1","transition-colors duration-200 flex items-center justify-center","bg-background/80 backdrop-blur-sm shadow-sm border border-border/50"),title:"Scroll tabs left",children:n.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{d:"M15 18l-6-6 6-6",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})})}),n.jsx("div",{ref:d,className:"flex-1 flex overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.jsxs("div",{className:"flex items-stretch h-8",children:[n.jsx(A1,{axis:"x",values:e,onReorder:v,className:"flex items-stretch",layoutScroll:!1,children:e.map(_=>n.jsx(_k,{tab:_,isActive:_.id===s,onClose:j,onClick:o,isDragging:g===_.id,setDraggedTabId:x},_.id))}),n.jsx(K.button,{onClick:S,disabled:!l(),whileTap:l()?{scale:.97}:{},transition:{duration:.15},className:V("px-2 mx-1 rounded-md flex items-center justify-center flex-shrink-0","bg-background/50 backdrop-blur-sm h-8",l()?"hover:bg-muted/60 text-muted-foreground hover:text-foreground":"opacity-50 cursor-not-allowed text-muted-foreground"),title:l()?"New project (Ctrl+T)":"Maximum tabs reached",children:n.jsx(nt,{className:"w-4 h-4"})})]})}),m&&n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-muted/15 to-transparent pointer-events-none z-10"}),n.jsx(Te,{children:m&&n.jsx(K.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w("right"),className:V("p-1.5 hover:bg-muted/80 rounded-sm z-20 mr-1","transition-colors duration-200 flex items-center justify-center","bg-background/80 backdrop-blur-sm shadow-sm border border-border/50"),title:"Scroll tabs right",children:n.jsx("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:n.jsx("path",{d:"M9 18l6-6-6-6",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})})})]})},Nk=f.lazy(()=>zt(()=>import("./ClaudeCodeSession-DW2s5krf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(t=>({default:t.ClaudeCodeSession}))),kk=f.lazy(()=>zt(()=>import("./AgentRunOutputViewer-YvEsupIb.js"),__vite__mapDeps([9,1,2,3,4,6,7,8,5]))),Sk=f.lazy(()=>zt(()=>Promise.resolve().then(()=>lk),void 0).then(t=>({default:t.AgentExecution}))),Ck=f.lazy(()=>zt(()=>Promise.resolve().then(()=>mN),void 0).then(t=>({default:t.CreateAgent}))),Ek=f.lazy(()=>zt(()=>import("./Agents-HbHJAPo1.js"),__vite__mapDeps([10,6,1,2,7,8,3,5])).then(t=>({default:t.Agents}))),Tk=f.lazy(()=>zt(()=>Promise.resolve().then(()=>mk),void 0).then(t=>({default:t.UsageDashboard}))),Mk=f.lazy(()=>zt(()=>Promise.resolve().then(()=>xk),void 0).then(t=>({default:t.MCPManager}))),Ak=f.lazy(()=>zt(()=>Promise.resolve().then(()=>nN),void 0).then(t=>({default:t.Settings}))),Pk=f.lazy(()=>zt(()=>Promise.resolve().then(()=>y_),void 0).then(t=>({default:t.MarkdownEditor}))),Rk=({tab:t,isActive:e})=>{const{updateTab:s}=Wn(),[r,a]=He.useState([]),[i,o]=He.useState(null),[l,c]=He.useState([]),[d,u]=He.useState(!1);Z2(e?t.type:void 0,e?t.id:void 0);const[h,m]=He.useState(null);f.useEffect(()=>{e&&t.type==="projects"&&p()},[e,t.type]);const p=async()=>{try{u(!0),m(null);const j=await X.listProjects();a(j)}catch(j){console.error("Failed to load projects:",j),m("Failed to load projects. Please ensure ~/.claude directory exists.")}finally{u(!1)}},g=async j=>{try{u(!0),m(null);const S=await X.getProjectSessions(j.id);c(S),o(j);const w=j.path.split("/").pop()||"Project";s(t.id,{title:w})}catch(S){console.error("Failed to load sessions:",S),m("Failed to load sessions for this project.")}finally{u(!1)}},x=async()=>{console.log("handleOpenProject called");try{const{open:j}=await zt(async()=>{const{open:w}=await import("./tauri-KcdjxZBy.js").then(_=>_.b);return{open:w}},[]),S=await j({directory:!0,multiple:!1,title:"Select Project Folder",defaultPath:await X.getHomeDirectory()});if(console.log("Selected folder:",S),S&&typeof S=="string"){const w=await X.createProject(S);await p(),await g(w)}}catch(j){console.error("Failed to open folder picker:",j),m("Failed to open folder picker")}},b=()=>{if(i){const j=i.path.split("/").pop()||"Session";s(t.id,{type:"chat",title:j,sessionId:void 0,sessionData:void 0,initialProjectPath:i.path})}else s(t.id,{type:"chat",title:"New Session",sessionId:void 0,sessionData:void 0,initialProjectPath:void 0})},y=e?"":"hidden",v=()=>{switch(t.type){case"projects":return n.jsx("div",{className:"h-full",children:i?n.jsx("div",{className:"h-full overflow-y-auto",children:n.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsx(L,{variant:"ghost",size:"icon",onClick:()=>{o(null),c([]),s(t.id,{title:"Projects"})},className:"h-8 w-8 -ml-2",title:"Back to Projects",children:n.jsx(pn,{className:"h-4 w-4"})})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:i.path.split("/").pop()}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:`${l.length} session${l.length!==1?"s":""}`})]})]}),n.jsx(K.div,{whileTap:{scale:.97},transition:{duration:.15},children:n.jsxs(L,{onClick:b,size:"default",children:[n.jsx(nt,{className:"mr-2 h-4 w-4"}),"New session"]})})]})}),h&&n.jsx(K.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},transition:{duration:.15},className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-xs text-destructive",children:h}),d&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(ye,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!d&&n.jsx(Rp,{sessions:l,projectPath:i.path,onSessionClick:j=>{s(t.id,{type:"chat",title:j.project_path.split("/").pop()||"Session",sessionId:j.id,sessionData:j,initialProjectPath:j.project_path})},onEditClaudeFile:j=>{window.dispatchEvent(new CustomEvent("open-claude-file",{detail:{file:j}}))}})]})}):n.jsx(Mp,{projects:r,onProjectClick:g,onOpenProject:x,loading:d})});case"chat":return n.jsx("div",{className:"h-full",children:n.jsx(Nk,{session:t.sessionData,initialProjectPath:t.initialProjectPath||t.sessionId,onBack:()=>{s(t.id,{type:"projects",title:"Projects"})},onProjectPathChange:j=>{const S=j.split("/").pop()||j.split("\\").pop()||"Session";s(t.id,{title:S})}})});case"agent":return t.agentRunId?n.jsx("div",{className:"h-full",children:n.jsx(kk,{agentRunId:t.agentRunId,tabId:t.id})}):n.jsx("div",{className:"h-full",children:n.jsx("div",{className:"p-4",children:"No agent run ID specified"})});case"agents":return n.jsx("div",{className:"h-full",children:n.jsx(Ek,{})});case"usage":return n.jsx("div",{className:"h-full",children:n.jsx(Tk,{onBack:()=>{}})});case"mcp":return n.jsx("div",{className:"h-full",children:n.jsx(Mk,{onBack:()=>{}})});case"settings":return n.jsx("div",{className:"h-full",children:n.jsx(Ak,{onBack:()=>{}})});case"claude-md":return n.jsx("div",{className:"h-full",children:n.jsx(Pk,{onBack:()=>{}})});case"claude-file":return t.claudeFileId?n.jsx("div",{className:"p-4",children:"Claude file editor not yet implemented in tabs"}):n.jsx("div",{className:"p-4",children:"No Claude file ID specified"});case"agent-execution":return t.agentData?n.jsx(Sk,{agent:t.agentData,projectPath:t.projectPath,tabId:t.id,onBack:()=>{}}):n.jsx("div",{className:"p-4",children:"No agent data specified"});case"create-agent":return n.jsx(Ck,{onAgentCreated:()=>{window.dispatchEvent(new CustomEvent("close-tab",{detail:{tabId:t.id}}))},onBack:()=>{window.dispatchEvent(new CustomEvent("close-tab",{detail:{tabId:t.id}}))}});case"import-agent":return n.jsx("div",{className:"h-full",children:n.jsx("div",{className:"p-4",children:"Import agent functionality coming soon..."})});default:return n.jsx("div",{className:"h-full",children:n.jsxs("div",{className:"p-4",children:["Unknown tab type: ",t.type]})})}};return n.jsx(n.Fragment,{children:n.jsx(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.15},className:`h-full w-full ${y}`,children:n.jsx(f.Suspense,{fallback:n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(ye,{className:"w-8 h-8 animate-spin text-muted-foreground"})}),children:v()})})})},Ik=()=>{const{tabs:t,activeTabId:e,createChatTab:s,createProjectsTab:r,findTabBySessionId:a,createClaudeFileTab:i,createAgentExecutionTab:o,createCreateAgentTab:l,createImportAgentTab:c,closeTab:d,updateTab:u}=Wn();return f.useEffect(()=>{const h=v=>{const{session:j}=v.detail,S=a(j.id);if(S)u(S.id,{sessionData:j,title:j.project_path.split("/").pop()||"Session"}),window.dispatchEvent(new CustomEvent("switch-to-tab",{detail:{tabId:S.id}}));else{const w=j.project_path.split("/").pop()||"Session",_=s(j.id,w,j.project_path);u(_,{sessionData:j,initialProjectPath:j.project_path})}},m=v=>{const{file:j}=v.detail;i(j.id,j.name||"CLAUDE.md")},p=v=>{const{agent:j,tabId:S,projectPath:w}=v.detail;o(j,S,w)},g=()=>{l()},x=()=>{c()},b=v=>{const{tabId:j}=v.detail;d(j)},y=v=>{const{session:j}=v.detail,S=a(j.id);if(S)u(S.id,{sessionData:j,title:j.project_path.split("/").pop()||"Session"}),window.dispatchEvent(new CustomEvent("switch-to-tab",{detail:{tabId:S.id}}));else{const w=t.find(_=>_.id===e);if(w&&w.type==="projects")u(w.id,{type:"chat",title:j.project_path.split("/").pop()||"Session",sessionId:j.id,sessionData:j,initialProjectPath:j.project_path});else{const _=j.project_path.split("/").pop()||"Session",N=s(j.id,_,j.project_path);u(N,{sessionData:j,initialProjectPath:j.project_path})}}};return window.addEventListener("open-session-in-tab",h),window.addEventListener("open-claude-file",m),window.addEventListener("open-agent-execution",p),window.addEventListener("open-create-agent-tab",g),window.addEventListener("open-import-agent-tab",x),window.addEventListener("close-tab",b),window.addEventListener("claude-session-selected",y),()=>{window.removeEventListener("open-session-in-tab",h),window.removeEventListener("open-claude-file",m),window.removeEventListener("open-agent-execution",p),window.removeEventListener("open-create-agent-tab",g),window.removeEventListener("open-import-agent-tab",x),window.removeEventListener("close-tab",b),window.removeEventListener("claude-session-selected",y)}},[s,a,i,o,l,c,d,u]),n.jsxs("div",{className:"flex-1 h-full relative",children:[n.jsx(Te,{mode:"wait",children:t.map(h=>n.jsx(Rk,{tab:h,isActive:h.id===e},h.id))}),t.length===0&&n.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg mb-2",children:"No projects open"}),n.jsx("p",{className:"text-sm mb-4",children:"Click to start a new project"}),n.jsxs(L,{onClick:()=>r(),size:"default",children:[n.jsx(nt,{className:"w-4 h-4 mr-2"}),"New Project"]})]})})]})},Fk="/assets/icon-Dd8oGGFb.png";function Dk({visible:t}){return n.jsx(Te,{children:t&&n.jsxs(K.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"fixed inset-0 z-[60] flex items-center justify-center bg-background","aria-hidden":"true",children:[n.jsx(K.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:.25},style:{background:"radial-gradient(800px circle at 50% 55%, var(--color-primary)/8, transparent 65%)",pointerEvents:"none"}}),n.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(1200px circle at 50% 40%, transparent 60%, rgba(0,0,0,0.25))"}}),n.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{type:"spring",stiffness:280,damping:22},className:"relative flex flex-col items-center justify-center gap-1",children:n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsxs(K.div,{className:"relative z-10",initial:{opacity:0,scale:1,x:0},animate:{opacity:1,scale:1,x:-14},transition:{duration:.35,ease:"easeOut",delay:.2},children:[n.jsx(K.div,{className:"absolute inset-0 rounded-full bg-primary/15 blur-2xl",initial:{opacity:0},animate:{opacity:[0,1,.9]},transition:{duration:.9,ease:"easeOut"}}),n.jsx(K.img,{src:Fk,alt:"opcode",className:"h-20 w-20 rounded-lg shadow-sm",transition:{repeat:1/0,repeatType:"loop",ease:"linear",duration:.5}})]}),n.jsx(K.div,{initial:{x:-35,opacity:0,clipPath:"inset(0 100% 0 0)"},animate:{x:2,opacity:1,clipPath:"inset(0 0% 0 0)"},transition:{duration:.6,ease:"easeOut",delay:.1},style:{willChange:"transform, opacity, clip-path"},children:n.jsx(Ok,{})})]})})]})})}function Ok(){return n.jsxs("div",{className:"text-5xl font-extrabold tracking-tight brand-text",children:[n.jsx("span",{className:"brand-text-solid",children:"opcode"}),n.jsx("span",{"aria-hidden":"true",className:"brand-text-shimmer",children:"opcode"})]})}function Lk(){const[t,e]=f.useState("tabs"),{createClaudeMdTab:s,createSettingsTab:r,createUsageTab:a,createMCPTab:i,createAgentsTab:o}=Wn(),[l,c]=f.useState([]),[d,u]=f.useState(null),[h,m]=f.useState([]),[p,g]=f.useState(null),[x,b]=f.useState(!0),[y,v]=f.useState(null),[j,S]=f.useState(!1),[w,_]=f.useState(!1),[N,C]=f.useState(!1),[P,O]=f.useState("/"),[B,U]=f.useState(null),[G,R]=f.useState(null),[z]=f.useState("welcome");J2();const re=vs(),[A]=f.useState(!1);f.useEffect(()=>{t==="projects"&&l.length>0&&!A&&re.journeyMilestone({journey_stage:"onboarding",milestone_reached:"projects_created",time_to_milestone_ms:Date.now()-performance.timing.navigationStart})},[t,l.length,A,re]),f.useEffect(()=>{Jj()},[]),f.useEffect(()=>{t==="projects"?F():t==="welcome"&&b(!1)},[t]),f.useEffect(()=>{if(t!=="tabs")return;const le=$=>{if(navigator.platform.toUpperCase().indexOf("MAC")>=0?$.metaKey:$.ctrlKey)switch($.key){case"t":$.preventDefault(),window.dispatchEvent(new CustomEvent("create-chat-tab"));break;case"w":$.preventDefault(),window.dispatchEvent(new CustomEvent("close-current-tab"));break;case"Tab":$.preventDefault(),$.shiftKey?window.dispatchEvent(new CustomEvent("switch-to-previous-tab")):window.dispatchEvent(new CustomEvent("switch-to-next-tab"));break;default:if($.key>="1"&&$.key<="9"){$.preventDefault();const E=parseInt($.key)-1;window.dispatchEvent(new CustomEvent("switch-to-tab-by-index",{detail:{index:E}}))}break}};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[t]),f.useEffect(()=>{const le=()=>{_(!0)};return window.addEventListener("claude-not-found",le),()=>{window.removeEventListener("claude-not-found",le)}},[]);const F=async()=>{try{b(!0),v(null);const le=await X.listProjects();c(le)}catch(le){console.error("Failed to load projects:",le),v("Failed to load projects. Please ensure ~/.claude directory exists.")}finally{b(!1)}},ee=async le=>{try{b(!0),v(null);const $=await X.getProjectSessions(le.id);m($),u(le)}catch($){console.error("Failed to load sessions:",$),v("Failed to load sessions for this project.")}finally{b(!1)}},D=async()=>{const le=await X.getHomeDirectory();O(le),C(!0)},Z=le=>{g(le),fe("claude-file-editor")},me=()=>{g(null),fe("projects")},fe=le=>{e(le)},be=()=>{switch(t){case"welcome":return n.jsx("div",{className:"flex items-center justify-center p-4",style:{height:"100%"},children:n.jsxs("div",{className:"w-full max-w-4xl",children:[n.jsx(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.15},className:"mb-12 text-center",children:n.jsxs("h1",{className:"text-4xl font-bold tracking-tight",children:[n.jsx("span",{className:"rotating-symbol"}),"Welcome to opcode"]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[n.jsx(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.15,delay:.05},children:n.jsx(se,{className:"h-64 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg border border-border/50 shimmer-hover trailing-border",onClick:()=>fe("cc-agents"),children:n.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8",children:[n.jsx(ts,{className:"h-16 w-16 mb-4 text-primary"}),n.jsx("h2",{className:"text-xl font-semibold",children:"CC Agents"})]})})}),n.jsx(K.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.15,delay:.1},children:n.jsx(se,{className:"h-64 cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg border border-border/50 shimmer-hover trailing-border",onClick:()=>fe("projects"),children:n.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8",children:[n.jsx(kb,{className:"h-16 w-16 mb-4 text-primary"}),n.jsx("h2",{className:"text-xl font-semibold",children:"Projects"})]})})})]})]})});case"cc-agents":return n.jsx(uk,{onBack:()=>fe("welcome")});case"editor":return n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(Fp,{onBack:()=>fe("welcome")})});case"settings":return n.jsx(Qf,{onBack:()=>fe("welcome")});case"projects":return d?n.jsx(Rp,{sessions:h,projectPath:d.path,onEditClaudeFile:Z}):n.jsx(Mp,{projects:l,onProjectClick:ee,onOpenProject:D,loading:x});case"claude-file-editor":return p?n.jsx(b_,{file:p,onBack:me}):null;case"tabs":return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx(wk,{className:"flex-shrink-0"}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(Ik,{})})]});case"usage-dashboard":return n.jsx(og,{onBack:()=>fe("welcome")});case"mcp":return n.jsx(lg,{onBack:()=>fe("welcome")});case"project-settings":if(G)return n.jsx(jk,{project:G,onBack:()=>{R(null),fe(z||"projects")}});break;default:return null}};return n.jsxs("div",{className:"h-screen flex flex-col",children:[n.jsx(v_,{onAgentsClick:()=>o(),onUsageClick:()=>a(),onClaudeClick:()=>s(),onMCPClick:()=>i(),onSettingsClick:()=>r(),onInfoClick:()=>S(!0)}),n.jsx("div",{className:"flex-1 overflow-hidden",children:be()}),j&&n.jsx(yk,{onClose:()=>S(!1)}),n.jsx(bk,{open:w,onOpenChange:_,onSuccess:()=>{U({message:"Claude binary path saved successfully",type:"success"}),window.location.reload()},onError:le=>U({message:le,type:"error"})}),N&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:n.jsx("div",{className:"w-full max-w-2xl h-[600px] bg-background border rounded-lg shadow-lg",children:n.jsx(Fd,{basePath:P,onSelect:async le=>{if(le.is_directory)try{const $=await X.createProject(le.path);C(!1),await F(),await ee($)}catch($){console.error("Failed to create project:",$),v("Failed to create project for the selected directory.")}},onClose:()=>C(!1)})})}),n.jsx(gs,{children:B&&n.jsx(fs,{message:B.message,type:B.type,onDismiss:()=>U(null)})}),N&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:n.jsx("div",{className:"w-full max-w-2xl h-[600px] bg-background border rounded-lg shadow-lg",children:n.jsx(Fd,{basePath:P,onSelect:async le=>{if(le.is_directory)try{const $=await X.createProject(le.path);C(!1),await F(),await ee($)}catch($){console.error("Failed to create project:",$),v("Failed to create project for the selected directory.")}},onClose:()=>C(!1)})})})]})}function $k(){const[t,e]=f.useState(()=>{try{const s=typeof window<"u"?window.localStorage.getItem("app_setting:startup_intro_enabled"):null;if(s==="true")return!0;if(s==="false")return!1}catch{}return!0});return f.useEffect(()=>{let s;return(async()=>{try{const r=await X.getSetting("startup_intro_enabled");(r===null?!0:r==="true")?s=window.setTimeout(()=>e(!1),2e3):e(!1)}catch{s=window.setTimeout(()=>e(!1),2e3)}})(),()=>{s&&window.clearTimeout(s)}},[]),n.jsx(e_,{children:n.jsx(Xj,{children:n.jsxs(Zj,{children:[n.jsx(Lk,{}),n.jsx(Dk,{visible:t})]})})})}class Vk extends f.Component{constructor(s){super(s);Qe(this,"reset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){var i;const a=de.uiError({component_name:((i=r.componentStack)==null?void 0:i.split(`
`)[0])||"Unknown",error_type:s.name||"UnknownError",user_action:void 0});Q.track(a.event,a.properties),console.error("UI Error caught by boundary:",s,r)}render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.reset):n.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold text-destructive mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:this.state.error.message}),n.jsx("button",{onClick:this.reset,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Try again"})]}):this.props.children}}var dg=f.createContext({client:Pe});function ug(t,e,s){if(s===void 0&&(s=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(s.has(t)&&s.get(t)===e)return!0;s.set(t,e);var r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;for(var i=0,o=r;i<o.length;i++){var l=o[i];if(!a.includes(l)||!ug(t[l],e[l],s))return!1}return!0}function zk(t){var e=t.children,s=t.client,r=t.apiKey,a=t.options,i=f.useRef(null),o=f.useMemo(function(){return s?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),a&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),s):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),Pe)},[s,r,JSON.stringify(a)]);return f.useEffect(function(){if(!s){var l=i.current;l?(r!==l.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),a&&!ug(a,l.options)&&Pe.set_config(a),i.current={apiKey:r,options:a??{}}):(Pe.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),Pe.init(r,a),i.current={apiKey:r,options:a??{}})}},[s,r,JSON.stringify(a)]),He.createElement(dg.Provider,{value:{client:o}},e)}var al=function(t,e){return al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])},al(t,e)};function Uk(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");al(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var Wi=function(t){return typeof t=="function"},Bk={componentStack:null,error:null},Hk={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){Uk(e,t);function e(s){var r=t.call(this,s)||this;return r.state=Bk,r}return e.prototype.componentDidCatch=function(s,r){var a=r.componentStack,i=this.props.additionalProperties;this.setState({error:s,componentStack:a});var o;Wi(i)?o=i(s):typeof i=="object"&&(o=i);var l=this.context.client;l.captureException(s,o)},e.prototype.render=function(){var s=this.props,r=s.children,a=s.fallback,i=this.state;if(i.componentStack==null)return Wi(r)?r():r;var o=Wi(a)?He.createElement(a,{error:i.error,componentStack:i.componentStack}):a;return He.isValidElement(o)?o:(console.warn(Hk.INVALID_FALLBACK),He.createElement(He.Fragment,null))},e.contextType=dg,e})(He.Component);Q.initialize();K2.startMonitoring(12e4);(()=>{var e,s;typeof navigator<"u"&&(((e=navigator.platform)==null?void 0:e.toLowerCase().includes("mac"))||((s=navigator.userAgent)==null?void 0:s.toLowerCase().includes("mac os x")))&&document.documentElement.classList.add("is-macos")})();(()=>{try{const t=document.querySelector('link[rel="icon"]'),e=t??document.createElement("link");e.rel="icon",e.type="image/png",e.href=cg,t||document.head.appendChild(e)}catch{}})();Ug.createRoot(document.getElementById("root")).render(n.jsx(He.StrictMode,{children:n.jsx(zk,{apiKey:void 0,options:{api_host:void 0,defaults:"2025-05-24",capture_exceptions:!0,debug:!1},children:n.jsx(nl,{children:n.jsx(Vk,{children:n.jsx($k,{})})})})}));export{Za as $,Te as A,L as B,Ya as C,yt as D,Dn as E,tn as F,Vt as G,Ee as H,fn as I,bt as J,Gt as K,Vb as L,vp as M,ce as N,xe as O,pN as P,Wt as Q,pj as R,ns as S,Ds as T,Gl as U,se as V,Ct as W,Ut as X,gt as Y,on as Z,Ve as _,X as a,ka as a0,vo as a1,yo as a2,Sa as a3,xo as a4,Ks as a5,bo as a6,ye as a7,fo as a8,Nt as a9,eg as aA,el as aB,ql as aC,nt as aD,dk as aE,Ab as aF,ke as aG,Wl as aH,Qa as aI,an as aJ,Ul as aK,pn as aa,jp as ab,Pb as ac,X2 as ad,tS as ae,Xu as af,qu as ag,nl as ah,Hl as ai,Zf as aj,Td as ak,Wn as al,eS as am,ma as an,pa as ao,As as ap,o_ as aq,mb as ar,dp as as,gs as at,fs as au,rl as av,ts as aw,tl as ax,rN as ay,aN as az,V as b,T as c,xs as d,Ne as e,qe as f,vs as g,dt as h,Mt as i,mt as j,pt as k,f_ as l,K as m,Xr as n,Ar as o,g_ as p,x_ as q,Ip as r,gj as s,Ga as t,Q2 as u,jj as v,Fd as w,ti as x,Y1 as y,up as z};
